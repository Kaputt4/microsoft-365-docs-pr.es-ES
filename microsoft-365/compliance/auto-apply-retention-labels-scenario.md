---
title: Usar las etiquetas de retención para administrar el ciclo de vida de los documentos almacenados en SharePoint
f1.keywords:
- NOCSH
ms.author: cabailey
author: cabailey
manager: laurawi
audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Priority
ms.collection:
- M365-security-compliance
- SPO_Content
search.appverid:
- MOE150
- MET150
description: Cómo puede usar las etiquetas de retención para administrar el ciclo de vida de los documentos en SharePoint con metadatos para clasificar el contenido, aplicar las etiquetas automáticamente y usar la retención basada en eventos para iniciar el período de retención.
ms.openlocfilehash: 321043a8a33d274ed9e7caecfb167b9587ceae1d
ms.sourcegitcommit: 9f5b136b96b3af4db4cc6f5b1f35130ae60d6b12
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 09/15/2020
ms.locfileid: "47817257"
---
# <a name="use-retention-labels-to-manage-the-lifecycle-of-documents-stored-in-sharepoint"></a><span data-ttu-id="091be-103">Usar las etiquetas de retención para administrar el ciclo de vida de los documentos almacenados en SharePoint</span><span class="sxs-lookup"><span data-stu-id="091be-103">Use retention labels to manage the lifecycle of documents stored in SharePoint</span></span>

><span data-ttu-id="091be-104">*[Instrucciones de licencias de Microsoft 365 para la seguridad y el cumplimiento](https://aka.ms/ComplianceSD).*</span><span class="sxs-lookup"><span data-stu-id="091be-104">*[Microsoft 365 licensing guidance for security & compliance](https://aka.ms/ComplianceSD).*</span></span>

<span data-ttu-id="091be-105">En este artículo se describe cómo puede administrar el ciclo de vida de los documentos que se almacenan en SharePoint mediante el uso de etiquetas de retención aplicadas automáticamente y la retención basada en eventos.</span><span class="sxs-lookup"><span data-stu-id="091be-105">This article describes how you can manage the lifecycle of documents that are stored in SharePoint by using automatically applied retention labels and event-based retention.</span></span>

<span data-ttu-id="091be-106">La función de aplicación automática usa metadatos de SharePoint para la clasificación de documentos.</span><span class="sxs-lookup"><span data-stu-id="091be-106">The auto-apply functionality uses SharePoint metadata for document classification.</span></span> <span data-ttu-id="091be-107">El ejemplo en este artículo sirve para documentos relacionados con el producto, pero pueden usarse los mismos conceptos en otros escenarios.</span><span class="sxs-lookup"><span data-stu-id="091be-107">The example in this article is for product-related documents, but the same concepts can be used for other scenarios.</span></span> <span data-ttu-id="091be-108">Por ejemplo, en la industria del petróleo y gas, podría usarla para administrar el ciclo de vida de los documentos sobre activos físicos, como plataformas petrolíferas, registros de pozos o licencias de producción.</span><span class="sxs-lookup"><span data-stu-id="091be-108">For example, in the oil and gas industry, you could use it to manage the lifecycle of documents about physical assets such as oil platforms, well logs, or production licenses.</span></span> <span data-ttu-id="091be-109">En la industria de servicios financieros, podría administrar documentos de cuentas bancarias, hipotecas y contratos de seguros.</span><span class="sxs-lookup"><span data-stu-id="091be-109">In the financial services industry, you could manage bank account, mortgage, or insurance contract documents.</span></span> <span data-ttu-id="091be-110">En el sector público, podría administrar los permisos de construcción o los formularios fiscales.</span><span class="sxs-lookup"><span data-stu-id="091be-110">In the public sector, you could manage construction permits or tax forms.</span></span>

<span data-ttu-id="091be-111">En este artículo, revisaremos la arquitectura de la información y la definición de las etiquetas de retención.</span><span class="sxs-lookup"><span data-stu-id="091be-111">In this article, we'll look at the information architecture and definition of the retention labels.</span></span> <span data-ttu-id="091be-112">Luego, clasificaremos documentos aplicando las etiquetas automáticamente.</span><span class="sxs-lookup"><span data-stu-id="091be-112">Then we'll classify documents by auto-applying the labels.</span></span> <span data-ttu-id="091be-113">Por último, generaremos los eventos que inician el período de retención.</span><span class="sxs-lookup"><span data-stu-id="091be-113">And finally we'll generate the events that initiate the retention period.</span></span>

## <a name="information-architecture"></a><span data-ttu-id="091be-114">Arquitectura de la información</span><span class="sxs-lookup"><span data-stu-id="091be-114">Information architecture</span></span>

<span data-ttu-id="091be-115">Nuestro escenario es una empresa de fabricación que usa SharePoint para almacenar todos los documentos sobre los productos que desarrolla la empresa.</span><span class="sxs-lookup"><span data-stu-id="091be-115">Our scenario is a manufacturing company that uses SharePoint to store all the documents about the products that the company develops.</span></span> <span data-ttu-id="091be-116">Estos documentos incluyen especificaciones del producto, acuerdos con proveedores y manuales del usuario.</span><span class="sxs-lookup"><span data-stu-id="091be-116">These documents include product specifications, agreements with suppliers, and user manuals.</span></span> <span data-ttu-id="091be-117">Cuando se almacenan estos documentos en SharePoint a través de las directivas de Administración de contenido empresarial, se definen los metadatos del documento y se usan para clasificarlos.</span><span class="sxs-lookup"><span data-stu-id="091be-117">When these documents are stored in SharePoint through Enterprise Content Management policies, document metadata is defined, which is used to classify them.</span></span> <span data-ttu-id="091be-118">Cada documento tiene las siguientes propiedades de metadatos:</span><span class="sxs-lookup"><span data-stu-id="091be-118">Each document has the following metadata properties:</span></span>

- <span data-ttu-id="091be-119">**Tipo de documento** (como, por ejemplo, especificaciones del producto, acuerdo o manual de usuario).</span><span class="sxs-lookup"><span data-stu-id="091be-119">**Doc Type** (such as product specification, agreement, or user manual)</span></span>

- <span data-ttu-id="091be-120">**Nombre del producto**.</span><span class="sxs-lookup"><span data-stu-id="091be-120">**Product Name**</span></span>

- <span data-ttu-id="091be-121">**Estado** (borrador o final).</span><span class="sxs-lookup"><span data-stu-id="091be-121">**Status** (draft or final)</span></span>

<span data-ttu-id="091be-122">Estos metadatos forman un tipo de contenido base denominado *Documento de producción* para todos los documentos.</span><span class="sxs-lookup"><span data-stu-id="091be-122">This metadata forms a base content type called *Production Document* for all the documents.</span></span>

![Tabla de metadatos de la documentación del producto](../media/SPRetention1.png)

> [!NOTE]
> <span data-ttu-id="091be-124">Las directivas de retención usan las propiedades **Tipo de documento** y **Estado** más tarde en este escenario para clasificar y aplicar automáticamente las etiquetas de retención.</span><span class="sxs-lookup"><span data-stu-id="091be-124">The **Doc Type** and **Status** properties are used by retention policies later in this scenario to classify and auto-apply retention labels.</span></span>

<span data-ttu-id="091be-125">Es posible que tengamos varios tipos de contenido que representen diferentes tipos de documentos, pero vamos a centrarnos en la documentación del producto.</span><span class="sxs-lookup"><span data-stu-id="091be-125">We might have several content types that represent different types of documents, but let's focus on the product documentation.</span></span>

<span data-ttu-id="091be-126">En este escenario, usamos el servicio de metadatos administrados y el almacén de términos para crear un conjunto de términos para *Tipo de documento* y otro para *Nombre de producto*.</span><span class="sxs-lookup"><span data-stu-id="091be-126">In this scenario, we use the Managed Metadata service and the Term Store to create a term set for *Doc Type* and another one for *Product Name*.</span></span> <span data-ttu-id="091be-127">Para cada conjunto de términos, creamos un término para cada valor.</span><span class="sxs-lookup"><span data-stu-id="091be-127">For each term set, we create a term for each value.</span></span> <span data-ttu-id="091be-128">Tendría un aspecto similar a este en el almacén de términos de su organización de SharePoint:</span><span class="sxs-lookup"><span data-stu-id="091be-128">It would look like something like this in Term Store for your SharePoint organization:</span></span>

![Conjunto de términos de prueba para la documentación del producto en el almacén de términos](../media/SPRetention2.png)

<span data-ttu-id="091be-130">*Tipo de contenido* se puede crear y publicar con el [Concentrador de tipo de contenido](https://support.office.com/article/manage-content-type-publishing-06f39ac0-5576-4b68-abbc-82b68334889b).</span><span class="sxs-lookup"><span data-stu-id="091be-130">*Content Type* can be created and published by using the [Content Type Hub](https://support.office.com/article/manage-content-type-publishing-06f39ac0-5576-4b68-abbc-82b68334889b).</span></span> <span data-ttu-id="091be-131">También puede crear y publicar un tipo de contenido con herramientas de aprovisionamiento de sitios, como el [Marco de aprovisionamiento PnP](https://docs.microsoft.com/sharepoint/dev/solution-guidance/pnp-provisioning-framework) o el [Esquema JSON de diseño de sitio](https://docs.microsoft.com/sharepoint/dev/declarative-customization/site-design-json-schema#define-a-new-content-type).</span><span class="sxs-lookup"><span data-stu-id="091be-131">You can also create and publish a content type by using site provisioning tools, such as the [PnP provisioning framework](https://docs.microsoft.com/sharepoint/dev/solution-guidance/pnp-provisioning-framework) or [site design JSON schema](https://docs.microsoft.com/sharepoint/dev/declarative-customization/site-design-json-schema#define-a-new-content-type).</span></span>

<span data-ttu-id="091be-132">Cada producto tiene un sitio de SharePoint dedicado que contiene una biblioteca de documentos con los tipos de contenido adecuados habilitados.</span><span class="sxs-lookup"><span data-stu-id="091be-132">Each product has a dedicated SharePoint site that contains one document library that has the right content types enabled.</span></span> <span data-ttu-id="091be-133">Todos los documentos se almacenan en esta biblioteca de documentos.</span><span class="sxs-lookup"><span data-stu-id="091be-133">All documents are stored in this document library.</span></span>

<span data-ttu-id="091be-134">[ ![Documentación de la biblioteca de documentos para productos](../media/SPRetention3.png) ](../media/SPRetention3.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-134">[ ![Document library for product documentation](../media/SPRetention3.png) ](../media/SPRetention3.png#lightbox)</span></span>

> [!NOTE]
> <span data-ttu-id="091be-135">En lugar de tener un sitio de SharePoint por producto, en este escenario, la empresa de fabricación podría usar un equipo de Microsoft Teams por producto para permitir la colaboración entre los miembros del equipo, como a través del chat persistente y el uso de la pestaña **Archivos** en Teams para la administración de documentos.</span><span class="sxs-lookup"><span data-stu-id="091be-135">Instead of having a SharePoint site per product, the manufacturing company in this scenario could use a Microsoft Team per product to support collaboration among members of the team, such as through persistent chat, and use the **Files** tab in Teams for document management.</span></span> <span data-ttu-id="091be-136">En este artículo nos centraremos solo en los documentos, por lo tanto solo usaremos un sitio.</span><span class="sxs-lookup"><span data-stu-id="091be-136">In this article we only focus on documents, so, we'll only use a site.</span></span>

<span data-ttu-id="091be-137">La siguiente es una vista de la biblioteca de documentos para el producto Spinning Widget:</span><span class="sxs-lookup"><span data-stu-id="091be-137">Here's a view of the document library for the Spinning Widget product:</span></span>

<span data-ttu-id="091be-138">[ ![Biblioteca de documentos de Spinning Widget](../media/SPRetention4.png) ](../media/SPRetention4.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-138">[ ![Spinning Widget document library](../media/SPRetention4.png) ](../media/SPRetention4.png#lightbox)</span></span>

<span data-ttu-id="091be-139">Ahora que tenemos la arquitectura de información básica para la administración de documentos, echemos un vistazo a la estrategia de retención y eliminación de los documentos que usan los metadatos y cómo clasificamos esos documentos.</span><span class="sxs-lookup"><span data-stu-id="091be-139">Now that we have the basic information architecture in place for document management, let's look at the retention and disposal strategy for the documents that use the metadata and how we classify those documents.</span></span>

## <a name="retention-and-disposition"></a><span data-ttu-id="091be-140">Retención y disposición</span><span class="sxs-lookup"><span data-stu-id="091be-140">Retention and disposition</span></span>

<span data-ttu-id="091be-141">Las directivas de cumplimiento y gobierno de datos de la empresa de fabricación definen cómo se conservan y eliminan los datos.</span><span class="sxs-lookup"><span data-stu-id="091be-141">The manufacturing company's compliance and data governance policies dictate how data is preserved and disposed of.</span></span> <span data-ttu-id="091be-142">Los documentos relacionados con el producto deben conservarse durante la fabricación del producto y durante un período adicional determinado.</span><span class="sxs-lookup"><span data-stu-id="091be-142">Product-related documents must be kept for as long as the product is manufactured and for a certain additional period.</span></span> <span data-ttu-id="091be-143">Este período adicional es diferente para especificaciones del producto, acuerdos y manuales de usuario.</span><span class="sxs-lookup"><span data-stu-id="091be-143">The additional period differs for product specifications, agreements, and user manuals.</span></span> <span data-ttu-id="091be-144">En la tabla siguiente se indican los requisitos de retención y disposición:</span><span class="sxs-lookup"><span data-stu-id="091be-144">The following table indicates the retention and disposition requirements:</span></span>

|   <span data-ttu-id="091be-145">Tipo de documento</span><span class="sxs-lookup"><span data-stu-id="091be-145">Document type</span></span>            |   <span data-ttu-id="091be-146">Retención</span><span class="sxs-lookup"><span data-stu-id="091be-146">Retention</span></span>                            |   <span data-ttu-id="091be-147">Eliminación</span><span class="sxs-lookup"><span data-stu-id="091be-147">Disposition</span></span>                                |
| -------------------------- | -------------------------------------- | -------------------------------------------- |
| <span data-ttu-id="091be-148">Especificaciones del producto</span><span class="sxs-lookup"><span data-stu-id="091be-148">Product specifications</span></span>      | <span data-ttu-id="091be-149">5 años luego de detener la producción</span><span class="sxs-lookup"><span data-stu-id="091be-149">5 years after production stops</span></span>  | <span data-ttu-id="091be-150">Eliminar</span><span class="sxs-lookup"><span data-stu-id="091be-150">Delete</span></span>                                       |
| <span data-ttu-id="091be-151">Acuerdos del producto</span><span class="sxs-lookup"><span data-stu-id="091be-151">Product agreements</span></span>          | <span data-ttu-id="091be-152">10 años luego de detener la producción</span><span class="sxs-lookup"><span data-stu-id="091be-152">10 years after production stops</span></span> | <span data-ttu-id="091be-153">Revisar</span><span class="sxs-lookup"><span data-stu-id="091be-153">Review</span></span>                                       |
| <span data-ttu-id="091be-154">Manuales de usuario</span><span class="sxs-lookup"><span data-stu-id="091be-154">User manuals</span></span>                | <span data-ttu-id="091be-155">5 años luego de detener la producción</span><span class="sxs-lookup"><span data-stu-id="091be-155">5 years after production stops</span></span>  | <span data-ttu-id="091be-156">Eliminar</span><span class="sxs-lookup"><span data-stu-id="091be-156">Delete</span></span>                                       |
| <span data-ttu-id="091be-157">Cualquier otro tipo de documento</span><span class="sxs-lookup"><span data-stu-id="091be-157">All other types of documents</span></span> | <span data-ttu-id="091be-158">No conservar activamente</span><span class="sxs-lookup"><span data-stu-id="091be-158">Don't actively retain</span></span>  | <span data-ttu-id="091be-159">Eliminar cuando el documento tenga una antigüedad de más de 3 años</span><span class="sxs-lookup"><span data-stu-id="091be-159">Delete when document is older than 3 years</span></span> <br /><br /> <span data-ttu-id="091be-160">Se considera que un documento tiene una antigüedad de más de 3 años si no se ha modificado en los últimos 3 años.</span><span class="sxs-lookup"><span data-stu-id="091be-160">A document is considered older than 3 years if it hasn't been modified within the last 3 years.</span></span> |
|||

<span data-ttu-id="091be-161">Se usa el Centro de cumplimiento de Microsoft 365 para crear las siguientes [etiquetas de retención](retention.md#retention-labels):</span><span class="sxs-lookup"><span data-stu-id="091be-161">We use the Microsoft 365 compliance center to create the following [retention labels](retention.md#retention-labels):</span></span>

  - <span data-ttu-id="091be-162">Especificaciones del producto</span><span class="sxs-lookup"><span data-stu-id="091be-162">Product Specification</span></span>

  - <span data-ttu-id="091be-163">Acuerdo de producto</span><span class="sxs-lookup"><span data-stu-id="091be-163">Product Agreement</span></span>

  - <span data-ttu-id="091be-164">Manual de usuario</span><span class="sxs-lookup"><span data-stu-id="091be-164">User Manual</span></span>

<span data-ttu-id="091be-165">En este artículo, solo se mostrará cómo crear y aplicar automáticamente la etiqueta de retención Especificaciones del producto.</span><span class="sxs-lookup"><span data-stu-id="091be-165">In this article, we only show how to create and auto-apply the Product Specification retention label.</span></span> <span data-ttu-id="091be-166">Para implementar el escenario completo, también crearía y aplicaría automáticamente las etiquetas de retención a los otros dos tipos de documentos.</span><span class="sxs-lookup"><span data-stu-id="091be-166">To implement the complete scenario, you would also create and auto-apply retention labels for the other two document types.</span></span>

### <a name="settings-for-the-product-specification-retention-label"></a><span data-ttu-id="091be-167">Configuración de la etiqueta de retención Especificaciones del producto</span><span class="sxs-lookup"><span data-stu-id="091be-167">Settings for the Product Specification retention label</span></span>

<span data-ttu-id="091be-168">Este es el [plan de archivo](file-plan-manager.md) para la etiqueta de retención de Especificaciones del producto:</span><span class="sxs-lookup"><span data-stu-id="091be-168">Here's the [file plan](file-plan-manager.md) for the Product Specification retention label:</span></span>

- <span data-ttu-id="091be-169">**Nombre:** Especificaciones del producto.</span><span class="sxs-lookup"><span data-stu-id="091be-169">**Name:** Product Specification</span></span>

- <span data-ttu-id="091be-170">**Descripción para los usuarios:** Conservar durante cinco años después de que se detenga la producción.</span><span class="sxs-lookup"><span data-stu-id="091be-170">**Description for users:** Retain for 5 years after production stops.</span></span>

- <span data-ttu-id="091be-171">**Descripción para administradores:** conservar cinco años después de que se detenga la producción, la eliminación automática, la retención basada en eventos, el tipo de evento es *Cese de producción*.</span><span class="sxs-lookup"><span data-stu-id="091be-171">**Description for admins:** Retain for 5 years after production stops, auto delete, event-based retention, event type is *Product Cessation*.</span></span>

- <span data-ttu-id="091be-172">**Acción de retención:** conservar y eliminar.</span><span class="sxs-lookup"><span data-stu-id="091be-172">**Retention action:** Retain and delete.</span></span>

- <span data-ttu-id="091be-173">**Duración de la retención:** 5 años (1 825 días).</span><span class="sxs-lookup"><span data-stu-id="091be-173">**Retention duration:** 5 years (1,825 days).</span></span>

- <span data-ttu-id="091be-174">**Etiqueta de registro**: configure la etiqueta de retención para marcar los elementos como un [registro](records-management.md#records), lo que significa que los usuarios no podrán modificarlos ni eliminarlos.</span><span class="sxs-lookup"><span data-stu-id="091be-174">**Record label**: Configure the retention label to mark items as a [record](records-management.md#records), which means the labeled documents can't then be modified or deleted by users.</span></span>

- <span data-ttu-id="091be-175">**Descriptores del plan de archivos:** para simplificar el escenario, no se proporcionan descriptores de archivo opcionales.</span><span class="sxs-lookup"><span data-stu-id="091be-175">**File plan descriptors:** For simplifying the scenario, no optional file descriptors are provided.</span></span>

<span data-ttu-id="091be-176">La siguiente captura de pantalla muestra la configuración al crear la etiqueta de retención Especificaciones del producto en el Centro de cumplimiento de Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="091be-176">The following screenshot shows the settings when you create the Product Specification retention label in the Microsoft 365 compliance center.</span></span> <span data-ttu-id="091be-177">Cuando cree la etiqueta de retención, puede crear el tipo de evento *Cese de producción*.</span><span class="sxs-lookup"><span data-stu-id="091be-177">You can create the *Product Cessation* event type when you create the retention label.</span></span> <span data-ttu-id="091be-178">Vea el procedimiento en la sección siguiente.</span><span class="sxs-lookup"><span data-stu-id="091be-178">See the procedure in the following section.</span></span>

![Configuración de retención para la etiqueta Especificaciones del producto](../media/SPRetention5.png)

> [!NOTE]
> <span data-ttu-id="091be-180">Para no tener que esperar 5 años para eliminar documentos, configure la duración de la retención en ***1 día*** si está creando este escenario en un entorno de prueba.</span><span class="sxs-lookup"><span data-stu-id="091be-180">To avoid a 5-year wait for document deletion, set the retention duration to ***1 day*** if you're recreating this scenario in a test environment.</span></span>

### <a name="create-an-event-type-when-you-create-a-retention-label"></a><span data-ttu-id="091be-181">Creación de un tipo de evento al crear una etiqueta de retención</span><span class="sxs-lookup"><span data-stu-id="091be-181">Create an event type when you create a retention label</span></span>

1. <span data-ttu-id="091be-182">Entre en la página **Definir la configuración de retención** del asistente para crear etiquetas de retención, después en **Iniciar el período de retención adecuado** y seleccione **Crear nuevo tipo de evento**:</span><span class="sxs-lookup"><span data-stu-id="091be-182">On the **Define retention settings** page of the Create retention label wizard, after **Start the retention period based on**, select **Create new event type**:</span></span>
    
    ![Crear un nuevo tipo de evento para el cuadro de diálogo etiqueta de especificaciones del producto](../media/SPRetention6.png)

3. <span data-ttu-id="091be-184">En la página **Asignar un nombre al tipo de evento**, escriba **Cese de producción** y una descripción opcional.</span><span class="sxs-lookup"><span data-stu-id="091be-184">On the **Name your event type** page, enter **Product Cessation** and an optional description.</span></span> <span data-ttu-id="091be-185">Luego, seleccione **Siguiente**, **Enviar** y **Hecho**.</span><span class="sxs-lookup"><span data-stu-id="091be-185">Then select **Next**, **Submit**, and **Done**.</span></span>

4. <span data-ttu-id="091be-186">Regrese a la página **Definir la configuración de retención**, para **Iniciar el período de retención adecuado**, utilice el cuadro desplegable para seleccionar el tipo de evento **Cese de producción** que creó.</span><span class="sxs-lookup"><span data-stu-id="091be-186">Back on the **Define retention settings** page, for **Start the retention period based on**, use the dropdown box to select the **Product Cessation** event type that you created.</span></span>
    
    <span data-ttu-id="091be-187">Este es el aspecto que tiene la configuración de la etiqueta de retención Especificaciones del producto:</span><span class="sxs-lookup"><span data-stu-id="091be-187">Here's what the settings look like for the Product Specification retention label:</span></span> 
    
   ![Configuración para la nueva etiqueta Especificaciones del producto](../media/SPRetention7.png)

6. <span data-ttu-id="091be-189">Seleccione **Crear etiqueta** y, en la siguiente página donde puede ver las opciones para publicarla, Después de crear la etiqueta y ver las opciones para publicar la etiqueta, aplicarla automáticamente o guardarla: seleccione **Solo guardar la etiqueta por ahora** y, a continuación, **Hecho**.</span><span class="sxs-lookup"><span data-stu-id="091be-189">Select **Create label**, and on the next page when you see the options to publish the label, auto-apply the label, or just save the label: Select **Just save the label for now**, and then select **Done**.</span></span> 
    
    > [!TIP]
    > <span data-ttu-id="091be-190">Para obtener instrucciones más detalladas, consulte [Crear una etiqueta cuyo período de retención se base en un evento](event-driven-retention.md#step-1-create-a-label-whose-retention-period-is-based-on-an-event).</span><span class="sxs-lookup"><span data-stu-id="091be-190">For more detailed steps, see [Create a label whose retention period is based on an event](event-driven-retention.md#step-1-create-a-label-whose-retention-period-is-based-on-an-event).</span></span>

<span data-ttu-id="091be-191">Ahora, echemos un vistazo cómo aplicar automáticamente la etiqueta de retención al contenido de las especificaciones del producto.</span><span class="sxs-lookup"><span data-stu-id="091be-191">Now let's look at how we'll auto-apply the retention label to product-specification content.</span></span>

## <a name="auto-apply-retention-labels-to-documents"></a><span data-ttu-id="091be-192">Aplicar automáticamente etiquetas de retención a documentos</span><span class="sxs-lookup"><span data-stu-id="091be-192">Auto-apply retention labels to documents</span></span>

<span data-ttu-id="091be-193">Usaremos el lenguaje de consultas de palabras clave (KQL) para [aplicar automáticamente](apply-retention-labels-automatically.md) las etiquetas de retención que creamos.</span><span class="sxs-lookup"><span data-stu-id="091be-193">We're going to use Keyword Query Language (KQL) to [auto-apply](apply-retention-labels-automatically.md) the retention labels that we created.</span></span> <span data-ttu-id="091be-194">KQL es el lenguaje que se usa para crear consultas de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="091be-194">KQL is the language that's used to build search queries.</span></span> <span data-ttu-id="091be-195">En KQL, puede realizar búsquedas mediante palabras clave o propiedades administradas.</span><span class="sxs-lookup"><span data-stu-id="091be-195">In KQL, you can search by using keywords or managed properties.</span></span> <span data-ttu-id="091be-196">Para obtener más información, vea [Referencia de sintaxis del lenguaje de consultas de palabras clave (KQL)](https://docs.microsoft.com/sharepoint/dev/general-development/keyword-query-language-kql-syntax-reference).</span><span class="sxs-lookup"><span data-stu-id="091be-196">For more information, see [Keyword Query Language (KQL) syntax reference](https://docs.microsoft.com/sharepoint/dev/general-development/keyword-query-language-kql-syntax-reference).</span></span>

<span data-ttu-id="091be-197">Básicamente, queremos indicar a Microsoft 365 que "aplique la etiqueta de retención **Especificaciones del producto** a todos los documentos que contengan el **Estado** \*\*Final \*\* y un **Tipo de documento** de **Especificaciones del producto**".</span><span class="sxs-lookup"><span data-stu-id="091be-197">Basically, we want to tell Microsoft 365 to "apply the **Product Specification** retention label to all documents that have a **Status** of **Final** and a **Doc Type** of **Product Specification**."</span></span> <span data-ttu-id="091be-198">Recuerde que **Estado** y **Tipo de documento** son las columnas de sitio que definimos para el tipo de contenido de Documentación del producto en la sección [Arquitectura de información](#information-architecture).</span><span class="sxs-lookup"><span data-stu-id="091be-198">Recall that **Status** and **Doc Type** are the site columns that we defined for the Product Documentation content type in the [Information architecture](#information-architecture) section.</span></span> <span data-ttu-id="091be-199">Para ello, debemos configurar el esquema de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="091be-199">To do this, we need to configure the search schema.</span></span>

<span data-ttu-id="091be-200">Cuando SharePoint indexa contenido, genera automáticamente propiedades rastreadas para cada columna de sitio.</span><span class="sxs-lookup"><span data-stu-id="091be-200">When SharePoint indexes content, it automatically generates crawled properties for each site column.</span></span> <span data-ttu-id="091be-201">Para este escenario, nos interesan las propiedades **Tipo de documento** y **Estado**.</span><span class="sxs-lookup"><span data-stu-id="091be-201">For this scenario, we're interested in the **Doc Type** and **Status** properties.</span></span> <span data-ttu-id="091be-202">Necesitamos documentos en la biblioteca con el tipo de contenido correcto y las columnas de sitio rellenadas, para que la búsqueda pueda crear las propiedades rastreadas.</span><span class="sxs-lookup"><span data-stu-id="091be-202">We need documents in the library that are the right content type and have the site columns filled in for search to create the crawled properties.</span></span>

<span data-ttu-id="091be-203">En el Centro de administración de SharePoint, abra la configuración de búsqueda y seleccionar **Administrar el esquema de búsqueda** para ver y configurar las propiedades rastreadas.</span><span class="sxs-lookup"><span data-stu-id="091be-203">In the SharePoint admin center, open the Search configuration, and select **Manage Search Schema** to view and configure the crawled properties.</span></span>

![Propiedades rastreadas en el esquema de búsqueda](../media/SPRetention8.png)

<span data-ttu-id="091be-205">Si escribimos ***estado*** en el cuadro de **Propiedades rastreadas** y seleccionamos la flecha verde, deberíamos ver un resultado similar a este:</span><span class="sxs-lookup"><span data-stu-id="091be-205">If we type ***status*** in the **Crawled properties** box and select the green arrow, we should see a result like this:</span></span>

![La propiedad rastreada ows_Status](../media/SPRetention9.png)

<span data-ttu-id="091be-207">La propiedad **ows\_\_Status** (con doble guión bajo) es la que nos interesa.</span><span class="sxs-lookup"><span data-stu-id="091be-207">The **ows\_\_Status** property (notice the double underscore) is the one that interests us.</span></span> <span data-ttu-id="091be-208">Esta se asigna a la propiedad **Estado** del tipo de contenido de Documento de producción.</span><span class="sxs-lookup"><span data-stu-id="091be-208">It maps to the **Status** property of the Production Document content type.</span></span>

<span data-ttu-id="091be-209">Ahora, si escribimos ***ows\_doc*** y seleccionamos la flecha verde, deberíamos ver algo así:</span><span class="sxs-lookup"><span data-stu-id="091be-209">Now, if we type ***ows\_doc*** and select the green arrow, we should see something like this:</span></span>

![La propiedad rastreada ows_Doc_Type](../media/SPRetention10.png)

<span data-ttu-id="091be-211">La propiedad **ows\_Doc\_x0020\_Type** es la segunda propiedad que nos interesa.</span><span class="sxs-lookup"><span data-stu-id="091be-211">The **ows\_Doc\_x0020\_Type** property is the second property that interests us.</span></span> <span data-ttu-id="091be-212">Se asigna a la propiedad **Tipo de documento** del tipo de contenido de Documento de producción.</span><span class="sxs-lookup"><span data-stu-id="091be-212">It maps to the **Doc Type** property of the Production Document content type.</span></span>

> [!TIP]
> <span data-ttu-id="091be-213">Para identificar el nombre de una propiedad rastreada para este escenario, vaya a biblioteca de documentos que contiene los documentos de producción.</span><span class="sxs-lookup"><span data-stu-id="091be-213">To identify the name of a crawled property for this scenario, go to the document library that contains the production documents.</span></span> <span data-ttu-id="091be-214">A continuación, vaya a la configuración de la biblioteca.</span><span class="sxs-lookup"><span data-stu-id="091be-214">Then go to the library settings.</span></span> <span data-ttu-id="091be-215">Para las **Columnas**, seleccione el nombre de la columna (por ejemplo, **Estado** o **Tipo de documento**) para abrir la página de columnas del sitio.</span><span class="sxs-lookup"><span data-stu-id="091be-215">For **Columns**, select the name of the column (for example, **Status** or **Doc Type**) to open the site column page.</span></span> <span data-ttu-id="091be-216">El parámetro *Campo* en la dirección URL de la página contiene el nombre del campo.</span><span class="sxs-lookup"><span data-stu-id="091be-216">The *Field* parameter in the URL for that page contains the name of the field.</span></span> <span data-ttu-id="091be-217">El nombre de este campo, con el prefijo "ows_", es el nombre de la propiedad rastreada.</span><span class="sxs-lookup"><span data-stu-id="091be-217">This field name, prefixed with "ows_", is the name of the crawled property.</span></span> <span data-ttu-id="091be-218">Por ejemplo, la dirección URL `https://tenantname.sharepoint.com/sites/SpinningWidget/_layouts/15/FldEdit.aspx?List=%7BC38C2F45-3BD6-4C3B-AA3B-EF5DF6B3D172%7D&Field=_Status` corresponde a la propiedad rastreada *ows\_\_Status*.</span><span class="sxs-lookup"><span data-stu-id="091be-218">For example, the URL `https://tenantname.sharepoint.com/sites/SpinningWidget/_layouts/15/FldEdit.aspx?List=%7BC38C2F45-3BD6-4C3B-AA3B-EF5DF6B3D172%7D&Field=_Status` corresponds to the *ows\_\_Status* crawled property.</span></span>

<span data-ttu-id="091be-219">Si las propiedades rastreadas que está buscando no aparecen en la sección Administrar esquema de búsqueda en el Centro de administración de SharePoint:</span><span class="sxs-lookup"><span data-stu-id="091be-219">If the crawled properties you're looking for don't appear in the Manage Search Schema section in SharePoint admin center:</span></span>

- <span data-ttu-id="091be-220">Tal vez los documentos no se han indexado.</span><span class="sxs-lookup"><span data-stu-id="091be-220">Maybe the documents haven't been indexed.</span></span> <span data-ttu-id="091be-221">Puede forzar que se repita la indexación de la biblioteca en **Configuración de la biblioteca de documentos** > **Configuración avanzada**.</span><span class="sxs-lookup"><span data-stu-id="091be-221">You can force a reindex of the library by going to **Document library settings** > **Advanced Settings**.</span></span>

- <span data-ttu-id="091be-222">Si la biblioteca de documentos está en un sitio moderno, asegúrese de que el administrador de SharePoint también es un administrador de la colección de sitios.</span><span class="sxs-lookup"><span data-stu-id="091be-222">If the document library is in a modern site, make sure that the SharePoint admin is also a site collection admin.</span></span>

<span data-ttu-id="091be-223">Para obtener más información sobre las propiedades rastreadas y administradas, vea [Crear automáticamente propiedades administradas en SharePoint Server](https://docs.microsoft.com/sharepoint/technical-reference/automatically-created-managed-properties-in-sharepoint).</span><span class="sxs-lookup"><span data-stu-id="091be-223">For more information about crawled and managed properties, see [Automatically created managed properties in SharePoint Server](https://docs.microsoft.com/sharepoint/technical-reference/automatically-created-managed-properties-in-sharepoint).</span></span>

### <a name="map-crawled-properties-to-pre-defined-managed-properties"></a><span data-ttu-id="091be-224">Asignación de propiedades rastreadas a propiedades administradas previamente definidas</span><span class="sxs-lookup"><span data-stu-id="091be-224">Map crawled properties to pre-defined managed properties</span></span>

<span data-ttu-id="091be-225">KQL no puede usar propiedades rastreadas en las consultas de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="091be-225">KQL can't use crawled properties in search queries.</span></span> <span data-ttu-id="091be-226">Necesita usar una propiedad administrada.</span><span class="sxs-lookup"><span data-stu-id="091be-226">It has to use a managed property.</span></span> <span data-ttu-id="091be-227">En un escenario de búsqueda típico, creamos una propiedad administrada y la asignamos a la propiedad rastreada que necesitamos.</span><span class="sxs-lookup"><span data-stu-id="091be-227">In a typical search scenario, we create a managed property and map it to the crawled property that we need.</span></span> <span data-ttu-id="091be-228">Sin embargo, para aplicar las etiquetas de retención automáticamente, solo se pueden especificar las propiedades administradas predefinidas en KQL y no las propiedades administradas personalizadas.</span><span class="sxs-lookup"><span data-stu-id="091be-228">However, for auto-applying retention labels, you can only specify pre-defined managed properties in KQL, not custom managed properties.</span></span> <span data-ttu-id="091be-229">Se puede usar un conjunto de propiedades administradas predefinidas en el sistema para las cadenas de *RefinableString00* a *RefinableString199*.</span><span class="sxs-lookup"><span data-stu-id="091be-229">There's a set of predefined managed properties in the system for string *RefinableString00* to *RefinableString199* that you can use.</span></span> <span data-ttu-id="091be-230">Para obtener una lista completa, vea [Propiedades administradas sin usar predeterminadas](https://docs.microsoft.com/sharepoint/manage-search-schema#default-unused-managed-properties).</span><span class="sxs-lookup"><span data-stu-id="091be-230">For a complete list, see [Default unused managed properties](https://docs.microsoft.com/sharepoint/manage-search-schema#default-unused-managed-properties).</span></span> <span data-ttu-id="091be-231">Estas propiedades administradas predeterminadas suelen usarse para definir refinadores de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="091be-231">These default managed properties are typically used for defining search refiners.</span></span>

<span data-ttu-id="091be-232">Para que la consulta KQL aplique automáticamente la etiqueta de retención correcta en el contenido de documentos del producto, asignamos las propiedades rastreadas **ows\_Doc\_x0020\_Type* y *ows\_\_Status** a dos propiedades administradas que se pueden refinar.</span><span class="sxs-lookup"><span data-stu-id="091be-232">For the KQL query to automatically apply the correct retention label to product document content, we map the crawled properties **ows\_Doc\_x0020\_Type* and *ows\_\_Status** to two refinable managed properties.</span></span> <span data-ttu-id="091be-233">En nuestro entorno de prueba para este escenario, no se usan **RefinableString00** ni **RefinableString01**.</span><span class="sxs-lookup"><span data-stu-id="091be-233">In our test environment for this scenario, **RefinableString00** and **RefinableString01** aren't being used.</span></span> <span data-ttu-id="091be-234">Determinamos esto al analizar las **Propiedades administradas** en **Administrar esquema de búsqueda** en el Centro de administración de SharePoint.</span><span class="sxs-lookup"><span data-stu-id="091be-234">We determined this by looking at **Managed Properties** in **Manage Search Schema** in the SharePoint admin center.</span></span>

<span data-ttu-id="091be-235">[ ![Propiedades administradas en el esquema de búsqueda](../media/SPRetention12.png) ](../media/SPRetention12.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-235">[ ![Managed properties in search schema](../media/SPRetention12.png) ](../media/SPRetention12.png#lightbox)</span></span>

<span data-ttu-id="091be-236">Observe que la columna **Propiedades rastreadas asignadas** en la captura de pantalla anterior está vacía.</span><span class="sxs-lookup"><span data-stu-id="091be-236">Notice that the **Mapped Crawled Properties** column in the previous screenshot is empty.</span></span>

<span data-ttu-id="091be-237">Para asignar la propiedad rastreada **ows\_Doc\_x0020\_Type**, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="091be-237">To map the **ows\_Doc\_x0020\_Type** crawled property, follow these steps:</span></span>

1. <span data-ttu-id="091be-238">En el cuadro de filtro **Propiedad administrada**, escriba ***RefinableString00*** y seleccione la flecha verde.</span><span class="sxs-lookup"><span data-stu-id="091be-238">In the **Managed property** filter box, type ***RefinableString00*** and select the green arrow.</span></span>

2. <span data-ttu-id="091be-239">En la lista de resultados, seleccione el vínculo **RefinableString00** y desplácese hacia abajo hasta la sección **Asignaciones a propiedades rastreadas**.</span><span class="sxs-lookup"><span data-stu-id="091be-239">In the results list, select the **RefinableString00** link, and then scroll down to the **Mappings to crawled properties** section.</span></span>  

3. <span data-ttu-id="091be-240">Seleccione **Agregar una asignación** y escriba ***ows\_Doc\_x0020\_Type*** en el cuadro **Buscar un nombre de propiedad rastreada** en la ventana **Selección de propiedades rastreadas**.</span><span class="sxs-lookup"><span data-stu-id="091be-240">Select **Add a Mapping**, and then type ***ows\_Doc\_x0020\_Type*** in the **Search for a crawled property name** box in the **Crawled property selection** window.</span></span> <span data-ttu-id="091be-241">Seleccione **Buscar**.</span><span class="sxs-lookup"><span data-stu-id="091be-241">Select **Find**.</span></span>  

4. <span data-ttu-id="091be-242">En la lista de resultados, seleccione **ows\_Doc\_x0020\_Type** y seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="091be-242">In the results list, select **ows\_Doc\_x0020\_Type** and then select **OK**.</span></span>

   <span data-ttu-id="091be-243">En la sección **Propiedades rastreadas asignadas**, verá algo parecido a esta captura de pantalla:</span><span class="sxs-lookup"><span data-stu-id="091be-243">In the **Mapped Crawled Properties** section, you should see something similar to this screenshot:</span></span>

   <span data-ttu-id="091be-244">[ ![Seleccione Agregar una asignación en la sección Propiedades rastreadas asignadas](../media/SPRetention13.png) ](../media/SPRetention13.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-244">[ ![Select Add a mapping in the Mapped crawled properties section](../media/SPRetention13.png) ](../media/SPRetention13.png#lightbox)</span></span>


5. <span data-ttu-id="091be-245">Desplácese hasta la parte inferior de la página y seleccione **Aceptar** para guardar la asignación.</span><span class="sxs-lookup"><span data-stu-id="091be-245">Scroll to the bottom of the page and select **OK** to save the mapping.</span></span>

<span data-ttu-id="091be-246">Repita estos pasos para asignar **RefinableString01** y **ows\_\_Status**.</span><span class="sxs-lookup"><span data-stu-id="091be-246">Repeat these steps to map **RefinableString01** and **ows\_\_Status**.</span></span>

<span data-ttu-id="091be-247">Ahora debería haber dos propiedades administradas asignadas a las dos propiedades rastreadas:</span><span class="sxs-lookup"><span data-stu-id="091be-247">Now you should have two managed properties mapped to the two crawled properties:</span></span>

<span data-ttu-id="091be-248">[ ![Propiedades administradas mostradas asignadas a las propiedades rastreadas](../media/SPRetention14.png) ](../media/SPRetention14.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-248">[ ![Managed properties shown mapped to crawled properties](../media/SPRetention14.png) ](../media/SPRetention14.png#lightbox)</span></span>

<span data-ttu-id="091be-249">Comprobemos que nuestra configuración es correcta mediante la ejecución de una búsqueda empresarial.</span><span class="sxs-lookup"><span data-stu-id="091be-249">Let's verify that our setup is correct by running an enterprise search.</span></span> <span data-ttu-id="091be-250">En un explorador, vaya a *https://\<your_tenant>.sharepoint.com/search*.</span><span class="sxs-lookup"><span data-stu-id="091be-250">In a browser, go to *https://\<your_tenant>.sharepoint.com/search*.</span></span> <span data-ttu-id="091be-251">En el cuadro de búsqueda, escriba ***RefinableString00:"Especificaciones del producto"*** y presione Entrar.</span><span class="sxs-lookup"><span data-stu-id="091be-251">In the search box, type ***RefinableString00:"Product Specification"*** and press enter.</span></span> <span data-ttu-id="091be-252">Esta búsqueda debería devolver todos los documentos que tengan una **Especificación del producto** como ***Tipo de documento***.</span><span class="sxs-lookup"><span data-stu-id="091be-252">This search should return all documents that have a **Product Specification** of ***Doc Type***.</span></span>

<span data-ttu-id="091be-253">Ahora, en el cuadro de búsqueda, escriba **RefinableString00:"Especificaciones del producto" Y RefinableString01:Final** y presione Entrar.</span><span class="sxs-lookup"><span data-stu-id="091be-253">Now in the search box, type **RefinableString00:"Product Specification" AND RefinableString01:Final** and press enter.</span></span> <span data-ttu-id="091be-254">Esta acción debería devolver todos los documentos que tengan **Especificaciones del producto** como ***Tipo de documento*** y un \*\*Estado\*\*\*\*\*Final\*\*\*.</span><span class="sxs-lookup"><span data-stu-id="091be-254">This should return all documents that have **Product Specification** of ***Doc Type*** and a **Status** of ***Final***.</span></span>

### <a name="create-auto-apply-label-policies"></a><span data-ttu-id="091be-255">Crear directivas de etiqueta de aplicación automática</span><span class="sxs-lookup"><span data-stu-id="091be-255">Create auto-apply label policies</span></span>

<span data-ttu-id="091be-256">Ahora que hemos comprobado que la consulta de KQL funciona, crearemos una directiva de etiqueta aplicable automáticamente que usa una consulta de KQL para aplicar de manera automática la etiqueta de retención Especificaciones del producto en los documentos correspondientes.</span><span class="sxs-lookup"><span data-stu-id="091be-256">Now that we've verified that the KQL query is working, let's create an auto-apply label policy that uses a KQL query to automatically apply the Product Specification retention label to the appropriate documents.</span></span>

1. <span data-ttu-id="091be-257">En el [Centro de cumplimiento](https://compliance.microsoft.com/homepage), vaya a **Administración de registros** > **Directivas de etiqueta** > **Aplicar automáticamente una etiqueta**.</span><span class="sxs-lookup"><span data-stu-id="091be-257">In the [compliance center](https://compliance.microsoft.com/homepage), go to **Records management** > **Label policies** > **Auto-apply a label**.</span></span>

   <span data-ttu-id="091be-258">[ ![Seleccione "Aplicar automáticamente una etiqueta" en la página Etiquetas](../media/SPRetention16.png) ](../media/SPRetention16.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-258">[ ![Select "Auto-apply a label" on the Labels page](../media/SPRetention16.png) ](../media/SPRetention16.png#lightbox)</span></span>

2. <span data-ttu-id="091be-259">En el asistente para Crear directiva de etiquetado automático, en la página **Asignar un nombre a la directiva de etiquetado automático**, introduzca un nombre como **Aplicación automática de la etiqueta Especificación de producto** y una descripción opcional.</span><span class="sxs-lookup"><span data-stu-id="091be-259">In the Create auto-labeling policy wizard, on the **Name your auto-labeling policy** page, enter a name such as **Auto-apply Product Specification label**, and an optional description.</span></span> <span data-ttu-id="091be-260">Después, seleccione **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="091be-260">Then select **Next**.</span></span>

3. <span data-ttu-id="091be-261">En la página **Elegir el tipo de contenido al que quiere aplicar la etiqueta**, seleccione **Aplicar la etiqueta al contenido que tenga palabras, frases o propiedades específicas** y, a continuación, seleccione **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="091be-261">On the **Choose the type of content you want to apply this label to** page, select **Apply label to content that contains specific words or phrases, or properties**, and then select **Next**.</span></span>
    
   <span data-ttu-id="091be-262">[ ![Seleccione Aplicar la etiqueta al contenido que tenga palabras, frases o propiedades específicas](../media/SPRetention17.png) ](../media/SPRetention17.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-262">[ ![Select Apply label to content that contains specific words or phrases, or properties](../media/SPRetention17.png) ](../media/SPRetention17.png#lightbox)</span></span>
    
   <span data-ttu-id="091be-263">Esta opción nos permite proporcionar la misma consulta de búsqueda de KQL que probamos en la sección anterior.</span><span class="sxs-lookup"><span data-stu-id="091be-263">This option lets us provide the same KQL search query that we tested in the previous section.</span></span> <span data-ttu-id="091be-264">La consulta devuelve todos los documentos de Especificaciones del producto que tienen el estado *Final*.</span><span class="sxs-lookup"><span data-stu-id="091be-264">The query returns all Product Specification documents that have a status of *Final*.</span></span> <span data-ttu-id="091be-265">Cuando usamos esta misma consulta en la directiva de etiqueta aplicada automáticamente, la etiqueta de retención de Especificaciones del producto se aplicará de manera automática a todos los documentos que coincidan con esta consulta.</span><span class="sxs-lookup"><span data-stu-id="091be-265">When we use this same query in the auto-apply label policy, the Product Specification retention label will be automatically applied to all documents that match it.</span></span>

4. <span data-ttu-id="091be-266">En la página **Aplicar la etiqueta al contenido que coincida con esta consulta**, escriba **RefinableString00:"Especificaciones del producto" AND RefinableString01:Final** y seleccione **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="091be-266">On the **Apply label to content matching this query** page, type **RefinableString00:"Product Specification" AND RefinableString01:Final**, and then select **Next**.</span></span>

   ![Especificar la consulta en el cuadro editor de Consulta de palabras clave](../media/SPRetention19.png)

5. <span data-ttu-id="091be-268">En la página **Elegir ubicaciones para aplicar la directiva**, seleccione las ubicaciones de contenido a las que desea aplicar la directiva.</span><span class="sxs-lookup"><span data-stu-id="091be-268">On the **Choose locations to apply the policy** page, you select the content locations that you want to apply the policy to.</span></span> <span data-ttu-id="091be-269">Para este escenario, solo aplicamos la directiva a las ubicaciones de SharePoint, ya que todos los documentos de producción se almacenan en las bibliotecas de documentos de SharePoint.</span><span class="sxs-lookup"><span data-stu-id="091be-269">For this scenario, we apply the policy only to SharePoint locations, because all the production documents are stored in SharePoint document libraries.</span></span> <span data-ttu-id="091be-270">Cambiar el estado para el **Correo electrónico de Exchange**, las **cuentas de OneDrive** y los **Grupos de Office 365** a **Desactivado**.</span><span class="sxs-lookup"><span data-stu-id="091be-270">Toggle the status for **Exchange email**, **OneDrive accounts**, and **Office 365 Groups** to **Off**.</span></span> <span data-ttu-id="091be-271">Asegúrese de que el estado de los sitios de SharePoint esté **Activado** antes de seleccionar **Siguiente**:</span><span class="sxs-lookup"><span data-stu-id="091be-271">Make sure that the status for SharePoint sites is set to **On** before you select **Next**:</span></span> 
    
    ![Elegir sitios específicos a los que aplicar etiquetas automáticamente](../media/SPRetentionSPlocations.png)
    
   > [!TIP]
   > <span data-ttu-id="091be-273">En lugar de aplicar la directiva a todos los sitios de SharePoint, puede seleccionar **Elegir sitio** y agregar las direcciones URL de sitios específicos de SharePoint.</span><span class="sxs-lookup"><span data-stu-id="091be-273">Instead of applying the policy to all SharePoint sites, you can select **Choose site** and add the URLs for specific SharePoint sites.</span></span>

6. <span data-ttu-id="091be-274">En la página **Elegir una etiqueta para aplicar automáticamente**, seleccione **Añadir etiqueta**.</span><span class="sxs-lookup"><span data-stu-id="091be-274">On the **Choose a label to auto-apply** page, select **Add label**.</span></span>

7. <span data-ttu-id="091be-275">En la lista de etiquetas de retención, seleccione **Especificación de producto**.</span><span class="sxs-lookup"><span data-stu-id="091be-275">From the list of retention labels, select **Product Specification**.</span></span> <span data-ttu-id="091be-276">Después, seleccione **Agregar** y **Siguiente**.</span><span class="sxs-lookup"><span data-stu-id="091be-276">Then select **Add** and **Next**.</span></span>

8. <span data-ttu-id="091be-277">Revisar la configuración:</span><span class="sxs-lookup"><span data-stu-id="091be-277">Review your settings:</span></span>

    ![Configuración para aplicar la etiqueta automáticamente](../media/SPRetention18.png)

9. <span data-ttu-id="091be-279">Seleccione **Enviar** para crear la directiva de etiqueta aplicable automáticamente.</span><span class="sxs-lookup"><span data-stu-id="091be-279">Select **Submit** to create the auto-apply label policy.</span></span>
    
   >[!NOTE]
   ><span data-ttu-id="091be-280">Puede llevar hasta 7 días aplicar automáticamente la etiqueta de Especificaciones del producto a todos los documentos que coincidan con la consulta de búsqueda de KQL.</span><span class="sxs-lookup"><span data-stu-id="091be-280">It takes up to 7 days to automatically apply the Product Specification label to all documents that match the KQL search query.</span></span>

### <a name="verify-that-the-retention-label-was-automatically-applied"></a><span data-ttu-id="091be-281">Compruebe que la etiqueta de retención se aplicó automáticamente</span><span class="sxs-lookup"><span data-stu-id="091be-281">Verify that the retention label was automatically applied</span></span>

<span data-ttu-id="091be-282">Después de 7 días, utilice el [Explorador de actividad](data-classification-activity-explorer.md) del centro de cumplimiento para comprobar que la directiva de etiqueta aplicable automáticamente que creamos aplicó de manera automática las etiquetas de retención a los documentos de producto.</span><span class="sxs-lookup"><span data-stu-id="091be-282">After 7 days, use [activity explorer](data-classification-activity-explorer.md) in the compliance center to verify that the auto-apply label policy that we created did automatically apply the retention labels to the product documents.</span></span>

<span data-ttu-id="091be-283">También examine las propiedades de los documentos en la biblioteca de documentos.</span><span class="sxs-lookup"><span data-stu-id="091be-283">Also look at the properties of the documents in the Document Library.</span></span> <span data-ttu-id="091be-284">En el panel de información, puede ver que la etiqueta de retención se ha aplicado a un documento seleccionado.</span><span class="sxs-lookup"><span data-stu-id="091be-284">In the information panel, you can see that the retention label is applied to a selected document.</span></span>

<span data-ttu-id="091be-285">[ ![Compruebe que la etiqueta se aplicó. Para ello, observe las propiedades del documento den la Biblioteca de documentos](../media/SPRetention21.png) ](../media/SPRetention21.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-285">[ ![Verify that label was applied by looking at the document properties in the Document Library](../media/SPRetention21.png) ](../media/SPRetention21.png#lightbox)</span></span>

<span data-ttu-id="091be-286">Puesto que las etiquetas de retención se aplicaron automáticamente a los documentos, esos documentos no se pueden eliminar porque la etiqueta de retención se configuró para declarar los documentos como *registros*.</span><span class="sxs-lookup"><span data-stu-id="091be-286">Because the retention labels were auto-applied to documents, those documents are protected from deletion because the retention label was configured to declare the documents as *records*.</span></span> <span data-ttu-id="091be-287">Como ejemplo de esta protección, al intentar eliminar uno de estos documentos, obtenemos el mensaje de error siguiente:</span><span class="sxs-lookup"><span data-stu-id="091be-287">As an example of this protection, we get the following error message when we try to delete one of these documents:</span></span>

<span data-ttu-id="091be-288">[ ![Un mensaje de error indica que los documentos no se pueden eliminar porque la etiqueta declara que los documentos son registros.](../media/SPRetention22.png) ](../media/SPRetention22.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-288">[ ![An error message shows that documents can't be deleted because the label declares that the documents are records.](../media/SPRetention22.png) ](../media/SPRetention22.png#lightbox)</span></span>

## <a name="generate-the-event-that-triggers-the-retention-period"></a><span data-ttu-id="091be-289">Generar el evento que desencadena el período de retención</span><span class="sxs-lookup"><span data-stu-id="091be-289">Generate the event that triggers the retention period</span></span>

<span data-ttu-id="091be-290">Ahora que se aplicaron las etiquetas de retención, pasemos al evento que indicará el final de producción para un producto en particular.</span><span class="sxs-lookup"><span data-stu-id="091be-290">Now that the retention labels are applied, let's focus on the event that will indicate the end of production for a particular product.</span></span> <span data-ttu-id="091be-291">Este evento desencadena el inicio del período de retención definido en las etiquetas de retención.</span><span class="sxs-lookup"><span data-stu-id="091be-291">This event triggers the beginning of the retention period that's defined in the retention labels.</span></span> <span data-ttu-id="091be-292">Por ejemplo, para los documentos de especificaciones de producto, el período de retención de 5 años comienza cuando se activa el evento "fin de producción".</span><span class="sxs-lookup"><span data-stu-id="091be-292">For example, for product specification documents, the 5-year retention period begins when the "end of production" event is triggered.</span></span>

<span data-ttu-id="091be-293">Puede crear manualmente el evento en el Centro de cumplimiento de Microsoft 365 en **Administración de registros** > **Eventos**.</span><span class="sxs-lookup"><span data-stu-id="091be-293">You can manually create the event in the Microsoft 365 compliance center by going to **Records Managements** > **Events**.</span></span> <span data-ttu-id="091be-294">Elija el tipo de evento, configure los Id. de activo correctos y escriba la fecha del evento.</span><span class="sxs-lookup"><span data-stu-id="091be-294">You would choose the event type, set the correct asset IDs, and enter a date for the event.</span></span> <span data-ttu-id="091be-295">Para obtener más información, consulte [Iniciar la retención cuando se produzca un evento](event-driven-retention.md).</span><span class="sxs-lookup"><span data-stu-id="091be-295">For more information, see [Start retention when an event occurs](event-driven-retention.md).</span></span>

<span data-ttu-id="091be-296">Pero para este escenario, generaremos automáticamente el evento desde un sistema de producción externo.</span><span class="sxs-lookup"><span data-stu-id="091be-296">But for this scenario, we'll automatically generate the event from an external production system.</span></span> <span data-ttu-id="091be-297">El sistema es una lista de SharePoint simple que indica si un producto está en producción.</span><span class="sxs-lookup"><span data-stu-id="091be-297">The system is a simple SharePoint list that indicates whether a product is in production.</span></span> <span data-ttu-id="091be-298">Un flujo de [Power Automate](https://docs.microsoft.com/flow/getting-started) que está asociado a la lista desencadenará el evento.</span><span class="sxs-lookup"><span data-stu-id="091be-298">A [Power Automate](https://docs.microsoft.com/flow/getting-started) flow that's associated with the list will trigger the event.</span></span> <span data-ttu-id="091be-299">En un escenario real, puede usar varios sistemas para generar el evento, como un sistema de RRHH o CRM.</span><span class="sxs-lookup"><span data-stu-id="091be-299">In a real-world scenario, you could use various systems to generate the event, such as an HR or CRM system.</span></span> <span data-ttu-id="091be-300">Power Automate contiene muchas interacciones listas para usarse y un bloque de creación para cargas de trabajo de Microsoft 365 como Microsoft Exchange, SharePoint, Teams y Dynamics 365, así como para aplicaciones de terceros como Twitter, Box, Salesforce y Workdays.</span><span class="sxs-lookup"><span data-stu-id="091be-300">Power Automate contains many ready-to-use interactions and building block for Microsoft 365 workloads, such as Microsoft Exchange, SharePoint, Teams, and Dynamics 365, plus third-party apps such as Twitter, Box, Salesforce, and Workdays.</span></span> <span data-ttu-id="091be-301">Esta característica hace que sea fácil integrar Power Automate con varios sistemas.</span><span class="sxs-lookup"><span data-stu-id="091be-301">This feature makes it easy to integrate Power Automate with various systems.</span></span> <span data-ttu-id="091be-302">Para obtener más información, consulte [Retención automática controlada por eventos](automate-event-driven-retention.md).</span><span class="sxs-lookup"><span data-stu-id="091be-302">For more information, see [Automate event-driven retention](automate-event-driven-retention.md).</span></span>

<span data-ttu-id="091be-303">La siguiente captura de pantalla muestra la lista de SharePoint que se usará para desencadenar el evento:</span><span class="sxs-lookup"><span data-stu-id="091be-303">The following screenshot shows the SharePoint list that will be used the trigger the event:</span></span>

<span data-ttu-id="091be-304">[ ![La lista que desencadenará el evento de retención](../media/SPRetention23.png) ](../media/SPRetention23.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-304">[ ![The list that will trigger the retention event](../media/SPRetention23.png) ](../media/SPRetention23.png#lightbox)</span></span>

<span data-ttu-id="091be-305">Hay dos productos actualmente en producción, como indica el valor ***Sí*** en la columna **En producción**.</span><span class="sxs-lookup"><span data-stu-id="091be-305">There are two products currently in production, as indicated by the ***Yes*** in the **In Production** column.</span></span> <span data-ttu-id="091be-306">Cuando el valor de esta columna se establezca en ***No*** para un producto, el flujo asociado con la lista generará automáticamente el evento.</span><span class="sxs-lookup"><span data-stu-id="091be-306">When the value in this column is set to ***No*** for a product, the flow associated with the list will automatically generate the event.</span></span> <span data-ttu-id="091be-307">El evento desencadena el inicio del periodo de retención de la etiqueta de retención que se aplicó automáticamente a los documentos de producto correspondientes.</span><span class="sxs-lookup"><span data-stu-id="091be-307">The event triggers the start of the retention period for the retention label that was auto-applied to the corresponding product documents.</span></span>

<span data-ttu-id="091be-308">En este escenario, usamos el flujo siguiente para desencadenar el evento:</span><span class="sxs-lookup"><span data-stu-id="091be-308">For this scenario, we use the following flow to trigger the event:</span></span>

<span data-ttu-id="091be-309">[ ![Configurando el flujo que desencadenará el evento](../media/SPRetention24.png) ](../media/SPRetention24.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-309">[ ![Configuring the flow that will trigger the event](../media/SPRetention24.png) ](../media/SPRetention24.png#lightbox)</span></span>

<span data-ttu-id="091be-310">Para crear este flujo, parta de un conector de SharePoint y seleccione el desencadenador **Cuando se crea o modifica un elemento**.</span><span class="sxs-lookup"><span data-stu-id="091be-310">To create this flow, start from a SharePoint connector and select the **When an item is created or modified** trigger.</span></span> <span data-ttu-id="091be-311">Especifique la dirección del sitio y el nombre de la lista.</span><span class="sxs-lookup"><span data-stu-id="091be-311">Specify the site address and list name.</span></span> <span data-ttu-id="091be-312">Luego agregue una condición basada en que el valor de la columna de lista **En producción** se establezca en ***No*** (o que sea igual a *falso* en la tarjeta condicional).</span><span class="sxs-lookup"><span data-stu-id="091be-312">Then add a condition based on when the **In Production** list column value is set to ***No*** (or equal to *false* on the condition card).</span></span> <span data-ttu-id="091be-313">Después, agregue una acción basada en la plantilla HTTP integrada.</span><span class="sxs-lookup"><span data-stu-id="091be-313">Then add an action based on the built-in HTTP template.</span></span> <span data-ttu-id="091be-314">Use los valores de la sección siguiente para configurar la acción HTTP.</span><span class="sxs-lookup"><span data-stu-id="091be-314">Use the values in the following section to configure the HTTP action.</span></span> <span data-ttu-id="091be-315">Puede copiar los valores de las propiedades **URI** y **Body** de la sección siguiente y pegarlos en la plantilla.</span><span class="sxs-lookup"><span data-stu-id="091be-315">You can copy the values for the **URI** and **Body** properties from the following section and paste them into the template.</span></span>

- <span data-ttu-id="091be-316">**Método**: POST</span><span class="sxs-lookup"><span data-stu-id="091be-316">**Method**: POST</span></span>
- <span data-ttu-id="091be-317">**URI**: `https://ps.compliance.protection.outlook.com/psws/service.svc/ComplianceRetentionEvent`</span><span class="sxs-lookup"><span data-stu-id="091be-317">**URI**: `https://ps.compliance.protection.outlook.com/psws/service.svc/ComplianceRetentionEvent`</span></span>
- <span data-ttu-id="091be-318">**Headers**: Key = Content-Type, Value = application/atom+xml</span><span class="sxs-lookup"><span data-stu-id="091be-318">**Headers**: Key = Content-Type, Value = application/atom+xml</span></span>
- <span data-ttu-id="091be-319">**Body**:</span><span class="sxs-lookup"><span data-stu-id="091be-319">**Body**:</span></span>
    
    ```xml
    <?xml version='1.0' encoding='utf-8' standalone='yes'>
    <entry xmlns:d='http://schemas.microsoft.com/ado/2007/08/dataservices' xmlns:m='http://schemas.microsoft.com/ado/2007/08/dataservices/metadata' xmlns='https://www.w3.org/2005/Atom'>
    <category scheme='http://schemas.microsoft.com/ado/2007/08/dataservices/scheme' term='Exchange.ComplianceRetentionEvent'>
    <updated>9/9/2017 10:50:00 PM</updated>
    <content type='application/xml'>
    <m:properties>
    <d:Name>Cessation Production @{triggerBody()?['Product_x0020_Name']?['Value']}</d:Name>
    <d:EventType>Product Cessation&lt;</d:EventType>
    <d:SharePointAssetIdQuery>ProductName:&quot;@{triggerBody()?['Product_x0020_Name']?['Value']}<d:SharePointAssetIdQuery>
    <d:EventDateTime>@{formatDateTime(utcNow(),'yyyy-MM-dd')}</d:EventDateTime>
    </m:properties>
    </content&gt>
    </entry>
    ```

<span data-ttu-id="091be-320">Esta lista describe los parámetros de la propiedad **Body** de la acción que debe configurarse para este escenario:</span><span class="sxs-lookup"><span data-stu-id="091be-320">This list describes the parameters in the **Body** property of the action that must be configured for this scenario:</span></span>

- <span data-ttu-id="091be-321">**Name**: este parámetro especifica el nombre del evento que se creará en el Centro de cumplimiento de Microsoft 365.</span><span class="sxs-lookup"><span data-stu-id="091be-321">**Name**: This parameter specifies the name of the event that will be created in the Microsoft 365 compliance center.</span></span> <span data-ttu-id="091be-322">Para este escenario, el nombre es "Cese de producción *xxx*", donde *xxx* es el valor de la propiedad administrada **NombreProducto** que creamos anteriormente.</span><span class="sxs-lookup"><span data-stu-id="091be-322">For this scenario, the name is "Cessation Production *xxx*", where *xxx* is the value of the **ProductName** managed property that we created earlier.</span></span>
- <span data-ttu-id="091be-323">**EventType**: el valor de este parámetro corresponde al tipo de evento al que se aplicará el evento creado.</span><span class="sxs-lookup"><span data-stu-id="091be-323">**EventType**: The value for this parameter corresponds to the event type that the created event will apply to.</span></span> <span data-ttu-id="091be-324">Este tipo de evento se definió al crear la etiqueta de retención.</span><span class="sxs-lookup"><span data-stu-id="091be-324">This event type was defined when you created the retention label.</span></span> <span data-ttu-id="091be-325">Para este escenario, el tipo de evento es "Cese de producción".</span><span class="sxs-lookup"><span data-stu-id="091be-325">For this scenario, the event type is "Product Cessation."</span></span>
- <span data-ttu-id="091be-326">**SharePointAssetIdQuery**: este parámetro define el Id. de activo del evento.</span><span class="sxs-lookup"><span data-stu-id="091be-326">**SharePointAssetIdQuery**: This parameter defines the asset ID for the event.</span></span> <span data-ttu-id="091be-327">La retención basada en eventos necesita un identificador único para el documento.</span><span class="sxs-lookup"><span data-stu-id="091be-327">Event-based retention needs a unique identifier for the document.</span></span> <span data-ttu-id="091be-328">Podemos usar Id. de activo para identificar los documentos a los que se aplica un evento determinado, o bien, como se hace para este escenario, la columna de metadatos **NombreProducto**.</span><span class="sxs-lookup"><span data-stu-id="091be-328">We can use asset IDs to identify the documents that a particular event applies to or, as in this scenario, the metadata column **Product Name**.</span></span> <span data-ttu-id="091be-329">Para ello, debemos crear una propiedad administrada **NombreProducto** nueva que pueda usarse en la consulta KQL.</span><span class="sxs-lookup"><span data-stu-id="091be-329">To do  this, we need to create a new **ProductName** managed property that can be used in the KQL query.</span></span> <span data-ttu-id="091be-330">(También podríamos usar **RefinableString00** en lugar de crear una nueva propiedad administrada).</span><span class="sxs-lookup"><span data-stu-id="091be-330">(Alternatively, we could use **RefinableString00** instead of creating a new managed property).</span></span> <span data-ttu-id="091be-331">También necesitamos asignar esta nueva propiedad administrada a la propiedad rastreada **ows_Product_x0020_Name**.</span><span class="sxs-lookup"><span data-stu-id="091be-331">We also need to map this new managed property to the **ows_Product_x0020_Name** crawled property.</span></span> <span data-ttu-id="091be-332">Esta es una captura de pantalla de esta propiedad administrada.</span><span class="sxs-lookup"><span data-stu-id="091be-332">Here's a screenshot of this managed property.</span></span>

    <span data-ttu-id="091be-333">[ ![Propiedad administrada de retención](../media/SPRetention25.png) ](../media/SPRetention25.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-333">[ ![Rentention managed property](../media/SPRetention25.png) ](../media/SPRetention25.png#lightbox)</span></span>

- <span data-ttu-id="091be-334">**EventDateTime**: este parámetro define la fecha en la que se produce el evento.</span><span class="sxs-lookup"><span data-stu-id="091be-334">**EventDateTime**: This parameter defines the date that the event occurs.</span></span> <span data-ttu-id="091be-335">Usar el formato de fecha actual:</span><span class="sxs-lookup"><span data-stu-id="091be-335">Use the current date format:</span></span><br/><br/><span data-ttu-id="091be-336">*formatDateTime(utcNow(),'aaaa-MM-dd'*)</span><span class="sxs-lookup"><span data-stu-id="091be-336">*formatDateTime(utcNow(),'yyyy-MM-dd'*)</span></span>

### <a name="putting-it-all-together"></a><span data-ttu-id="091be-337">En conclusión</span><span class="sxs-lookup"><span data-stu-id="091be-337">Putting it all together</span></span>

<span data-ttu-id="091be-338">Ahora la etiqueta de retención se crea y se aplica automáticamente, y el flujo se configura y crea.</span><span class="sxs-lookup"><span data-stu-id="091be-338">Now the retention label is created and auto-applied, and the flow is configured and created.</span></span> <span data-ttu-id="091be-339">Cuando el valor de la columna **En producción** del producto Spinning Widget en la lista de productos se cambia de ***Sí*** a ***No***, el flujo se activa para crear el evento.</span><span class="sxs-lookup"><span data-stu-id="091be-339">When the value in the **In Production** column for the Spinning Widget product in the Products list is changed from ***Yes*** to ***No***, the flow is triggered to create the event.</span></span> <span data-ttu-id="091be-340">Para ver este evento en el centro de cumplimiento, vaya a **Administración de registros** > **Eventos**.</span><span class="sxs-lookup"><span data-stu-id="091be-340">To see this event in the compliance center, go to **Records management** > **Events**.</span></span>

<span data-ttu-id="091be-341">[ ![El evento desencadenado por el flujo se muestra en la página Eventos en el centro de cumplimiento.](../media/SPRetention28.png) ](../media/SPRetention28.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-341">[ ![The event that was triggered by the flow is displayed on the Events page in the compliance center.](../media/SPRetention28.png) ](../media/SPRetention28.png#lightbox)</span></span>

<span data-ttu-id="091be-342">Seleccione el evento para ver los detalles en la página de control flotante.</span><span class="sxs-lookup"><span data-stu-id="091be-342">Select the event to view the details on the flyout page.</span></span> <span data-ttu-id="091be-343">Observe que, aunque se creó el evento, el estado del evento muestra que no se han procesado documentos o sitios de SharePoint.</span><span class="sxs-lookup"><span data-stu-id="091be-343">Notice that even though the event is created, the event status shows that no SharePoint sites or documents have been processed.</span></span>

![Detalles del evento](../media/SPRetention29.png)

<span data-ttu-id="091be-345">Pero luego de un retraso, el estado del evento muestra que se han procesado un sitio de SharePoint y un documento de SharePoint.</span><span class="sxs-lookup"><span data-stu-id="091be-345">But after a delay, the event status shows that a SharePoint site and a SharePoint document have been processed.</span></span>  

![Los detalles del evento muestran que los documentos se procesaron.](../media/SPRetention31.png)
 
<span data-ttu-id="091be-347">Esto muestra que se ha iniciado el período de retención de la etiqueta aplicada al documento de producto de Spinning Widget, en base a la fecha del evento *Cese de producción de Spinning Widget*.</span><span class="sxs-lookup"><span data-stu-id="091be-347">This shows that the retention period for the label applied to the Spinning Widget product document has been initiated, based on the event date of the *Cessation Production Spinning Widget* event.</span></span> <span data-ttu-id="091be-348">Suponiendo que ha implementado el escenario en el entorno de prueba configurando un período de retención de un día, puede ir a la biblioteca de documentos de los documentos de su producto unos días después de crear el evento y comprobar que el documento se haya eliminado (después de que se haya ejecutado la eliminación de la tarea en SharePoint).</span><span class="sxs-lookup"><span data-stu-id="091be-348">Assuming that you implemented the scenario in your test environment by configuring a one-day retention period, you can go to the document library for your product documents a few days after the event was created and verify that the document was deleted (after the deletion job in SharePoint has run).</span></span>

### <a name="more-about-asset-ids"></a><span data-ttu-id="091be-349">Más información sobre los Id. de activo</span><span class="sxs-lookup"><span data-stu-id="091be-349">More about asset IDs</span></span>

<span data-ttu-id="091be-350">Como se explica en el artículo [Iniciar la retención cuando se produzca un evento](event-driven-retention.md), es importante entender la relación entre los tipos de eventos, las etiquetas de retención, los eventos y los id. de activo.</span><span class="sxs-lookup"><span data-stu-id="091be-350">As the [Start retention when an event occurs](event-driven-retention.md) article explains, it's important to understand the relationship between event types, retention labels, events, and asset IDs.</span></span> <span data-ttu-id="091be-351">El Id. de activo es simplemente una propiedad del documento en SharePoint y OneDrive.</span><span class="sxs-lookup"><span data-stu-id="091be-351">The asset ID is simply a document property in SharePoint and OneDrive.</span></span> <span data-ttu-id="091be-352">Le ayuda a identificar los documentos cuyo período de retención se desencadenará con el evento.</span><span class="sxs-lookup"><span data-stu-id="091be-352">It helps you identify the documents whose retention period will be triggered by the event.</span></span> <span data-ttu-id="091be-353">De forma predeterminada, SharePoint tiene una propiedad **Id. de activo** que puede usar para la retención controlada por eventos:</span><span class="sxs-lookup"><span data-stu-id="091be-353">By default, SharePoint has an **Asset Id** property that you can use for event-driven retention:</span></span>

![La propiedad Id. de activo se muestra en la página de detalles de las propiedades del documento](../media/SPRetention26.png)

<span data-ttu-id="091be-355">Como se muestra en la siguiente captura de pantalla, la propiedad administrada Id. de activo se denomina **ComplianceAssetId**.</span><span class="sxs-lookup"><span data-stu-id="091be-355">As the following screenshot shows, the asset ID managed property is called **ComplianceAssetId**.</span></span>

<span data-ttu-id="091be-356">[ ![Propiedad administrada ComplianceAssetId](../media/SPRetention27.png) ](../media/SPRetention27.png#lightbox)</span><span class="sxs-lookup"><span data-stu-id="091be-356">[ ![ComplianceAssetId managed property](../media/SPRetention27.png) ](../media/SPRetention27.png#lightbox)</span></span>

<span data-ttu-id="091be-357">En lugar de usar la propiedad **Id. de activo** predeterminada, como hacemos en este escenario, puede usar cualquier otra propiedad.</span><span class="sxs-lookup"><span data-stu-id="091be-357">Instead of using the default **Asset Id** property as we do in this scenario, you can use any other property.</span></span> <span data-ttu-id="091be-358">Pero es importante comprender que, si no especifica palabras clave o un Id. de activo para un evento, el evento desencadenará el período de retención de todo el contenido que tenga aplicada una etiqueta de ese tipo de evento.</span><span class="sxs-lookup"><span data-stu-id="091be-358">But it's important to understand that if you don't specify an asset ID or keywords for an event, all the content that has a label of that event type will get its retention period triggered by the event.</span></span>

### <a name="using-advanced-search-in-sharepoint"></a><span data-ttu-id="091be-359">Uso de la búsqueda avanzada en SharePoint</span><span class="sxs-lookup"><span data-stu-id="091be-359">Using advanced search in SharePoint</span></span>

<span data-ttu-id="091be-360">En la captura de pantalla anterior, puede ver que existe otra propiedad administrada relacionada con las etiquetas de retención denominada **ComplianceTag**, que se asigna a una propiedad rastreada.</span><span class="sxs-lookup"><span data-stu-id="091be-360">In the previous screenshot, you can see that there's another managed property related to retention labels called **ComplianceTag** that's mapped to a crawled property.</span></span> <span data-ttu-id="091be-361">La propiedad administrada **ComplianceAssetId** también se asigna a una propiedad rastreada.</span><span class="sxs-lookup"><span data-stu-id="091be-361">The **ComplianceAssetId** managed property is also mapped to a crawled property.</span></span> <span data-ttu-id="091be-362">Esto significa que puede usar estas propiedades administradas en la búsqueda avanzada para recuperar todos los documentos que se han etiquetado con una etiqueta de retención.</span><span class="sxs-lookup"><span data-stu-id="091be-362">This means that you can use these managed properties in advanced search to retrieve all documents that have been tagged with a retention label.</span></span>
