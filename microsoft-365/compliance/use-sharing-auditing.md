---
title: Usar el uso compartido de auditoría en el registro de auditoría
f1.keywords:
- NOCSH
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: ''
audience: Admin
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- SPO160
- MOE150
- BCS160
- MET150
ms.collection:
- M365-security-compliance
- SPO_Content
ms.assetid: 50bbf89f-7870-4c2a-ae14-42635e0cfc01
description: El administrador puede aprender a usar la auditoría de uso compartido en el registro de auditoría Microsoft 365 para identificar los recursos compartidos con usuarios fuera de su organización.
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: d26a8022f8d59aeb56a03c50ae546777c882ef7a
ms.sourcegitcommit: 973f5449784cb70ce5545bc3cf57bf1ce5209218
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 06/19/2020
ms.locfileid: "44819300"
---
# <a name="use-sharing-auditing-in-the-audit-log"></a><span data-ttu-id="065d7-103">Usar el uso compartido de auditoría en el registro de auditoría</span><span class="sxs-lookup"><span data-stu-id="065d7-103">Use sharing auditing in the audit log</span></span>

<span data-ttu-id="065d7-104">El uso compartido es una actividad clave en SharePoint Online y OneDrive para la Empresa, y se usa ampliamente en organizaciones.</span><span class="sxs-lookup"><span data-stu-id="065d7-104">Sharing is a key activity in SharePoint Online and OneDrive for Business, and it's widely used in organizations.</span></span> <span data-ttu-id="065d7-105">Los administradores pueden usar la auditoría de uso compartido en el registro de auditoría para determinar cómo se usa el uso compartido en su organización.</span><span class="sxs-lookup"><span data-stu-id="065d7-105">Administrators can use sharing auditing in the audit log to determine how sharing is used in their organization.</span></span> 
  
## <a name="the-sharepoint-sharing-schema"></a><span data-ttu-id="065d7-106">Esquema SharePoint uso compartido</span><span class="sxs-lookup"><span data-stu-id="065d7-106">The SharePoint Sharing schema</span></span>

<span data-ttu-id="065d7-107">Los eventos de uso compartido (sin incluir eventos relacionados con la directiva de uso compartido y los vínculos de uso compartido) son diferentes de los eventos relacionados con archivos y carpetas de una forma principal: un usuario realiza una acción que tiene un efecto en otro usuario.</span><span class="sxs-lookup"><span data-stu-id="065d7-107">Sharing events (not including events related to sharing policy and sharing links) are different from file- and folder-related events in one primary way: one user is performing an action that has an effect on another user.</span></span> <span data-ttu-id="065d7-108">Por ejemplo, cuando un usuario A de un recurso proporciona al usuario B acceso a un archivo.</span><span class="sxs-lookup"><span data-stu-id="065d7-108">For example, when a resource User A gives User B access to a file.</span></span> <span data-ttu-id="065d7-109">En este ejemplo, el usuario A es el  *usuario que*  actúa y el usuario B es el usuario  *de destino*.</span><span class="sxs-lookup"><span data-stu-id="065d7-109">In this example, User A is the  *acting user*  and User B is the  *target user*.</span></span> <span data-ttu-id="065d7-110">En el esquema SharePoint archivo, la acción del usuario que actúa solo afecta al propio archivo.</span><span class="sxs-lookup"><span data-stu-id="065d7-110">In the SharePoint File schema, the acting user's action only affects the file itself.</span></span> <span data-ttu-id="065d7-111">Cuando el usuario A abre un archivo, la única información necesaria en el **evento FileAccessed** es el usuario que actúa.</span><span class="sxs-lookup"><span data-stu-id="065d7-111">When User A opens a file, the only information needed in the **FileAccessed** event is the acting user.</span></span> <span data-ttu-id="065d7-112">Para solucionar esta diferencia, hay un esquema independiente, denominado *esquema de uso* compartido SharePoint , que captura más información acerca de los eventos de uso compartido.</span><span class="sxs-lookup"><span data-stu-id="065d7-112">To address this difference, there is a separate schema, called the  *SharePoint Sharing schema*, that captures more information about sharing events.</span></span> <span data-ttu-id="065d7-113">Esto garantiza que los administradores tengan visibilidad sobre quién compartió un recurso y el usuario con el que se compartió el recurso.</span><span class="sxs-lookup"><span data-stu-id="065d7-113">This ensures that administrators have visibility into who shared a resource and the user the resource was shared with.</span></span> 
  
<span data-ttu-id="065d7-114">El esquema de uso compartido proporciona dos campos adicionales en un registro de auditoría relacionado con eventos de uso compartido:</span><span class="sxs-lookup"><span data-stu-id="065d7-114">The Sharing schema provides two additional fields in an audit record related to sharing events:</span></span> 
  
- <span data-ttu-id="065d7-115">**TargetUserOrGroupType:** Identifica si el usuario o grupo de destino es miembro, invitado, SharePointGroup, SecurityGroup o partner.</span><span class="sxs-lookup"><span data-stu-id="065d7-115">**TargetUserOrGroupType:** Identifies whether the target user or group is a Member, Guest, SharePointGroup, SecurityGroup, or Partner.</span></span>

- <span data-ttu-id="065d7-116">**TargetUserOrGroupName:** Almacena el UPN o el nombre del usuario o grupo de destino con el que se compartió un recurso (usuario B en el ejemplo anterior).</span><span class="sxs-lookup"><span data-stu-id="065d7-116">**TargetUserOrGroupName:** Stores the UPN or name of the target user or group that a resource was shared with (User B in the previous example).</span></span> 

<span data-ttu-id="065d7-117">Estos dos campos, además de otras propiedades del esquema del registro de auditoría, como  User,  Operation y Date, pueden contar la historia completa sobre qué usuario compartió qué recurso con quién y *cuándo*. </span><span class="sxs-lookup"><span data-stu-id="065d7-117">These two fields, in addition to other properties from the audit log schema such as User, Operation, and Date can tell the full story about  *which*  user shared  *what*  resource with  *whom*  and  *when*.</span></span> 
  
<span data-ttu-id="065d7-118">Hay otra propiedad de esquema que es importante para el artículo de uso compartido.</span><span class="sxs-lookup"><span data-stu-id="065d7-118">There's another schema property that's important to the sharing story.</span></span> <span data-ttu-id="065d7-119">Al exportar los resultados de la búsqueda del registro de auditoría, la columna **AuditData** del archivo CSV exportado almacena información sobre el uso compartido de eventos.</span><span class="sxs-lookup"><span data-stu-id="065d7-119">When you export audit log search results, the **AuditData** column in the exported CSV file stores information about sharing events.</span></span> <span data-ttu-id="065d7-120">Por ejemplo, cuando un usuario comparte un sitio con otro usuario, esto se logra agregando el usuario de destino a un grupo SharePoint usuario.</span><span class="sxs-lookup"><span data-stu-id="065d7-120">For example, when a user shares a site with another user, this is accomplished by adding the target user to a SharePoint group.</span></span> <span data-ttu-id="065d7-121">La **columna AuditData** captura esta información para proporcionar contexto a los administradores.</span><span class="sxs-lookup"><span data-stu-id="065d7-121">The **AuditData** column captures this information to provide context for administrators.</span></span> <span data-ttu-id="065d7-122">Vea [el paso 2](#step-2-use-the-powerquery-editor-to-format-the-exported-audit-log) para obtener instrucciones sobre cómo analizar la información en la **columna AuditData.**</span><span class="sxs-lookup"><span data-stu-id="065d7-122">See [Step 2](#step-2-use-the-powerquery-editor-to-format-the-exported-audit-log) for instructions on how to parse the information in the **AuditData** column.</span></span>

## <a name="sharepoint-sharing-events"></a><span data-ttu-id="065d7-123">SharePoint eventos de uso compartido</span><span class="sxs-lookup"><span data-stu-id="065d7-123">SharePoint sharing events</span></span>

<span data-ttu-id="065d7-124">El uso compartido se define  cuando un usuario (el usuario que actúa) desea compartir un recurso con otro usuario (el *usuario de* destino).</span><span class="sxs-lookup"><span data-stu-id="065d7-124">Sharing is defined by when a user (the *acting* user) wants to share a resource with another user (the *target* user).</span></span> <span data-ttu-id="065d7-125">Los registros de auditoría relacionados con el uso compartido de un recurso con un usuario externo (un usuario que está fuera de la organización y no tiene una cuenta de invitado en el Azure Active Directory de la organización) se identifican mediante los siguientes eventos, que se registran en el registro de auditoría:</span><span class="sxs-lookup"><span data-stu-id="065d7-125">Audit records related to sharing a resource with an external user (a user who is outside of your organization and doesn't have a guest account in your organization's Azure Active Directory) are identified by the following events, which are logged in the audit log:</span></span>

- <span data-ttu-id="065d7-126">**SharingInvitationCreated:** Un usuario de la organización intentó compartir un recurso (probablemente un sitio) con un usuario externo.</span><span class="sxs-lookup"><span data-stu-id="065d7-126">**SharingInvitationCreated:** A user in your organization tried to share a resource (likely a site) with an external user.</span></span> <span data-ttu-id="065d7-127">Esto da como resultado una invitación de uso compartido externo enviada al usuario de destino.</span><span class="sxs-lookup"><span data-stu-id="065d7-127">This results in an external sharing invitation sent to the target user.</span></span> <span data-ttu-id="065d7-128">No se concede acceso al recurso en este momento.</span><span class="sxs-lookup"><span data-stu-id="065d7-128">No access to the resource is granted at this point.</span></span>

- <span data-ttu-id="065d7-129">**SharingInvitationAccepted:** El usuario externo ha aceptado la invitación de uso compartido enviada por el usuario que actúa y ahora tiene acceso al recurso.</span><span class="sxs-lookup"><span data-stu-id="065d7-129">**SharingInvitationAccepted:** The external user has accepted the sharing invitation sent by the acting user and now has access to the resource.</span></span>

- <span data-ttu-id="065d7-130">**AnonymousLinkCreated:** Se crea un vínculo anónimo (también denominado vínculo "Cualquiera") para un recurso.</span><span class="sxs-lookup"><span data-stu-id="065d7-130">**AnonymousLinkCreated:** An anonymous link (also called an "Anyone" link) is created for a resource.</span></span> <span data-ttu-id="065d7-131">Dado que se puede crear y copiar un vínculo anónimo, es razonable suponer que cualquier documento que tenga un vínculo anónimo se ha compartido con un usuario de destino.</span><span class="sxs-lookup"><span data-stu-id="065d7-131">Because an anonymous link can be created and then copied, it's reasonable to assume that any document that has an anonymous link has been shared with a target user.</span></span>

- <span data-ttu-id="065d7-132">**AnonymousLinkUsed:** Como su nombre indica, este evento se registra cuando se usa un vínculo anónimo para obtener acceso a un recurso.</span><span class="sxs-lookup"><span data-stu-id="065d7-132">**AnonymousLinkUsed:** As the name implies, this event is logged when an anonymous link is used to access a resource.</span></span> 

- <span data-ttu-id="065d7-133">**SecureLinkCreated:** Un usuario ha creado un "vínculo de personas específicas" para compartir un recurso con una persona específica.</span><span class="sxs-lookup"><span data-stu-id="065d7-133">**SecureLinkCreated:** A user has created a "specific people link" to share a resource with a specific person.</span></span> <span data-ttu-id="065d7-134">Este usuario de destino puede ser alguien externo a su organización.</span><span class="sxs-lookup"><span data-stu-id="065d7-134">This target user may be someone who is external to your organization.</span></span> <span data-ttu-id="065d7-135">La persona con la que se comparte el recurso se identifica en el registro de auditoría del **evento AddedToSecureLink.**</span><span class="sxs-lookup"><span data-stu-id="065d7-135">The person that the resource is shared with is identified in the audit record for the **AddedToSecureLink** event.</span></span> <span data-ttu-id="065d7-136">Las marcas de tiempo de estos dos eventos son casi idénticas.</span><span class="sxs-lookup"><span data-stu-id="065d7-136">The time stamps for these two events are nearly identical.</span></span>

- <span data-ttu-id="065d7-137">**AddedToSecureLink:** Se agregó un usuario a un vínculo de personas específico.</span><span class="sxs-lookup"><span data-stu-id="065d7-137">**AddedToSecureLink:** A user was added to a specific people link.</span></span> <span data-ttu-id="065d7-138">Use el **campo TargetUserOrGroupName** en este evento para identificar el usuario agregado al vínculo de personas específico correspondiente.</span><span class="sxs-lookup"><span data-stu-id="065d7-138">Use the **TargetUserOrGroupName** field in this event to identify the user added to the corresponding specific people link.</span></span> <span data-ttu-id="065d7-139">Este usuario de destino puede ser alguien externo a su organización.</span><span class="sxs-lookup"><span data-stu-id="065d7-139">This target user may be someone who is external to your organization.</span></span>

## <a name="sharing-auditing-work-flow"></a><span data-ttu-id="065d7-140">Compartir flujo de trabajo de auditoría</span><span class="sxs-lookup"><span data-stu-id="065d7-140">Sharing auditing work flow</span></span>
  
<span data-ttu-id="065d7-141">Cuando un usuario (el usuario que actúa) desea compartir un recurso con otro usuario (el usuario de destino), SharePoint (o OneDrive para la Empresa) primero comprueba si la dirección de correo electrónico del usuario de destino ya está asociada a una cuenta de usuario en el directorio de la organización.</span><span class="sxs-lookup"><span data-stu-id="065d7-141">When a user (the acting user) wants to share a resource with another user (the target user), SharePoint (or OneDrive for Business) first checks if the email address of the target user is already associated with a user account in the organization's directory.</span></span> <span data-ttu-id="065d7-142">Si el usuario de destino está en el directorio (y tiene una cuenta de usuario invitada correspondiente), SharePoint lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="065d7-142">If the target user is in the directory (and has a corresponding guest user account), SharePoint does the following things:</span></span>
  
-  <span data-ttu-id="065d7-143">Asigna inmediatamente los permisos de usuario de destino para tener acceso al recurso agregando el usuario de destino al grupo de SharePoint adecuado y registra un **evento AddedToGroup.**</span><span class="sxs-lookup"><span data-stu-id="065d7-143">Immediately assigns the target user permissions to access the resource by adding the target user to the appropriate SharePoint group, and logs an **AddedToGroup** event.</span></span> 
    
- <span data-ttu-id="065d7-144">Envía una notificación de uso compartido a la dirección de correo electrónico del usuario de destino.</span><span class="sxs-lookup"><span data-stu-id="065d7-144">Sends a sharing notification to the email address of the target user.</span></span>
    
- <span data-ttu-id="065d7-145">Registra un **evento SharingSet.**</span><span class="sxs-lookup"><span data-stu-id="065d7-145">Logs a **SharingSet** event.</span></span> <span data-ttu-id="065d7-146">Este evento tiene un nombre descriptivo de "Archivo compartido, carpeta o sitio" en **Actividades** de solicitud de uso compartido y acceso en el selector de actividades de la herramienta de búsqueda de registro de auditoría.</span><span class="sxs-lookup"><span data-stu-id="065d7-146">This event has a friendly name of "Shared file, folder, or site" under **Sharing and access request activities** in the activities picker of the audit log search tool.</span></span> <span data-ttu-id="065d7-147">Consulta la captura de pantalla [en el paso 1](#step-1-search-for-sharing-events-and-export-the-results-to-a-csv-file).</span><span class="sxs-lookup"><span data-stu-id="065d7-147">See the screenshot in [Step 1](#step-1-search-for-sharing-events-and-export-the-results-to-a-csv-file).</span></span> 
    
<span data-ttu-id="065d7-148">Si una cuenta de usuario para el usuario de destino no está en el directorio, SharePoint hace lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="065d7-148">If a user account for the target user isn't in the directory, SharePoint does the following:</span></span> 
    
   - <span data-ttu-id="065d7-149">Registra uno de los siguientes eventos en función de cómo se comparte el recurso:</span><span class="sxs-lookup"><span data-stu-id="065d7-149">Logs one of the following events, based on how the resource is shared:</span></span>
   
      - <span data-ttu-id="065d7-150">**AnonymousLinkCreated**</span><span class="sxs-lookup"><span data-stu-id="065d7-150">**AnonymousLinkCreated**</span></span>
   
      - <span data-ttu-id="065d7-151">**SecureLinkCreated**</span><span class="sxs-lookup"><span data-stu-id="065d7-151">**SecureLinkCreated**</span></span>
   
      - <span data-ttu-id="065d7-152">**AddedToSecureLink**</span><span class="sxs-lookup"><span data-stu-id="065d7-152">**AddedToSecureLink**</span></span> 

      - <span data-ttu-id="065d7-153">**SharingInvitationCreated** (este evento se registra solo cuando el recurso compartido es un sitio)</span><span class="sxs-lookup"><span data-stu-id="065d7-153">**SharingInvitationCreated** (this event is logged only when the shared resource is a site)</span></span>
    
   - <span data-ttu-id="065d7-154">Cuando el usuario de destino acepta la invitación de uso compartido que se les envía (haciendo clic en el vínculo de la invitación), SharePoint registra un evento **SharingInvitationAccepted** y asigna los permisos de usuario de destino para obtener acceso al recurso.</span><span class="sxs-lookup"><span data-stu-id="065d7-154">When the target user accepts the sharing invitation that's sent to them (by clicking the link in the invitation), SharePoint logs a **SharingInvitationAccepted** event and assigns the target user permissions to access the resource.</span></span> <span data-ttu-id="065d7-155">Si se envía un vínculo anónimo al usuario de destino, el evento **AnonymousLinkUsed** se registra después de que el usuario de destino use el vínculo para obtener acceso al recurso.</span><span class="sxs-lookup"><span data-stu-id="065d7-155">If the target user is sent an anonymous link, the **AnonymousLinkUsed** event is logged after the target user uses the link to access the resource.</span></span> <span data-ttu-id="065d7-156">Para vínculos seguros, se **registra un evento FileAccessed** cuando un usuario externo usa el vínculo para obtener acceso al recurso.</span><span class="sxs-lookup"><span data-stu-id="065d7-156">For secure links, a **FileAccessed** event is logged when an external user uses the link to access the resource.</span></span>

<span data-ttu-id="065d7-157">También se registra información adicional sobre el usuario de destino, como la identidad del usuario al que es la invitación y el usuario que acepta la invitación.</span><span class="sxs-lookup"><span data-stu-id="065d7-157">Additional information about the target user is also logged, such as the identity of the user the invitation is to and the user who accepts the invitation.</span></span> <span data-ttu-id="065d7-158">En algún caso, estos usuarios (o direcciones de correo electrónico) pueden ser diferentes.</span><span class="sxs-lookup"><span data-stu-id="065d7-158">In some case, these users (or email addresses) can be different.</span></span> 

## <a name="how-to-identify-resources-shared-with-external-users"></a><span data-ttu-id="065d7-159">Cómo identificar recursos compartidos con usuarios externos</span><span class="sxs-lookup"><span data-stu-id="065d7-159">How to identify resources shared with external users</span></span>

<span data-ttu-id="065d7-160">Un requisito común para los administradores es crear una lista de todos los recursos que se han compartido con usuarios fuera de la organización.</span><span class="sxs-lookup"><span data-stu-id="065d7-160">A common requirement for administrators is creating a list of all resources that have been shared with users outside of the organization.</span></span> <span data-ttu-id="065d7-161">Al usar la auditoría de uso compartido en Office 365, los administradores pueden generar esta lista.</span><span class="sxs-lookup"><span data-stu-id="065d7-161">By using sharing auditing in Office 365, administrators can generate this list.</span></span> <span data-ttu-id="065d7-162">Aquí se muestra cómo hacerlo.</span><span class="sxs-lookup"><span data-stu-id="065d7-162">Here's how.</span></span>
  
### <a name="step-1-search-for-sharing-events-and-export-the-results-to-a-csv-file"></a><span data-ttu-id="065d7-163">Paso 1: Buscar eventos de uso compartido y exportar los resultados a un archivo CSV</span><span class="sxs-lookup"><span data-stu-id="065d7-163">Step 1: Search for sharing events and export the results to a CSV file</span></span>

<span data-ttu-id="065d7-164">El primer paso es buscar eventos de uso compartido en el registro de auditoría.</span><span class="sxs-lookup"><span data-stu-id="065d7-164">The first step is to search the audit log for sharing events.</span></span> <span data-ttu-id="065d7-165">Para obtener más información (incluidos los permisos necesarios) sobre cómo buscar en el registro de auditoría, vea Buscar en el registro de auditoría en el Centro de [seguridad & cumplimiento](search-the-audit-log-in-security-and-compliance.md).</span><span class="sxs-lookup"><span data-stu-id="065d7-165">For more information (including the required permissions) about searching the audit log, see [Search the audit log in the Security & Compliance Center](search-the-audit-log-in-security-and-compliance.md).</span></span>
  
1. <span data-ttu-id="065d7-166">Vaya a [https://protection.office.com](https://protection.office.com).</span><span class="sxs-lookup"><span data-stu-id="065d7-166">Go to [https://protection.office.com](https://protection.office.com).</span></span>
    
2. <span data-ttu-id="065d7-167">Inicie sesión con su cuenta profesional o educativa.</span><span class="sxs-lookup"><span data-stu-id="065d7-167">Sign in using your work or school account.</span></span>
    
3. <span data-ttu-id="065d7-168">En el panel izquierdo del Centro de seguridad y cumplimiento, haga clic en **Buscar**  > **Búsqueda de registros de auditoría**.</span><span class="sxs-lookup"><span data-stu-id="065d7-168">In the left pane of the Security & Compliance Center, click **Search**  > **Audit log search**.</span></span>
    
    <span data-ttu-id="065d7-169">La página de **Búsqueda de registros de auditoría** se mostrará.</span><span class="sxs-lookup"><span data-stu-id="065d7-169">The **Audit log search** page is displayed.</span></span> 
    
4. <span data-ttu-id="065d7-170">En **Actividades,** haga clic **en Compartir y acceder a** las actividades de solicitud para buscar eventos relacionados con el uso compartido.</span><span class="sxs-lookup"><span data-stu-id="065d7-170">Under **Activities**, click **Sharing and access request activities** to search for sharing-related events.</span></span> 
    
    ![En Actividades, seleccione Compartir y obtener acceso a actividades de solicitud](../media/46bb25b7-1eb2-4adf-903a-cc9ab58639f9.png)
  
5.  <span data-ttu-id="065d7-172">Seleccione un intervalo de fecha y hora para buscar los eventos de uso compartido que se produjeron en ese período.</span><span class="sxs-lookup"><span data-stu-id="065d7-172">Select a date and time range to find the sharing events that occurred within that period.</span></span> 
    
6. <span data-ttu-id="065d7-173">Haga **clic en** Buscar para ejecutar la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="065d7-173">Click **Search** to run the search.</span></span> 
    
7. <span data-ttu-id="065d7-174">Cuando la búsqueda termine de ejecutarse y se muestren los resultados, haga clic **en Exportar** \> **resultados Descargar todos los resultados**.</span><span class="sxs-lookup"><span data-stu-id="065d7-174">When the search is finished running and the results are displayed, click **Export results** \> **Download all results**.</span></span>
    
    <span data-ttu-id="065d7-175">Después de seleccionar la opción de exportación, un mensaje en la parte inferior de la ventana le pedirá que abra o guarde el archivo CSV.</span><span class="sxs-lookup"><span data-stu-id="065d7-175">After you select the export option, a message at the bottom of the window prompts you to open or save the CSV file.</span></span>
    
8. <span data-ttu-id="065d7-176">Haga **clic en** Guardar como y guarde el archivo CSV en una carpeta del equipo \>  local.</span><span class="sxs-lookup"><span data-stu-id="065d7-176">Click **Save** \> **Save as** and save the CSV file to a folder on your local computer.</span></span> 

### <a name="step-2-use-the-powerquery-editor-to-format-the-exported-audit-log"></a><span data-ttu-id="065d7-177">Paso 2: Usar el Editor de PowerQuery para dar formato al registro de auditoría exportado</span><span class="sxs-lookup"><span data-stu-id="065d7-177">Step 2: Use the PowerQuery Editor to format the exported audit log</span></span>

<span data-ttu-id="065d7-178">El siguiente paso es usar la característica de transformación JSON en el Editor de power query de Excel para dividir cada propiedad de la columna **AuditData** (que consta de un objeto JSON de varias propiedades) en su propia columna.</span><span class="sxs-lookup"><span data-stu-id="065d7-178">The next step is to use the JSON transform feature in the Power Query Editor in Excel to split each property in the **AuditData** column (which consists of a multi-property JSON object) into its own column.</span></span> <span data-ttu-id="065d7-179">Esto le permite filtrar columnas para ver registros relacionados con el uso compartido</span><span class="sxs-lookup"><span data-stu-id="065d7-179">This lets you filter columns to view records related to sharing</span></span>

<span data-ttu-id="065d7-180">Para obtener instrucciones paso a paso, consulte «Paso 2: Dar formato al registro de auditoría exportado mediante el Editor de Power Query» en [Exportar, configurar y ver los archivos de registros de auditoría](export-view-audit-log-records.md#step-2-format-the-exported-audit-log-using-the-power-query-editor). </span><span class="sxs-lookup"><span data-stu-id="065d7-180">For step-by-step instructions, see "Step 2: Format the exported audit log using the Power Query Editor" in [Export, configure, and view audit log records](export-view-audit-log-records.md#step-2-format-the-exported-audit-log-using-the-power-query-editor).</span></span>

### <a name="step-3-filter-the-csv-file-for-resources-shared-with-external-users"></a><span data-ttu-id="065d7-181">Paso 3: Filtrar el archivo CSV para los recursos compartidos con usuarios externos</span><span class="sxs-lookup"><span data-stu-id="065d7-181">Step 3: Filter the CSV file for resources shared with external users</span></span>

<span data-ttu-id="065d7-182">El siguiente paso es filtrar el CSV para los distintos eventos relacionados con el uso compartido que se describen anteriormente en la [sección SharePoint eventos de uso](#sharepoint-sharing-events) compartido.</span><span class="sxs-lookup"><span data-stu-id="065d7-182">The next step is to filter the CSV for the different sharing-related events that were previously described in the [SharePoint sharing events](#sharepoint-sharing-events) section.</span></span> <span data-ttu-id="065d7-183">Como alternativa, puede filtrar la **columna TargetUserOrGroupType** para mostrar todos los registros donde el valor de esta propiedad es **Guest**.</span><span class="sxs-lookup"><span data-stu-id="065d7-183">Alternatively, you can filter the **TargetUserOrGroupType** column to display all records where the value of this property is **Guest**.</span></span> 

<span data-ttu-id="065d7-184">Después de seguir las instrucciones del paso anterior para preparar el archivo CSV mediante el editor de PowerQuery, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="065d7-184">After you've followed the instructions in the previous step to prepare the CSV file by using the PowerQuery editor, do the following:</span></span>
    
1. <span data-ttu-id="065d7-185">Abra el Excel que creó en el paso 2.</span><span class="sxs-lookup"><span data-stu-id="065d7-185">Open the Excel file that you created in Step 2.</span></span> 

2. <span data-ttu-id="065d7-186">En la **ficha Inicio,** haga clic **en Ordenar & filtro** y, a continuación, haga clic en **Filtrar**.</span><span class="sxs-lookup"><span data-stu-id="065d7-186">On the **Home** tab, click **Sort & Filter**, and then click **Filter**.</span></span>
    
3. <span data-ttu-id="065d7-187">En la lista desplegable Ordenar **&**  filtro de la columna Operaciones, desactive todas las selecciones, seleccione uno o más de los siguientes eventos relacionados con el uso compartido y, a continuación, haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="065d7-187">In the **Sort & Filter** dropdown list on the **Operations** column, clear all selections, then select one or more the following sharing-related events and then click **Ok**.</span></span>
 
   - <span data-ttu-id="065d7-188">**SharingInvitationCreated**</span><span class="sxs-lookup"><span data-stu-id="065d7-188">**SharingInvitationCreated**</span></span>
   
   - <span data-ttu-id="065d7-189">**AnonymousLinkCreated**</span><span class="sxs-lookup"><span data-stu-id="065d7-189">**AnonymousLinkCreated**</span></span>
   
   - <span data-ttu-id="065d7-190">**SecureLinkCreated**</span><span class="sxs-lookup"><span data-stu-id="065d7-190">**SecureLinkCreated**</span></span>
   
   - <span data-ttu-id="065d7-191">**AddedToSecureLink**</span><span class="sxs-lookup"><span data-stu-id="065d7-191">**AddedToSecureLink**</span></span> 
    
    <span data-ttu-id="065d7-192">Excel muestra las filas de los eventos seleccionados.</span><span class="sxs-lookup"><span data-stu-id="065d7-192">Excel displays the rows for the events you selected.</span></span>
    
4. <span data-ttu-id="065d7-193">Vaya a la columna **denominada TargetUserOrGroupType** y selecciónelo.</span><span class="sxs-lookup"><span data-stu-id="065d7-193">Go to the column named **TargetUserOrGroupType** and select it.</span></span> 
    
5. <span data-ttu-id="065d7-194">En la **lista desplegable Ordenar &** filtro, desactive todas las selecciones, seleccione **TargetUserOrGroupType:Guest** y haga clic en **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="065d7-194">In the **Sort & Filter** dropdown list, clear all selections, then select **TargetUserOrGroupType:Guest**, and click **Ok**.</span></span>
    
    <span data-ttu-id="065d7-195">Ahora Excel las filas para compartir eventos Y donde el usuario de destino está fuera de la organización, ya que los usuarios externos se identifican mediante el valor **TargetUserOrGroupType:Guest**.</span><span class="sxs-lookup"><span data-stu-id="065d7-195">Now Excel displays the rows for sharing events AND where the target user is outside of your organization, because external users are identified by the value **TargetUserOrGroupType:Guest**.</span></span> 
  
> [!TIP]
> <span data-ttu-id="065d7-196">Para los registros de auditoría que se muestran, la columna **ObjectId** identifica el recurso que se compartió con el usuario de destino; por ejemplo  `ObjectId:https:\/\/contoso-my.sharepoint.com\/personal\/sarad_contoso_com\/Documents\/Southwater Proposal.docx` .</span><span class="sxs-lookup"><span data-stu-id="065d7-196">For the audit records that are displayed, the **ObjectId** column identifies the resource that was shared with the target user; for example  `ObjectId:https:\/\/contoso-my.sharepoint.com\/personal\/sarad_contoso_com\/Documents\/Southwater Proposal.docx`.</span></span>
