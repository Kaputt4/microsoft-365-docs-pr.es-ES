---
title: Activar la protección contra vulnerabilidades para ayudar a mitigar los ataques
keywords: vulnerabilidad, vulnerabilidad, mitigación, ataques
description: Obtenga información sobre cómo habilitar la protección contra vulnerabilidades en Windows 10. La protección contra vulnerabilidades ayuda a proteger el dispositivo contra malware.
search.product: eADQiWindows 10XVcnh
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
localization_priority: Normal
audience: ITPro
author: denisebmsft
ms.author: deniseb
ms.reviewer: ksarens
manager: dansimp
ms.technology: mde
ms.topic: how-to
ms.date: 05/11/2021
ms.openlocfilehash: 62ae62cc1041e4de9c31e99cb90bed5b1a7312ad
ms.sourcegitcommit: 967f64dfa1a05f31179c8316b96bfb7758a5d990
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 05/12/2021
ms.locfileid: "52333740"
---
# <a name="enable-exploit-protection"></a>Habilitar la protección contra vulnerabilidades de seguridad

**Se aplica a:**
- [Microsoft Defender para punto de conexión](https://go.microsoft.com/fwlink/p/?linkid=2154037)
- [Microsoft 365 Defender](https://go.microsoft.com/fwlink/?linkid=2118804)

> [!TIP]
> ¿Desea experimentar Defender for Endpoint? [Regístrate para obtener una versión de prueba gratuita.](https://www.microsoft.com/microsoft-365/windows/microsoft-defender-atp?ocid=docs-wdatp-assignaccess-abovefoldlink)

[La protección contra](exploit-protection.md) vulnerabilidades ayuda a proteger contra malware que usa exploits para infectar dispositivos y propagarse. La protección contra vulnerabilidades de seguridad consiste en muchas mitigaciones que se pueden aplicar al sistema operativo o a aplicaciones individuales.

> [!IMPORTANT]
> .NET 2.0 no es compatible con algunas funcionalidades de protección contra vulnerabilidades, en concreto, Exportar filtrado de direcciones (EAF) e Importar filtrado de direcciones (IAF). Si ha habilitado .NET 2.0, no se admite el uso de EAF e IAF.

Muchas características de la experiencia de mitigación mejorada Toolkit (EMET) se incluyen en la protección contra vulnerabilidades de seguridad.

Puede habilitar cada mitigación por separado mediante cualquiera de estos métodos:   
- [Seguridad de Windows app](#windows-security-app)
- [Microsoft Intune](#intune)
- [Administración de dispositivos móviles (MDM)](#mdm)
- [Microsoft Endpoint Configuration Manager](#microsoft-endpoint-configuration-manager)
- [Directiva de grupo](#group-policy)
- [PowerShell](#powershell)

La protección contra vulnerabilidades de seguridad se configura de forma predeterminada en Windows 10. Puede establecer cada mitigación en on, off o en su valor predeterminado. Algunas mitigaciones tienen más opciones. Puedes exportar [esta configuración como un archivo XML e](import-export-exploit-protection-emet-xml.md) implementarla en otros dispositivos.

También puede establecer mitigaciones en modo [auditoría](evaluate-exploit-protection.md). El modo auditoría te permite probar cómo funcionaría las mitigaciones (y revisar los eventos) sin afectar al uso normal del dispositivo.

## <a name="windows-security-app"></a>Seguridad de Windows app

1. Abra la aplicación Seguridad de Windows seleccionando el icono de escudo en la barra de tareas o buscando en el menú Inicio de **Seguridad**.

2. Selecciona el **icono control &** del explorador (o el icono de la aplicación en la barra de menús izquierda) y, a continuación, selecciona Configuración de protección contra **vulnerabilidades** de seguridad .

3. Ve a **Configuración del programa** y elige la aplicación a la que quieres aplicar mitigaciones. <br/>
    - Si la aplicación que quieres configurar ya está en la lista, selecciónelo y, a continuación, **selecciona Editar**.
    - Si la aplicación no aparece, en la parte superior de la lista, selecciona **Agregar programa** para personalizar y, a continuación, elige cómo quieres agregar la aplicación. <br/>
    - Use **Agregar por nombre de programa** para aplicar la mitigación a cualquier proceso en ejecución con ese nombre. Especifique un archivo con su extensión. Puedes escribir una ruta de acceso completa para limitar la mitigación solo a la aplicación con ese nombre en esa ubicación.
    - Use **Elegir la ruta de acceso exacta del** archivo para usar una ventana estándar Windows selector de archivos del Explorador para buscar y seleccionar el archivo que desee.

4. Después de seleccionar la aplicación, verás una lista de todas las mitigaciones que se pueden aplicar. Si elige **Audit,** solo se aplicará la mitigación en modo auditoría. Se te notificará si necesitas reiniciar el proceso o la aplicación, o si necesitas reiniciar Windows.

5. Repita los pasos 3-4 para todas las aplicaciones y mitigaciones que desee configurar.

6. En la **sección Configuración del** sistema, busque la mitigación que desea configurar y, a continuación, especifique una de las siguientes opciones. Las aplicaciones que no están configuradas individualmente en la **sección Configuración del** programa usan la configuración que se configura aquí.<br/>
    - **Activado de forma predeterminada:** la mitigación está *habilitada* para aplicaciones que no tienen esta mitigación establecida en la sección Configuración del programa específica **de la** aplicación
    - **Desactivado de forma predeterminada:** la mitigación *está* deshabilitada para las aplicaciones que no tienen esta mitigación establecida en la sección Configuración del programa específica **de la** aplicación.
    - **Usar valor** predeterminado: la mitigación está habilitada o deshabilitada, según la configuración predeterminada que se configura mediante Windows 10 instalación; el valor predeterminado (**On** o **Off**) siempre se especifica junto a la **etiqueta usar predeterminada** para cada mitigación

7. Repita el paso 6 para todas las mitigaciones de nivel del sistema que desee configurar. Seleccione **Aplicar** cuando haya terminado de configurar la configuración.

Si agregas una  aplicación a la sección Configuración del programa y configuras opciones de mitigación individuales allí, se respetarán por encima de la configuración para las mismas mitigaciones especificadas en la sección **Configuración del** sistema. La siguiente matriz y ejemplos ayudan a ilustrar cómo funcionan los valores predeterminados:

|Habilitado en **configuración del programa** | Habilitado en **configuración del sistema** | Comportamiento |
|:---|:---|:---|
|Sí | No | Tal como se define en **Configuración del programa** |
|Sí | Sí | Tal como se define en **Configuración del programa** |
|No | Sí | Tal como se define en **Configuración del sistema** |
|No | Sí | Valor predeterminado tal como se define en **la opción Usar predeterminada** |

### <a name="example-1-mikael-configures-data-execution-prevention-in-system-settings-section-to-be-off-by-default"></a>Ejemplo 1: Mikael configura la sección Prevención de ejecución de datos en la sección configuración del sistema para que esté desactivada de forma predeterminada

Mikael agrega la *aplicación* test.exea la sección Configuración **del** programa. En las opciones de esa aplicación, en Prevención de ejecución de datos **(DEP),** Mikael habilita la opción **Invalidar** configuración del sistema y establece el modificador en **On**. No hay otras aplicaciones enumeradas en la **sección Configuración del** programa.

El resultado es que DEP solo está habilitado para *test.exe*. El resto de aplicaciones no tendrán DEP aplicado.

### <a name="example-2-josie-configures-data-execution-prevention-in-system-settings-to-be-off-by-default"></a>Ejemplo 2: Josie configura la prevención de ejecución de datos en la configuración del sistema para que esté desactivada de forma predeterminada

Josie agrega la *aplicación* test.exea la sección Configuración **del** programa. En las opciones de esa aplicación, en Prevención de ejecución de datos **(DEP),** Josie habilita la opción **Invalidar** configuración del sistema y establece el modificador en **Activado**.

Josie también agrega la aplicaciónmiles.exe *a* la sección Configuración del programa y configura Control flow **guard (CFG)** en **On**. Josie no habilita la **opción** Invalidar configuración del sistema para DEP ni ninguna otra mitigación para esa aplicación.

El resultado es que DEP está habilitado para *test.exe*. DEP no se habilitará para ninguna otra aplicación, incluida *miles.exe*. CFG se habilitará para *miles.exe*.

1. Abra la aplicación Seguridad de Windows mediante la selección del icono de escudo en la barra de tareas o la búsqueda en el menú inicio de **Defender**.

2. Selecciona el **icono control &** del explorador (o el icono de la aplicación en la barra de menús izquierda) y, a continuación, selecciona Protección contra **vulnerabilidades** de seguridad .

3. Ve a **Configuración del programa** y elige la aplicación a la que quieres aplicar mitigaciones.<br/>
    - Si la aplicación que quieres configurar ya está en la lista, selecciónelo y, a continuación, **selecciona Editar**.
    - Si la aplicación no aparece, en la parte superior de la lista, selecciona **Agregar programa** para personalizar y, a continuación, elige cómo quieres agregar la aplicación.<br/>
     - Use **Agregar por nombre de programa** para aplicar la mitigación a cualquier proceso en ejecución con ese nombre. Especifique un archivo con una extensión. Puedes escribir una ruta de acceso completa para limitar la mitigación solo a la aplicación con ese nombre en esa ubicación.
     - Use **Elegir la ruta de acceso exacta del** archivo para usar una ventana estándar Windows selector de archivos del Explorador para buscar y seleccionar el archivo que desee.

4. Después de seleccionar la aplicación, verás una lista de todas las mitigaciones que se pueden aplicar. Si elige **Audit,** solo se aplicará la mitigación en modo auditoría. Se te notificará si necesitas reiniciar el proceso o la aplicación, o si necesitas reiniciar el Windows.

5. Repita los pasos 3-4 para todas las aplicaciones y mitigaciones que desee configurar. Seleccione **Aplicar** cuando haya terminado de configurar la configuración.

## <a name="intune"></a>Intune

1. Inicie sesión en [Azure Portal y](https://portal.azure.com) abra Intune.

2. Vaya a **Perfiles de configuración**  >  **de dispositivo Crear**  >  **perfil**.

3. Asigne un nombre al perfil, **elija Windows 10 y posterior y** Endpoint **protection**.

   :::image type="content" source="images/create-endpoint-protection-profile.png" alt-text="Crear perfil de protección de puntos de conexión":::

4. Seleccione **Configurar Windows Defender** protección contra  >  **vulnerabilidades de** seguridad de Protección contra  >  **vulnerabilidades de seguridad**.

5. Upload un [archivo XML con](/windows/client-management/mdm/policy-csp-exploitguard) la configuración de protección contra vulnerabilidades:

   :::image type="content" source="images/enable-ep-intune.png" alt-text="Habilitar la protección de red en Intune":::

6. Seleccione **Aceptar** para guardar cada hoja abierta y, a continuación, elija **Crear**.

7. Seleccione la pestaña **Asignaciones de perfil,** asigne la directiva a **Todos los usuarios & Todos** los dispositivos y, a continuación, seleccione **Guardar**.

## <a name="mdm"></a>MDM

Use [el proveedor ./Vendor/MSFT/Policy/Config/ExploitGuard/ExploitProtectionSettings](/windows/client-management/mdm/policy-csp-exploitguard) configuration service provider (CSP) para habilitar o deshabilitar mitigaciones de protección contra vulnerabilidades o para usar el modo de auditoría.

## <a name="microsoft-endpoint-manager"></a>Microsoft Endpoint Manager

1. En Microsoft Endpoint Manager, vaya a **Endpoint Security Attack** surface  >  **reduction**. 

2. Seleccione **Crear plataforma de**  >  **directivas** **y, en Perfil,** elija **Protección contra vulnerabilidades** de seguridad . Luego, seleccione **Crear**.

3. Especifique un nombre y una descripción y, a continuación, elija **Siguiente**.

4. Elija **Seleccionar archivo XML y** busque la ubicación del archivo XML de protección contra vulnerabilidades. Seleccione el archivo y, a continuación, **elija Siguiente**.

5. Configure **las etiquetas de ámbito** y las **asignaciones si** es necesario. 

6. En **Revisar + crear,** revise las opciones de configuración y, a continuación, **elija Crear**.


## <a name="microsoft-endpoint-configuration-manager"></a>Microsoft Endpoint Configuration Manager

1. En Microsoft Endpoint Configuration Manager, vaya a **Assets and Compliance**  >  **Endpoint Protection** Windows Defender Exploit  >  **Guard**.

2. Seleccione **Inicio Crear** directiva de protección contra  >  **vulnerabilidades** de seguridad .

3. Especifique un nombre y una descripción, seleccione **Protección contra vulnerabilidades** de seguridad y, a continuación, elija **Siguiente**.

4. Vaya a la ubicación del archivo XML de protección contra vulnerabilidades y seleccione **Siguiente**.

5. Revise la configuración y, a continuación, elija **Siguiente** para crear la directiva.

6. Después de crear la directiva, seleccione **Cerrar**.

## <a name="group-policy"></a>Directiva de grupo

1. En el dispositivo de administración de directivas de grupo, abra la Consola de administración de directivas de [grupo,](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731212(v=ws.11))haga clic con el botón secundario en el objeto de directiva de grupo que desea configurar y haga clic en **Editar**.

2. En el **Editor de administración de directivas de grupo,** vaya a Configuración del **equipo** y seleccione **Plantillas administrativas.**

3. Expande el árbol para **Windows componentes Windows Defender** protección contra vulnerabilidades de seguridad use un conjunto común de opciones de protección contra  >    >    >  **vulnerabilidades** de seguridad .

4. Seleccione **Habilitado** y escriba la ubicación del [archivo XML](/windows/client-management/mdm/policy-csp-exploitguard)y, a continuación, elija **Aceptar**.

## <a name="powershell"></a>PowerShell

Puede usar el verbo de PowerShell `Get` o con el cmdlet `Set` `ProcessMitigation` . El uso enumerará el estado de configuración actual de las mitigaciones que se han habilitado en el dispositivo: agregue el cmdlet y la aplicación exe para ver mitigaciones solo para `Get` `-Name` esa aplicación:

```PowerShell
Get-ProcessMitigation -Name processName.exe
```

> [!IMPORTANT]
> Las mitigaciones de nivel de sistema que no se han configurado mostrarán un estado de `NOTSET` .
> - Para la configuración de nivel del sistema, indica que se ha aplicado la configuración predeterminada para `NOTSET` esa mitigación.
> - Para la configuración de nivel de aplicación, indica la configuración de nivel del sistema `NOTSET` para la mitigación que se aplicará.
> La configuración predeterminada para cada mitigación de nivel de sistema se puede ver en el Seguridad de Windows.

Se `Set` usa para configurar cada mitigación en el siguiente formato:

```PowerShell
Set-ProcessMitigation -<scope> <app executable> -<action> <mitigation or options>,<mitigation or options>,<mitigation or options>
```

Donde:

* \<Scope>:
  * `-Name` para indicar que las mitigaciones deben aplicarse a una aplicación específica. Especifica el archivo ejecutable de la aplicación después de esta marca.
    * `-System` para indicar que la mitigación debe aplicarse en el nivel del sistema
* \<Action>:
  * `-Enable` para habilitar la mitigación
  * `-Disable` para deshabilitar la mitigación
* \<Mitigation>:
  * Cmdlet de mitigación junto con cualquier subopción (rodeada de espacios). Cada mitigación se separa con una coma.

Por ejemplo, para habilitar la mitigación de prevención de ejecución de datos (DEP) con emulación de thunk atl y para un archivo ejecutable denominado *testing.exe* en la carpeta *C:\Apps\LOB\tests* y para evitar que ese ejecutable cree procesos secundarios, use el siguiente comando:

```PowerShell
Set-ProcessMitigation -Name c:\apps\lob\tests\testing.exe -Enable DEP, EmulateAtlThunks, DisallowChildProcessCreation
```

> [!IMPORTANT]
> Separe cada opción de mitigación con comas.

Si quisiera aplicar DEP en el nivel del sistema, usaría el siguiente comando:

```PowerShell
Set-Processmitigation -System -Enable DEP
```

Para deshabilitar las mitigaciones, puede reemplazar `-Enable` con `-Disable` . Sin embargo, en el caso de las mitigaciones a nivel de aplicación, esta acción fuerza a deshabilitar la mitigación solo para esa aplicación.

Si necesita restaurar la mitigación al valor predeterminado del sistema, también debe incluir el cmdlet, como `-Remove` en el ejemplo siguiente:

```PowerShell
Set-Processmitigation -Name test.exe -Remove -Disable DEP
```

En la tabla siguiente se enumeran **las** mitigaciones individuales (y **las auditorías,** cuando estén disponibles) que se usarán con los parámetros `-Enable` del cmdlet `-Disable` or.

| Tipo de mitigación | Se aplica a | Palabra clave del parámetro cmdlet de mitigación | Parámetro de cmdlet del modo de auditoría |
| :-------------- | :--------- | :---------------------------------- | :-------------------------- |
| Protección de flujo de control (CFG) | Sistema y nivel de aplicación |   `CFG`,   `StrictCFG`,   `SuppressExports`  | Auditoría no disponible |
| Prevención de ejecución de datos (DEP) | Sistema y nivel de aplicación |   `DEP`,   `EmulateAtlThunks`  | Auditoría no disponible |
| Forzar la aleatorización de imágenes (ASLR obligatoria) | Sistema y nivel de aplicación |   `ForceRelocateImages`  | Auditoría no disponible |
| Aleatorizar asignaciones de memoria (ASLR de abajo arriba) | Sistema y nivel de aplicación |   `BottomUp`,   `HighEntropy`  | Auditoría no disponible
| Validar cadenas de excepciones (SEHOP) | Sistema y nivel de aplicación |   `SEHOP`,   `SEHOPTelemetry`  | Auditoría no disponible |
| Validar la integridad del montón | Sistema y nivel de aplicación |   `TerminateOnError`  | Auditoría no disponible |
| Protección de código arbitraria (ACG) | Solo a nivel de aplicación |   `DynamicCode`  |   `AuditDynamicCode` |
| Bloquear imágenes de baja integridad | Solo a nivel de aplicación |   `BlockLowLabel`  |   `AuditImageLoad` |
| Bloquear imágenes remotas | Solo a nivel de aplicación |   `BlockRemoteImages`  | Auditoría no disponible |
| Bloquear fuentes que no son de confianza | Solo a nivel de aplicación |   `DisableNonSystemFonts`  |   `AuditFont`,   `FontAuditOnly` |
| Protección de integridad de código | Solo a nivel de aplicación |   `BlockNonMicrosoftSigned`,   `AllowStoreSigned`  |   AuditMicrosoftSigned, AuditStoreSigned |
| Deshabilitar puntos de extensión | Solo a nivel de aplicación |   `ExtensionPoint`  | Auditoría no disponible |
| Deshabilitar llamadas del sistema Win32k | Solo a nivel de aplicación |   `DisableWin32kSystemCalls`  |   `AuditSystemCall` |
| No permitir procesos secundarios | Solo a nivel de aplicación |   `DisallowChildProcessCreation`  |   `AuditChildProcess` |
| Exportar filtrado de direcciones (EAF) | Solo a nivel de aplicación |   `EnableExportAddressFilterPlus`, `EnableExportAddressFilter` <a href="#r1" id="t1"> \[ 1 \] </a>   | Auditoría no disponible<a href="#r2" id="t2"> \[ 2 \] </a> |
| Importar filtrado de direcciones (IAF) | Solo a nivel de aplicación |   `EnableImportAddressFilter`  | Auditoría no disponible<a href="#r2" id="t2"> \[ 2 \] </a> |
| Simulación de ejecución (SimExec) | Solo a nivel de aplicación |   `EnableRopSimExec`  | Auditoría no disponible<a href="#r2" id="t2"> \[ 2 \] </a> |
| Validar invocación de API (CallerCheck) | Solo a nivel de aplicación |   `EnableRopCallerCheck`  | Auditoría no disponible<a href="#r2" id="t2"> \[ 2 \] </a> |
| Validar el uso de identificadores | Solo a nivel de aplicación |   `StrictHandle`  | Auditoría no disponible |
| Validar la integridad de dependencia de imagen | Solo a nivel de aplicación |   `EnforceModuleDepencySigning`  | Auditoría no disponible |
| Validar la integridad de la pila (StackPivot) | Solo a nivel de aplicación |   `EnableRopStackPivot`  | Auditoría no disponible<a href="#r2" id="t2"> \[ 2 \] </a> |

<a href="#t1" id="r1"> \[ 1 \] </a>: Use el siguiente formato para habilitar módulos EAF para dll para un proceso:

```PowerShell
Set-ProcessMitigation -Name processName.exe -Enable EnableExportAddressFilterPlus -EAFModules dllName1.dll,dllName2.dll
```
<a href="#t2" id="r2"> \[ 2: \] </a>La auditoría de esta mitigación no está disponible a través de cmdlets de PowerShell.

## <a name="customize-the-notification"></a>Personalizar la notificación

Para obtener información sobre cómo personalizar la notificación cuando se desencadena una regla y se bloquea una aplicación o un archivo, consulta [Seguridad de Windows](/windows/security/threat-protection/windows-defender-security-center/windows-defender-security-center).

## <a name="see-also"></a>Consulte también

- [Evaluar protección contra vulnerabilidades](evaluate-exploit-protection.md)
- [Configurar y auditar mitigaciones de protección contra vulnerabilidades](customize-exploit-protection.md)
- [Importar, exportar e implementar configuraciones de protección de vulnerabilidades de seguridad](import-export-exploit-protection-emet-xml.md)
