---
title: Activar la protección contra vulnerabilidades de seguridad para ayudar a mitigar los ataques
keywords: vulnerabilidad, mitigación, ataques, vulnerabilidad
description: Aprenda a habilitar la protección contra vulnerabilidades en Windows. La protección contra vulnerabilidades ayuda a proteger el dispositivo contra malware.
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
ms.localizationpriority: medium
audience: ITPro
author: denisebmsft
ms.author: deniseb
ms.reviewer: ksarens
manager: dansimp
ms.technology: mde
ms.topic: how-to
ms.collection: m365-security-compliance
ms.date: 07/27/2022
ms.openlocfilehash: 97361ffa09bb4545e609048b584977f1e3b72b44
ms.sourcegitcommit: 1e53bf8208c30d7b60685896207cc1142bebf34a
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 07/28/2022
ms.locfileid: "67059675"
---
# <a name="enable-exploit-protection"></a>Habilitar la protección contra vulnerabilidades de seguridad

**Se aplica a:**
- [Microsoft Defender para punto de conexión Plan 2](https://go.microsoft.com/fwlink/p/?linkid=2154037)
- [Microsoft Defender para punto de conexión Plan 1](https://go.microsoft.com/fwlink/p/?linkid=2154037)
- [Microsoft 365 Defender](https://go.microsoft.com/fwlink/?linkid=2118804)

> [!TIP]
> ¿Quiere experimentar Defender para punto de conexión? [Regístrese para obtener una prueba gratuita.](https://signup.microsoft.com/create-account/signup?products=7f379fee-c4f9-4278-b0a1-e4c8c2fcdf7e&ru=https://aka.ms/MDEp2OpenTrial?ocid=docs-wdatp-assignaccess-abovefoldlink)

[Protección contra vulnerabilidades](exploit-protection.md) ayuda a proteger contra malware que usa vulnerabilidades de seguridad para infectar dispositivos y propagarse. La protección contra vulnerabilidades se compone de muchas mitigaciones que se pueden aplicar al sistema operativo o a aplicaciones individuales.

> [!IMPORTANT]
> .NET 2.0 no es compatible con algunas funcionalidades de protección contra vulnerabilidades de seguridad, en concreto, el filtrado de direcciones de exportación (EAF) y el filtrado de direcciones de importación (IAF). Si ha habilitado .NET 2.0, no se admite el uso de EAF e IAF.

Muchas de las características del Kit de herramientas de Experiencia de mitigación mejorada (EMET) se incluyen en la protección contra vulnerabilidades de seguridad.

Puede habilitar cada mitigación por separado mediante cualquiera de estos métodos:

- [Aplicación Seguridad de Windows](#windows-security-app)
- [Microsoft Intune](#intune)
- [Administración de dispositivos móviles (MDM)](#mdm)
- [Microsoft Endpoint Configuration Manager](#microsoft-endpoint-configuration-manager)
- [Directiva de grupo](#group-policy)
- [PowerShell](#powershell)

La protección contra vulnerabilidades está configurada de forma predeterminada en Windows 10 y Windows 11. Puede establecer cada mitigación en activado, desactivado o en su valor predeterminado. Algunas mitigaciones tienen más opciones. Puede [exportar esta configuración como un archivo XML](import-export-exploit-protection-emet-xml.md) e implementarla en otros dispositivos.

También puede establecer mitigaciones en [modo de auditoría](evaluate-exploit-protection.md). El modo de auditoría permite probar cómo funcionarán las mitigaciones (y revisar los eventos) sin afectar al uso normal del dispositivo.

## <a name="windows-security-app"></a>Aplicación Seguridad de Windows

1. Abra la aplicación Seguridad de Windows seleccionando el icono de escudo en la barra de tareas o buscando **Seguridad** en el menú Inicio.

2. Seleccione el icono **Control de aplicaciones y navegador** (o el icono de la aplicación en la barra de menús de la izquierda) y seleccione **Configuración de protección contra vulnerabilidades**.

3. Vaya a **Configuración del programa** y elija la aplicación a la que quiere aplicar mitigaciones.
    - Si la aplicación que quiere configurar ya aparece en la lista, selecciónela y seleccione **Editar**.
    - Si la aplicación no aparece en la lista, en la parte superior de la lista, seleccione **Agregar programa para personalizar** y elija cómo quiere agregar la aplicación.
    - Use **Agregar por nombre de programa** para aplicar la mitigación a cualquier proceso en ejecución con ese nombre. Especifique un archivo con su extensión. Puede escribir una ruta de acceso completa para limitar la mitigación solo a la aplicación con ese nombre en esa ubicación.
    - Use **Elegir la ruta de acceso exacta de un archivo** para usar una ventana estándar del selector de archivos de Explorador de Windows para buscar y seleccionar el archivo que quiera.

4. Después de seleccionar la aplicación, verá una lista de todas las mitigaciones que se pueden aplicar. Al elegir **Auditoría** solo se aplicará la mitigación en modo auditoría. Se le notificará si necesita reiniciar el proceso o la aplicación, o si necesita reiniciar Windows.

5. Repita los pasos del 3 al 4 para todas las aplicaciones y mitigaciones que quiera configurar.

6. En la sección **Configuración del sistema**, busque la mitigación que quiera configurar y especifique una de las siguientes opciones. Las aplicaciones que no se configuran individualmente en la sección **Configuración del programa** usan las opciones que se configuran aquí.
    - **Activado de forma predeterminada**: la mitigación está *habilitada* para aplicaciones que no tienen esta mitigación establecida en la sección **Configuración del programa**
    - **Desactivado de forma predeterminada**: la mitigación está *deshabilitada* para aplicaciones que no tienen esta mitigación establecida en la sección **Configuración del programa**
    - **Usar valor predeterminado**: la mitigación está habilitada o deshabilitada, según la configuración predeterminada configurada por la instalación de Windows 10 o Windows 11; el valor predeterminado (**Activado** o **Desactivado**) siempre se especifica junto a la etiqueta **Usar valor predeterminado** para cada mitigación.

7. Repita el paso 6 para todas las mitigaciones de nivel de sistema que quiera configurar. Seleccione **Aplicar** cuando haya terminado de establecer la configuración.

Si agrega una aplicación a la sección **Configuración del programa** y configura opciones de mitigación individuales allí, se respetarán por encima de la configuración de las mismas mitigaciones especificadas en la sección **Configuración del sistema**. La matriz y los ejemplos siguientes ayudan a ilustrar cómo funcionan los valores predeterminados:

|Habilitado en **Configuración del programa**|Habilitado en **Configuración del sistema**|Comportamiento|
|:---|:---|:---|
|Sí|No|Tal y como se define en **Configuración del programa**|
|Sí|Sí|Tal y como se define en **Configuración del programa**|
|No|Sí|Tal y como se define en **Configuración del sistema**|
|No|No|Valor predeterminado definido en la opción **Usar valor predeterminado**|

### <a name="example-1-mikael-configures-data-execution-prevention-in-system-settings-section-to-be-off-by-default"></a>Ejemplo 1: Alberto configura la prevención de ejecución de datos en la sección de configuración del sistema para que esté desactivada de forma predeterminada

Alberto agrega la aplicación *test.exe* a la sección **Configuración del programa**. En las opciones de esa aplicación, en **Prevención de ejecución de datos (DEP)**, Alberto habilita la opción **Invalidar la configuración del sistema** y establece el modificador en **Activado**. No hay otras aplicaciones enumeradas en la sección **Configuración del programa**.

El resultado es que DEP solo está habilitado para *test.exe*. Todas las demás aplicaciones no tendrán DEP aplicado.

### <a name="example-2-josie-configures-data-execution-prevention-in-system-settings-to-be-off-by-default"></a>Ejemplo 2: Elvira configura la prevención de ejecución de datos en la configuración del sistema para que esté desactivada de forma predeterminada

Elvira agrega la aplicación *test.exe* a la sección **Configuración del programa**. En las opciones de esa aplicación, en **Prevención de ejecución de datos (DEP)**, Elvira habilita la opción **Invalidar configuración del sistema** y establece el modificador en **Activado**.

Elvira también agrega la aplicación *miles.exe* a la sección **Configuración del programa** y establece **Protección de flujo de control (CFG)** en **Activado**. Elvira no habilita la opción **Invalidar configuración del sistema** para DEP ni otras mitigaciones para esa aplicación.

El resultado es que DEP está habilitado para *test.exe*. DEP no se habilitará para ninguna otra aplicación, incluida *miles.exe*. CFG se habilitará para *miles.exe*.

1. Abra la aplicación Seguridad de Windows seleccionando el icono de escudo en la barra de tareas o buscando **Seguridad de Windows** en el menú Inicio.

2. Seleccione el icono **Control de aplicaciones y navegador** (o el icono de la aplicación en la barra de menús de la izquierda) y seleccione **Protección contra vulnerabilidades**.

3. Vaya a **Configuración del programa** y elija la aplicación a la que quiere aplicar mitigaciones.<br/>
    - Si la aplicación que quiere configurar ya aparece en la lista, selecciónela y seleccione **Editar**.
    - Si la aplicación no aparece en la lista, en la parte superior de la lista, seleccione **Agregar programa para personalizar** y elija cómo quiere agregar la aplicación.<br/>
      - Use **Agregar por nombre de programa** para aplicar la mitigación a cualquier proceso en ejecución con ese nombre. Especifique un archivo con una extensión. Puede escribir una ruta de acceso completa para limitar la mitigación solo a la aplicación con ese nombre en esa ubicación.
      - Use **Elegir la ruta de acceso exacta de un archivo** para usar una ventana estándar del selector de archivos de Explorador de Windows para buscar y seleccionar el archivo que quiera.

4. Después de seleccionar la aplicación, verá una lista de todas las mitigaciones que se pueden aplicar. Al elegir **Auditoría** solo se aplicará la mitigación en modo auditoría. Se le notificará si necesita reiniciar el proceso o la aplicación, o si necesita reiniciar Windows.

5. Repita los pasos del 3 al 4 para todas las aplicaciones y mitigaciones que quiera configurar. Seleccione **Aplicar** cuando haya terminado de establecer la configuración.

## <a name="intune"></a>Intune

1. Inicie sesión en [Azure Portal](https://portal.azure.com) y abra Intune.

2. Vaya a **Configuración del dispositivo** \> **Perfiles** \> **Crear perfil**.

3. Asigne un nombre al perfil, elija **Windows 10 y versiones posteriores** y **Endpoint Protection**.

   :::image type="content" source="images/create-endpoint-protection-profile.png" alt-text="La creación del perfil de Endpoint Protection" lightbox="images/create-endpoint-protection-profile.png":::

4. Seleccione **Configurar**\>**Protección contra vulnerabilidades de Windows Defender** \> **Protección contra vulnerabilidades de seguridad**.

5. Cargue un [archivo XML](/windows/client-management/mdm/policy-csp-exploitguard) con la configuración de protección contra vulnerabilidades:

   :::image type="content" source="images/enable-ep-intune.png" alt-text="La opción Habilitar la protección de red en Intune" lightbox="images/enable-ep-intune.png":::

6. Seleccione **Aceptar** para guardar cada hoja abierta y elija **Crear**.

7. Seleccione la pestaña **Asignaciones** de perfil, asigne la directiva a **Todos los usuarios y todos los dispositivos** y seleccione **Guardar**.

## <a name="mdm"></a>MDM

Use el proveedor de servicios de configuración (CSP) [./Vendor/MSFT/Policy/Config/ExploitGuard/ExploitProtectionSettings](/windows/client-management/mdm/policy-csp-exploitguard) para habilitar o deshabilitar mitigaciones de protección contra vulnerabilidades de seguridad o para usar el modo de auditoría.

## <a name="microsoft-endpoint-manager"></a>Microsoft Endpoint Manager

1. En Microsoft Endpoint Manager, vaya a **Seguridad de punto de conexión** \> **Reducción de la superficie expuesta a ataques**.

2. Seleccione **Crear directiva** \> **Plataforma** y, para **Perfil**, elija **Protección contra vulnerabilidades**. Luego, seleccione **Crear**.

3. Especifique un nombre y una descripción y, después, elija **Siguiente**.

4. Elija **Seleccionar archivo XML** y vaya a la ubicación del archivo XML de protección contra vulnerabilidades de seguridad. Seleccione el archivo y elija **Siguiente**.

5. Configure **Etiquetas de ámbito** y **Asignaciones** si es necesario.

6. En **Revisar y crear**, revise las opciones de configuración y elija **Crear**.

## <a name="microsoft-endpoint-configuration-manager"></a>Microsoft Endpoint Configuration Manager

1. En Microsoft Endpoint Configuration Manager, vaya a **Activos y cumplimiento** \> **Endpoint Protection** \> **Protección contra vulnerabilidades de seguridad de Windows Defender**.

2. Seleccione **Inicio** \> **Crear directiva de protección contra vulnerabilidades**.

3. Especifique un nombre y una descripción, seleccione **Protección contra vulnerabilidades** y elija **Siguiente**.

4. Vaya a la ubicación del archivo XML de protección contra vulnerabilidades y seleccione **Siguiente**.

5. Revise la configuración y elija **Siguiente** para crear la directiva.

6. Una vez creada la directiva, seleccione **Cerrar**.

## <a name="group-policy"></a>Directiva de grupo

1. En el dispositivo de administración de directivas de grupo, abra la [Consola de administración de directivas de grupo](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731212(v=ws.11)), haga clic con el botón secundario en el objeto de directiva de grupo que quiera configurar y haga clic **Editar**.

2. En el **Editor de administración de directiva de grupo**, vaya a **Configuración del equipo** y seleccione **Plantillas administrativas**.

3. Expanda el árbol hasta **Componentes de Windows** \> **Protección contra vulnerabilidades de Windows Defender** \> **Protección contra vulnerabilidades** \> **Usar un conjunto común de configuraciones de protección contra vulnerabilidades**.

4. Seleccione **Habilitado**, escriba la ubicación del archivo [XML](/windows/client-management/mdm/policy-csp-exploitguard) y elija **Aceptar**.

## <a name="powershell"></a>PowerShell

Puede usar el verbo de PowerShell `Get` o `Set` con el cmdlet `ProcessMitigation`. Al usar `Get` se mostrará el estado de configuración actual de las mitigaciones habilitadas en el dispositivo. Agregue el cmdlet `-Name` y el archivo exe de la aplicación para ver las mitigaciones solo para esa aplicación:

```PowerShell
Get-ProcessMitigation -Name processName.exe
```

> [!IMPORTANT]
> Las mitigaciones de nivel de sistema que no se han configurado mostrarán el estado `NOTSET`.
>
> - Para la configuración de nivel del sistema, `NOTSET` indica que se ha aplicado la configuración predeterminada para esa mitigación.
> - Para la configuración de nivel de aplicación, `NOTSET` indica que se aplicará la configuración de nivel de sistema para la mitigación.
> La configuración predeterminada para cada mitigación de nivel de sistema se puede ver en Seguridad de Windows.

Use `Set` para configurar cada mitigación en el formato siguiente:

```PowerShell
Set-ProcessMitigation -<scope> <app executable> -<action> <mitigation or options>,<mitigation or options>,<mitigation or options>
```

Donde:

- \<Scope\>:
  - `-Name` para indicar que las mitigaciones se deben aplicar a una aplicación específica. Especifique el ejecutable de la aplicación después de esta marca.
    - `-System` para indicar que la mitigación debe aplicarse en el nivel del sistema
- \<Action\>:
  - `-Enable` para habilitar la mitigación
  - `-Disable` para deshabilitar la mitigación
- \<Mitigation\>:
  - Cmdlet de mitigación junto con cualquier subopción (rodeado de espacios). Cada mitigación se separa con una coma.

Por ejemplo, para habilitar la mitigación de Prevención de ejecución de datos (DEP) con emulación de thunk ATL y para un ejecutable llamado *testing.exe* en la carpeta *C:\Apps\LOB\tests*, y para evitar que ese ejecutable cree procesos secundarios, usaría el siguiente comando:

```PowerShell
Set-ProcessMitigation -Name c:\apps\lob\tests\testing.exe -Enable DEP, EmulateAtlThunks, DisallowChildProcessCreation
```

> [!IMPORTANT]
> Separe cada opción de mitigación con comas.

Si quisiera aplicar DEP en el nivel del sistema, usaría el siguiente comando:

```PowerShell
Set-Processmitigation -System -Enable DEP
```

Para deshabilitar las mitigaciones, puede reemplazar `-Enable` por `-Disable`. Sin embargo, en el caso de las mitigaciones de nivel de aplicación, esta acción obliga a deshabilitar la mitigación solo para esa aplicación.

Si necesita restaurar la mitigación al valor predeterminado del sistema, debe incluir también el cmdlet `-Remove`, como en el ejemplo siguiente:

```PowerShell
Set-Processmitigation -Name test.exe -Remove -Disable DEP
```

En la tabla siguiente se enumeran las **Mitigaciones** (y **Auditorías**, cuando estén disponibles) que se usarán con los parámetros del cmdlet `-Enable` o `-Disable`.<br/><br/>

|Tipo de mitigación|Se aplica a|Palabra clave del parámetro del cmdlet de mitigación|Parámetro de cmdlet del modo de auditoría|
|---|---|---|---|
|Protección del flujo de control (CFG)|Nivel de sistema y aplicación|`CFG`, `StrictCFG`, `SuppressExports`|Auditoría no disponible|
|Prevención de ejecución de datos (DEP)|Nivel de sistema y aplicación|`DEP`, `EmulateAtlThunks`|Auditoría no disponible|
|Forzar la selección aleatoria de imágenes (ASLR es obligatorio)|Nivel de sistema y aplicación|`ForceRelocateImages`|Auditoría no disponible|
|Aleatorizar las asignaciones de memoria (ASLR ascendente)|Nivel de sistema y aplicación|`BottomUp`, `HighEntropy`|Auditoría no disponible
|Validar cadenas de excepción (SEHOP)|Nivel de sistema y aplicación|`SEHOP`, `SEHOPTelemetry`|Auditoría no disponible|
|Validar la integridad del montón|Nivel de sistema y aplicación|`TerminateOnError`|Auditoría no disponible|
|Protección de código arbitrario (ACG)|Solo nivel de aplicación|`DynamicCode`|`AuditDynamicCode`|
|Bloquear imágenes de integridad baja|Solo nivel de aplicación|`BlockLowLabel`|`AuditImageLoad`|
|Bloquear imágenes remotas|Solo nivel de aplicación|`BlockRemoteImages`|Auditoría no disponible|
|Bloquear fuentes que no son de confianza|Solo nivel de aplicación|`DisableNonSystemFonts`|`AuditFont`, `FontAuditOnly`|
|Protección de integridad de código|Solo nivel de aplicación|`BlockNonMicrosoftSigned`, `AllowStoreSigned`|AuditMicrosoftSigned, AuditStoreSigned|
|Deshabilitar los puntos de extensión|Solo nivel de aplicación|`ExtensionPoint`|Auditoría no disponible|
|Deshabilitar llamadas del sistema de Win32k|Solo nivel de aplicación|`DisableWin32kSystemCalls`|`AuditSystemCall`|
|No permitir procesos secundarios|Solo nivel de aplicación|`DisallowChildProcessCreation`|`AuditChildProcess`|
|Exportar filtrado de direcciones (EAF)|Solo nivel de aplicación|`EnableExportAddressFilterPlus`, `EnableExportAddressFilter` <a href="#r1" id="t1">\[1\]</a>|Auditoría no disponible <a href="#r2" id="t2">\[2\]</a>|
|Importar filtrado de direcciones (IAF)|Solo nivel de aplicación|`EnableImportAddressFilter`|Auditoría no disponible <a href="#r2" id="t2">\[2\]</a>|
|Simular la ejecución (SimExec)|Solo nivel de aplicación|`EnableRopSimExec`|Auditoría no disponible <a href="#r2" id="t2">\[2\]</a>|
|Validar la invocación de la API (CallerCheck)|Solo nivel de aplicación|`EnableRopCallerCheck`|Auditoría no disponible <a href="#r2" id="t2">\[2\]</a>|
|Validar el uso de identificador|Solo nivel de aplicación|`StrictHandle`|Auditoría no disponible|
|Validar la integridad de la dependencia de imagen|Solo nivel de aplicación|`EnforceModuleDepencySigning`|Auditoría no disponible|
|Validar la integridad de la pila (StackPivot)|Solo nivel de aplicación|`EnableRopStackPivot`|Auditoría no disponible <a href="#r2" id="t2">\[2\]</a>|

<a href="#t1" id="r1">\[1\]</a>: use el siguiente formato para habilitar módulos EAF para DLL para un proceso:

```PowerShell
Set-ProcessMitigation -Name processName.exe -Enable EnableExportAddressFilterPlus -EAFModules dllName1.dll,dllName2.dll
```

<a href="#t2" id="r2">\[2\]</a>: la auditoría de esta mitigación no está disponible mediante cmdlets de PowerShell.

## <a name="customize-the-notification"></a>Personalizar la notificación

Para obtener información sobre cómo personalizar la notificación cuando se desencadena una regla y se bloquea una aplicación o un archivo, consulte [Seguridad de Windows](/windows/security/threat-protection/windows-defender-security-center/windows-defender-security-center).

## <a name="see-also"></a>Consulte también

- [Evaluación de la protección contra vulnerabilidades de seguridad](evaluate-exploit-protection.md)
- [Configurar y auditar mitigaciones de protección contra vulnerabilidades de seguridad](customize-exploit-protection.md)
- [Importar, exportar e implementar configuraciones de protección de vulnerabilidades de seguridad](import-export-exploit-protection-emet-xml.md)
