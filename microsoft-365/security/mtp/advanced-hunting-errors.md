---
title: Control de errores en la búsqueda avanzada de Microsoft 365 defender
description: Comprender los errores mostrados al usar la búsqueda avanzada
keywords: caza avanzado, caza de amenazas, búsqueda de amenazas en el ciberespacio, protección contra amenazas de Microsoft, Microsoft 365, MTP, M365, búsqueda, consulta, telemetría, esquema, kusto, tiempo de espera, recursos, errores, error desconocido, límites, cuota, parámetro, asignación
search.product: eADQiWindows 10XVcnh
search.appverid: met150
ms.prod: microsoft-365-enterprise
ms.mktglfcycl: deploy
ms.sitesec: library
ms.pagetype: security
f1.keywords:
- NOCSH
ms.author: lomayor
author: lomayor
ms.localizationpriority: medium
manager: dansimp
audience: ITPro
ms.collection:
- M365-security-compliance
- m365initiative-m365-defender
ms.topic: article
ms.openlocfilehash: a5379db66034ecfe537f7d9effdd83f6c41bfd58
ms.sourcegitcommit: 815229e39a0f905d9f06717f00dc82e2a028fa7c
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/03/2020
ms.locfileid: "48846897"
---
# <a name="handle-advanced-hunting-errors"></a><span data-ttu-id="a9fe1-104">Controlar errores de búsqueda avanzada</span><span class="sxs-lookup"><span data-stu-id="a9fe1-104">Handle advanced hunting errors</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender.md)]


<span data-ttu-id="a9fe1-105">La búsqueda avanzada muestra errores para notificar errores de sintaxis y siempre que las consultas alcanzan [cuotas predefinidas y parámetros de uso](advanced-hunting-limits.md).</span><span class="sxs-lookup"><span data-stu-id="a9fe1-105">Advanced hunting displays errors to notify for syntax mistakes and whenever queries hit [predefined quotas and usage parameters](advanced-hunting-limits.md).</span></span> <span data-ttu-id="a9fe1-106">Consulte la tabla siguiente para obtener sugerencias sobre cómo resolver o evitar errores.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-106">Refer to the table below for tips on how to resolve or avoid errors.</span></span>

| <span data-ttu-id="a9fe1-107">Tipo de error</span><span class="sxs-lookup"><span data-stu-id="a9fe1-107">Error type</span></span> | <span data-ttu-id="a9fe1-108">Motivo</span><span class="sxs-lookup"><span data-stu-id="a9fe1-108">Cause</span></span> | <span data-ttu-id="a9fe1-109">Solución</span><span class="sxs-lookup"><span data-stu-id="a9fe1-109">Resolution</span></span> | <span data-ttu-id="a9fe1-110">Ejemplos de mensajes de error</span><span class="sxs-lookup"><span data-stu-id="a9fe1-110">Error message examples</span></span> |
|--|--|--|--|
| <span data-ttu-id="a9fe1-111">Errores de sintaxis</span><span class="sxs-lookup"><span data-stu-id="a9fe1-111">Syntax errors</span></span> | <span data-ttu-id="a9fe1-112">La consulta contiene nombres no reconocidos, incluidas las referencias a operadores inexistentes, columnas, funciones o tablas.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-112">The query contains unrecognized names, including references to nonexistent operators, columns, functions, or tables.</span></span> | <span data-ttu-id="a9fe1-113">Asegúrese de que las referencias a [operadores y funciones de Kusto](https://docs.microsoft.com/azure/data-explorer/kusto/query/) son correctas.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-113">Ensure references to [Kusto operators and functions](https://docs.microsoft.com/azure/data-explorer/kusto/query/) are correct.</span></span> <span data-ttu-id="a9fe1-114">Compruebe [el esquema](advanced-hunting-schema-tables.md) para ver las columnas, funciones y tablas de búsqueda avanzada correctas.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-114">Check [the schema](advanced-hunting-schema-tables.md) for the correct advanced hunting columns, functions, and tables.</span></span> <span data-ttu-id="a9fe1-115">Las cadenas de variable se encierran entre comillas para que se reconozcan.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-115">Enclose variable strings in quotes so they are recognized.</span></span> <span data-ttu-id="a9fe1-116">Mientras escribe las consultas, use las sugerencias de autocompletar de IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-116">While writing your queries, use the autocomplete suggestions from IntelliSense.</span></span> | `A recognition error occurred.` |
| <span data-ttu-id="a9fe1-117">Errores semánticos</span><span class="sxs-lookup"><span data-stu-id="a9fe1-117">Semantic errors</span></span> | <span data-ttu-id="a9fe1-118">Mientras que la consulta usa nombres válidos de operador, columna, función o tabla, hay errores en su estructura y lógica resultante.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-118">While the query uses valid operator, column, function, or table names, there are errors in its structure and resulting logic.</span></span> <span data-ttu-id="a9fe1-119">En algunos casos, la búsqueda avanzada identifica el operador específico que causó el error.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-119">In some cases, advanced hunting identifies the specific operator that caused the error.</span></span> | <span data-ttu-id="a9fe1-120">Compruebe si hay errores en la estructura de la consulta.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-120">Check for errors in the structure of query.</span></span> <span data-ttu-id="a9fe1-121">Consulte la [documentación de Kusto](https://docs.microsoft.com/azure/data-explorer/kusto/query/) para obtener instrucciones.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-121">Refer to [Kusto documentation](https://docs.microsoft.com/azure/data-explorer/kusto/query/) for guidance.</span></span> <span data-ttu-id="a9fe1-122">Mientras escribe las consultas, use las sugerencias de autocompletar de IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-122">While writing your queries, use the autocomplete suggestions from IntelliSense.</span></span> |  `'project' operator: Failed to resolve scalar expression named 'x'`|
| <span data-ttu-id="a9fe1-123">Tiempos</span><span class="sxs-lookup"><span data-stu-id="a9fe1-123">Timeouts</span></span> | <span data-ttu-id="a9fe1-124">Una consulta solo puede ejecutarse en un [período limitado antes](advanced-hunting-limits.md)de que se agote el tiempo de espera. Este error puede producirse con más frecuencia cuando se ejecutan consultas complejas.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-124">A query can only run within a [limited period before timing out](advanced-hunting-limits.md). This error can happen more frequently when running complex queries.</span></span> | [<span data-ttu-id="a9fe1-125">Optimizar la consulta</span><span class="sxs-lookup"><span data-stu-id="a9fe1-125">Optimize the query</span></span>](advanced-hunting-best-practices.md) | `Query exceeded the timeout period.` |
| <span data-ttu-id="a9fe1-126">Limitación de CPU</span><span class="sxs-lookup"><span data-stu-id="a9fe1-126">CPU throttling</span></span> | <span data-ttu-id="a9fe1-127">Las consultas en el mismo inquilino han superado los [recursos de CPU](advanced-hunting-limits.md) que se han asignado en función del tamaño del espacio empresarial.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-127">Queries in the same tenant have exceeded the [CPU resources](advanced-hunting-limits.md) that have been allocated based on tenant size.</span></span> | <span data-ttu-id="a9fe1-128">El servicio comprueba el uso de recursos de CPU cada 15 minutos y todos los días, y muestra advertencias después de que el uso supere el 10% de la cuota asignada.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-128">The service checks CPU resource usage every 15 minutes and daily and displays warnings after usage exceeds 10% of the allocated quota.</span></span> <span data-ttu-id="a9fe1-129">Si alcanza el 100% de uso, el servicio bloquea las consultas hasta después del siguiente ciclo diario o de 15 minutos.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-129">If you reach 100% utilization, the service blocks queries until after the next daily or 15-minute cycle.</span></span> [<span data-ttu-id="a9fe1-130">Optimizar las consultas para evitar el golpe de cuotas de CPU</span><span class="sxs-lookup"><span data-stu-id="a9fe1-130">Optimize your queries to avoid hitting CPU quotas</span></span>](advanced-hunting-best-practices.md) | - `This query used X% of your organization's allocated resources for the current 15 minutes.`<br>- `You have exceeded processing resources allocated to this tenant. You can run queries again in <duration>.` |
| <span data-ttu-id="a9fe1-131">Límite de tamaño de resultados superado</span><span class="sxs-lookup"><span data-stu-id="a9fe1-131">Result size limit exceeded</span></span>  | <span data-ttu-id="a9fe1-132">El tamaño agregado del conjunto de resultados de la consulta ha superado el tamaño máximo.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-132">The aggregate size of the result set for the query has exceeded the maximum size.</span></span> <span data-ttu-id="a9fe1-133">Este error puede producirse si el conjunto de resultados es tan grande que el truncamiento en el límite de 10.000-record no puede reducirlo a un tamaño aceptable.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-133">This error can occur if the result set is so large that truncation at the 10,000-record limit can't reduce it to an acceptable size.</span></span> <span data-ttu-id="a9fe1-134">Es más probable que se vean afectados por este error los resultados que tengan varias columnas con contenido de tamaño ajustable.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-134">Results that have multiple columns with sizable content are more likely to be impacted by this error.</span></span> | [<span data-ttu-id="a9fe1-135">Optimizar la consulta</span><span class="sxs-lookup"><span data-stu-id="a9fe1-135">Optimize the query</span></span>](advanced-hunting-best-practices.md) | `Result size limit exceeded. Use "summarize" to aggregate results, "project" to drop uninteresting columns, or "take" to truncate results.` |
| <span data-ttu-id="a9fe1-136">Consumo excesivo de recursos</span><span class="sxs-lookup"><span data-stu-id="a9fe1-136">Excessive resource consumption</span></span> | <span data-ttu-id="a9fe1-137">La consulta ha consumido cantidades excesivas de recursos y se ha detenido para completarse.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-137">The query has consumed excessive amounts of resources and has been stopped from completing.</span></span> <span data-ttu-id="a9fe1-138">En algunos casos, la búsqueda avanzada identifica el operador específico que no se optimizó.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-138">In some cases, advanced hunting identifies the specific operator that wasn't optimized.</span></span> | [<span data-ttu-id="a9fe1-139">Optimizar la consulta</span><span class="sxs-lookup"><span data-stu-id="a9fe1-139">Optimize the query</span></span>](advanced-hunting-best-practices.md) | -`Query stopped due to excessive resource consumption.`<br>-`Query stopped. Adjust use of the <operator name> operator to avoid excessive resource consumption.` |
| <span data-ttu-id="a9fe1-140">Errores desconocidos</span><span class="sxs-lookup"><span data-stu-id="a9fe1-140">Unknown errors</span></span> | <span data-ttu-id="a9fe1-141">Se produjo un error en la consulta debido a un motivo desconocido.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-141">The query failed because of an unknown reason.</span></span> | <span data-ttu-id="a9fe1-142">Intente volver a ejecutar la consulta.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-142">Try running the query again.</span></span> <span data-ttu-id="a9fe1-143">Póngase en contacto con Microsoft a través del portal si las consultas continúan devolviendo errores desconocidos.</span><span class="sxs-lookup"><span data-stu-id="a9fe1-143">Contact Microsoft through the portal if queries continue to return unknown errors.</span></span> | `An unexpected error occurred during query execution. Please try again in a few minutes.`

## <a name="related-topics"></a><span data-ttu-id="a9fe1-144">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="a9fe1-144">Related topics</span></span>
- [<span data-ttu-id="a9fe1-145">Procedimientos recomendados para la búsqueda avanzada</span><span class="sxs-lookup"><span data-stu-id="a9fe1-145">Advanced hunting best practices</span></span>](advanced-hunting-best-practices.md)
- [<span data-ttu-id="a9fe1-146">Parámetros de uso y cuotas</span><span class="sxs-lookup"><span data-stu-id="a9fe1-146">Quotas and usage parameters</span></span>](advanced-hunting-limits.md)
- [<span data-ttu-id="a9fe1-147">Entender el esquema</span><span class="sxs-lookup"><span data-stu-id="a9fe1-147">Understand the schema</span></span>](advanced-hunting-schema-tables.md)
- [<span data-ttu-id="a9fe1-148">Información general sobre el lenguaje de consulta Kusto</span><span class="sxs-lookup"><span data-stu-id="a9fe1-148">Kusto Query Language overview</span></span>](https://docs.microsoft.com/azure/data-explorer/kusto/query/)
