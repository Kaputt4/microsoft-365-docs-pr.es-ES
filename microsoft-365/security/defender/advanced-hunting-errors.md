---
title: Controlar errores en la búsqueda avanzada de Microsoft 365 Defender
description: Comprender los errores que se muestran al usar la búsqueda avanzada
keywords: búsqueda avanzada, búsqueda de amenazas, búsqueda de amenazas cibernéticas, protección contra amenazas de Microsoft, microsoft 365, mtp, m365, búsqueda, consulta, telemetría, esquema, kusto, tiempo de espera, recursos, errores, error desconocido, límites, cuota, parámetro, asignación
search.product: eADQiWindows 10XVcnh
search.appverid: met150
ms.prod: m365-security
ms.mktglfcycl: deploy
ms.sitesec: library
ms.pagetype: security
f1.keywords:
- NOCSH
ms.author: lomayor
author: lomayor
localization_priority: Normal
manager: dansimp
audience: ITPro
ms.collection:
- M365-security-compliance
- m365initiative-m365-defender
ms.topic: article
ms.technology: m365d
ms.openlocfilehash: e2c10474db5cbfc63e098ac1c2107dd6c29500e9
ms.sourcegitcommit: 956176ed7c8b8427fdc655abcd1709d86da9447e
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 03/23/2021
ms.locfileid: "51074803"
---
# <a name="handle-advanced-hunting-errors"></a><span data-ttu-id="d1abf-104">Controlar errores de búsqueda avanzados</span><span class="sxs-lookup"><span data-stu-id="d1abf-104">Handle advanced hunting errors</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender.md)]


<span data-ttu-id="d1abf-105">La búsqueda avanzada muestra errores para notificar errores de sintaxis y siempre que las consultas tocan [cuotas predefinidas y parámetros de uso](advanced-hunting-limits.md).</span><span class="sxs-lookup"><span data-stu-id="d1abf-105">Advanced hunting displays errors to notify for syntax mistakes and whenever queries hit [predefined quotas and usage parameters](advanced-hunting-limits.md).</span></span> <span data-ttu-id="d1abf-106">Consulte la tabla siguiente para obtener sugerencias sobre cómo resolver o evitar errores.</span><span class="sxs-lookup"><span data-stu-id="d1abf-106">Refer to the table below for tips on how to resolve or avoid errors.</span></span>

| <span data-ttu-id="d1abf-107">Tipo de error</span><span class="sxs-lookup"><span data-stu-id="d1abf-107">Error type</span></span> | <span data-ttu-id="d1abf-108">Motivo</span><span class="sxs-lookup"><span data-stu-id="d1abf-108">Cause</span></span> | <span data-ttu-id="d1abf-109">Solución</span><span class="sxs-lookup"><span data-stu-id="d1abf-109">Resolution</span></span> | <span data-ttu-id="d1abf-110">Ejemplos de mensajes de error</span><span class="sxs-lookup"><span data-stu-id="d1abf-110">Error message examples</span></span> |
|--|--|--|--|
| <span data-ttu-id="d1abf-111">Errores de sintaxis</span><span class="sxs-lookup"><span data-stu-id="d1abf-111">Syntax errors</span></span> | <span data-ttu-id="d1abf-112">La consulta contiene nombres no reconocidos, incluidas referencias a operadores, columnas, funciones o tablas inexistentes.</span><span class="sxs-lookup"><span data-stu-id="d1abf-112">The query contains unrecognized names, including references to nonexistent operators, columns, functions, or tables.</span></span> | <span data-ttu-id="d1abf-113">Asegúrese de que las [referencias a operadores y funciones de Kusto](/azure/data-explorer/kusto/query/) sean correctas.</span><span class="sxs-lookup"><span data-stu-id="d1abf-113">Ensure references to [Kusto operators and functions](/azure/data-explorer/kusto/query/) are correct.</span></span> <span data-ttu-id="d1abf-114">Compruebe [el esquema de](advanced-hunting-schema-tables.md) las columnas, funciones y tablas de búsqueda avanzadas correctas.</span><span class="sxs-lookup"><span data-stu-id="d1abf-114">Check [the schema](advanced-hunting-schema-tables.md) for the correct advanced hunting columns, functions, and tables.</span></span> <span data-ttu-id="d1abf-115">Escriba las cadenas de variables entre comillas para que se reconozcan.</span><span class="sxs-lookup"><span data-stu-id="d1abf-115">Enclose variable strings in quotes so they are recognized.</span></span> <span data-ttu-id="d1abf-116">Mientras escribe las consultas, use las sugerencias de autocompletar de IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="d1abf-116">While writing your queries, use the autocomplete suggestions from IntelliSense.</span></span> | `A recognition error occurred.` |
| <span data-ttu-id="d1abf-117">Errores semánticos</span><span class="sxs-lookup"><span data-stu-id="d1abf-117">Semantic errors</span></span> | <span data-ttu-id="d1abf-118">Aunque la consulta usa nombres de operador, columna, función o tabla válidos, hay errores en su estructura y lógica resultante.</span><span class="sxs-lookup"><span data-stu-id="d1abf-118">While the query uses valid operator, column, function, or table names, there are errors in its structure and resulting logic.</span></span> <span data-ttu-id="d1abf-119">En algunos casos, la búsqueda avanzada identifica el operador específico que provocó el error.</span><span class="sxs-lookup"><span data-stu-id="d1abf-119">In some cases, advanced hunting identifies the specific operator that caused the error.</span></span> | <span data-ttu-id="d1abf-120">Compruebe si hay errores en la estructura de la consulta.</span><span class="sxs-lookup"><span data-stu-id="d1abf-120">Check for errors in the structure of query.</span></span> <span data-ttu-id="d1abf-121">Consulte la [documentación de Kusto](/azure/data-explorer/kusto/query/) para obtener instrucciones.</span><span class="sxs-lookup"><span data-stu-id="d1abf-121">Refer to [Kusto documentation](/azure/data-explorer/kusto/query/) for guidance.</span></span> <span data-ttu-id="d1abf-122">Mientras escribe las consultas, use las sugerencias de autocompletar de IntelliSense.</span><span class="sxs-lookup"><span data-stu-id="d1abf-122">While writing your queries, use the autocomplete suggestions from IntelliSense.</span></span> |  `'project' operator: Failed to resolve scalar expression named 'x'`|
| <span data-ttu-id="d1abf-123">Tiempos de espera</span><span class="sxs-lookup"><span data-stu-id="d1abf-123">Timeouts</span></span> | <span data-ttu-id="d1abf-124">Una consulta solo puede ejecutarse en un [período limitado antes de que se desatrase el tiempo de espera](advanced-hunting-limits.md). Este error puede ocurrir con más frecuencia al ejecutar consultas complejas.</span><span class="sxs-lookup"><span data-stu-id="d1abf-124">A query can only run within a [limited period before timing out](advanced-hunting-limits.md). This error can happen more frequently when running complex queries.</span></span> | [<span data-ttu-id="d1abf-125">Optimizar la consulta</span><span class="sxs-lookup"><span data-stu-id="d1abf-125">Optimize the query</span></span>](advanced-hunting-best-practices.md) | `Query exceeded the timeout period.` |
| <span data-ttu-id="d1abf-126">Limitación de CPU</span><span class="sxs-lookup"><span data-stu-id="d1abf-126">CPU throttling</span></span> | <span data-ttu-id="d1abf-127">Las consultas del mismo inquilino han superado los recursos [de CPU](advanced-hunting-limits.md) que se han asignado en función del tamaño del espacio empresarial.</span><span class="sxs-lookup"><span data-stu-id="d1abf-127">Queries in the same tenant have exceeded the [CPU resources](advanced-hunting-limits.md) that have been allocated based on tenant size.</span></span> | <span data-ttu-id="d1abf-128">El servicio comprueba el uso de recursos de CPU cada 15 minutos y diariamente y muestra advertencias después de que el uso supere el 10 % de la cuota asignada.</span><span class="sxs-lookup"><span data-stu-id="d1abf-128">The service checks CPU resource usage every 15 minutes and daily and displays warnings after usage exceeds 10% of the allocated quota.</span></span> <span data-ttu-id="d1abf-129">Si alcanza el 100 % de uso, el servicio bloquea las consultas hasta después del siguiente ciclo diario o de 15 minutos.</span><span class="sxs-lookup"><span data-stu-id="d1abf-129">If you reach 100% utilization, the service blocks queries until after the next daily or 15-minute cycle.</span></span> [<span data-ttu-id="d1abf-130">Optimizar las consultas para evitar alcanzar cuotas de CPU</span><span class="sxs-lookup"><span data-stu-id="d1abf-130">Optimize your queries to avoid hitting CPU quotas</span></span>](advanced-hunting-best-practices.md) | - `This query used X% of your organization's allocated resources for the current 15 minutes.`<br>- `You have exceeded processing resources allocated to this tenant. You can run queries again in <duration>.` |
| <span data-ttu-id="d1abf-131">Límite de tamaño de resultados excedido</span><span class="sxs-lookup"><span data-stu-id="d1abf-131">Result size limit exceeded</span></span>  | <span data-ttu-id="d1abf-132">El tamaño agregado del conjunto de resultados de la consulta ha excedido el tamaño máximo.</span><span class="sxs-lookup"><span data-stu-id="d1abf-132">The aggregate size of the result set for the query has exceeded the maximum size.</span></span> <span data-ttu-id="d1abf-133">Este error puede producirse si el conjunto de resultados es tan grande que el truncamiento en el límite de 10.000 registros no puede reducirlo a un tamaño aceptable.</span><span class="sxs-lookup"><span data-stu-id="d1abf-133">This error can occur if the result set is so large that truncation at the 10,000-record limit can't reduce it to an acceptable size.</span></span> <span data-ttu-id="d1abf-134">Es más probable que los resultados que tienen varias columnas con contenido que se puedan ver afectados por este error.</span><span class="sxs-lookup"><span data-stu-id="d1abf-134">Results that have multiple columns with sizable content are more likely to be impacted by this error.</span></span> | [<span data-ttu-id="d1abf-135">Optimizar la consulta</span><span class="sxs-lookup"><span data-stu-id="d1abf-135">Optimize the query</span></span>](advanced-hunting-best-practices.md) | `Result size limit exceeded. Use "summarize" to aggregate results, "project" to drop uninteresting columns, or "take" to truncate results.` |
| <span data-ttu-id="d1abf-136">Consumo excesivo de recursos</span><span class="sxs-lookup"><span data-stu-id="d1abf-136">Excessive resource consumption</span></span> | <span data-ttu-id="d1abf-137">La consulta ha consumido cantidades excesivas de recursos y se ha detenido de completarse.</span><span class="sxs-lookup"><span data-stu-id="d1abf-137">The query has consumed excessive amounts of resources and has been stopped from completing.</span></span> <span data-ttu-id="d1abf-138">En algunos casos, la búsqueda avanzada identifica el operador específico que no se ha optimizado.</span><span class="sxs-lookup"><span data-stu-id="d1abf-138">In some cases, advanced hunting identifies the specific operator that wasn't optimized.</span></span> | [<span data-ttu-id="d1abf-139">Optimizar la consulta</span><span class="sxs-lookup"><span data-stu-id="d1abf-139">Optimize the query</span></span>](advanced-hunting-best-practices.md) | -`Query stopped due to excessive resource consumption.`<br>-`Query stopped. Adjust use of the <operator name> operator to avoid excessive resource consumption.` |
| <span data-ttu-id="d1abf-140">Errores desconocidos</span><span class="sxs-lookup"><span data-stu-id="d1abf-140">Unknown errors</span></span> | <span data-ttu-id="d1abf-141">Error en la consulta debido a un motivo desconocido.</span><span class="sxs-lookup"><span data-stu-id="d1abf-141">The query failed because of an unknown reason.</span></span> | <span data-ttu-id="d1abf-142">Intente ejecutar la consulta de nuevo.</span><span class="sxs-lookup"><span data-stu-id="d1abf-142">Try running the query again.</span></span> <span data-ttu-id="d1abf-143">Póngase en contacto con Microsoft a través del portal si las consultas siguen devolviendo errores desconocidos.</span><span class="sxs-lookup"><span data-stu-id="d1abf-143">Contact Microsoft through the portal if queries continue to return unknown errors.</span></span> | `An unexpected error occurred during query execution. Please try again in a few minutes.`

## <a name="related-topics"></a><span data-ttu-id="d1abf-144">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="d1abf-144">Related topics</span></span>
- [<span data-ttu-id="d1abf-145">Procedimientos recomendados de búsqueda avanzada</span><span class="sxs-lookup"><span data-stu-id="d1abf-145">Advanced hunting best practices</span></span>](advanced-hunting-best-practices.md)
- [<span data-ttu-id="d1abf-146">Parámetros de uso y cuotas</span><span class="sxs-lookup"><span data-stu-id="d1abf-146">Quotas and usage parameters</span></span>](advanced-hunting-limits.md)
- [<span data-ttu-id="d1abf-147">Entender el esquema</span><span class="sxs-lookup"><span data-stu-id="d1abf-147">Understand the schema</span></span>](advanced-hunting-schema-tables.md)
- [<span data-ttu-id="d1abf-148">Información general sobre kusto query language</span><span class="sxs-lookup"><span data-stu-id="d1abf-148">Kusto Query Language overview</span></span>](/azure/data-explorer/kusto/query/)