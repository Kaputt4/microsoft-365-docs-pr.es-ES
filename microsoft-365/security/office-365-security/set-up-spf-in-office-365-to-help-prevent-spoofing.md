---
title: Configurar SPF para ayudar a evitar la suplantación de identidad
f1.keywords:
- CSH
ms.author: tracyp
author: MSFTTracyP
manager: dansimp
ms.date: 11/21/2019
audience: ITPro
ms.topic: how-to
ms.service: O365-seccomp
localization_priority: Priority
search.appverid:
- MET150
ms.assetid: 71373291-83d2-466f-86ea-fc61493743a6
ms.collection:
- M365-security-compliance
ms.custom:
- seo-marvel-apr2020
description: Aprenda a actualizar un registro de Servicio de nombres de dominio (DNS) para usar el marco de directivas de remitente (SPF) con su dominio personalizado en Office 365.
ms.openlocfilehash: a6cd2a0cf60812bb874c1be63fb2d294cda6d6aa
ms.sourcegitcommit: 31be333178b934c519f419656f4c3a53e1beffdc
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 01/16/2021
ms.locfileid: "49881722"
---
# <a name="set-up-spf-to-help-prevent-spoofing"></a><span data-ttu-id="20c33-103">Configurar SPF para ayudar a evitar la suplantación de identidad</span><span class="sxs-lookup"><span data-stu-id="20c33-103">Set up SPF to help prevent spoofing</span></span>

[!INCLUDE [Microsoft 365 Defender rebranding](../includes/microsoft-defender-for-office.md)]

- [<span data-ttu-id="20c33-104">Requisitos previos <a name="UpdateSPFTXT"></a></span><span class="sxs-lookup"><span data-stu-id="20c33-104">Prerequisites <a name="UpdateSPFTXT"></a></span></span>](#updating-your-spf-txt-record-for-office-365-a-nameUpdateSPFTXT)
- [<span data-ttu-id="20c33-105">Crear o actualizar el registro SPF TXT de Office 365 <a name="CreateUpdateSPFTXT"></a></span><span class="sxs-lookup"><span data-stu-id="20c33-105">Create / update your SPF TXT record for Office 365 <a name="CreateUpdateSPFTXT"></a></span></span>](#to-create-or-update-your-spf-txt-record-a-namecreateupdatespftxta)
    - [<span data-ttu-id="20c33-106">¿Cómo se tratan los subdominios? <a name="SPFandSubdomains"></a></span><span class="sxs-lookup"><span data-stu-id="20c33-106">How to handle subdomains? <a name="SPFandSubdomains"></a></span></span>](#how-to-handle-subdomains-a-namespfandsubdomainsa)
- [<span data-ttu-id="20c33-107">Solución de problemas de SPF y procedimientos recomendados <a name="TshootingSPF"></a></span><span class="sxs-lookup"><span data-stu-id="20c33-107">SPF troubleshooting and best practices <a name="TshootingSPF"></a></span></span>](#next-steps-after-you-set-up-spf-for-office-365-a-nametshootingspfa)
- [<span data-ttu-id="20c33-108">Ejemplos de SPF avanzados <a name="AdvancedSPFexs"></a></span><span class="sxs-lookup"><span data-stu-id="20c33-108">Advanced SPF examples <a name="AdvancedSPFexs"></a></span></span>](#more-information-about-spf-a-nameadvancedspfexsa)

<span data-ttu-id="20c33-109">En este artículo se describe cómo actualizar un registro del servicio de nombres de dominio (DNS) para que pueda usar la autenticación de correo electrónico del Marco de directivas de remitente (SPF) con su dominio personalizado en Office 365.</span><span class="sxs-lookup"><span data-stu-id="20c33-109">This article describes how to update an Domain Name Service (DNS) record so that you can use Sender Policy Framework (SPF)  email authentication with your custom domain in Office 365.</span></span>

<span data-ttu-id="20c33-110">SPF permite validar el correo electrónico saliente enviado desde su dominio personalizado.</span><span class="sxs-lookup"><span data-stu-id="20c33-110">Using SPF helps to validate outbound email sent from your custom domain.</span></span> <span data-ttu-id="20c33-111">Es un primer paso para configurar otros métodos de autenticación de correo electrónico recomendados DMARC y DKIM (dos métodos de autenticación de correo electrónico compatibles con Office 365).</span><span class="sxs-lookup"><span data-stu-id="20c33-111">It's a first step in setting up other recommended email authentication methods DMARC and DKIM (two further email authentication methods supported in Office 365).</span></span>

## <a name="updating-your-spf-txt-record-for-office-365"></a><span data-ttu-id="20c33-112">Actualizar el registro TXT de SPF para Office 365 <a name="UpdateSPFTXT"></a></span><span class="sxs-lookup"><span data-stu-id="20c33-112">Updating your SPF TXT record for Office 365 <a name="UpdateSPFTXT"></a></span></span>

> [!IMPORTANT]
> <span data-ttu-id="20c33-113">Si es administrador de una **pequeña empresa** o está familiarizado con las direcciones IP o la configuración de DNS, llame a su registrador de dominios de Internet (p. ej.</span><span class="sxs-lookup"><span data-stu-id="20c33-113">If you are a **small business**, or are unfamiliar with IP addresses or DNS configuration, call your Internet domain registrar (ex.</span></span> <span data-ttu-id="20c33-114">GoDaddy, Bluehost y web.com) para solicitar ayuda con la configuración de DNS de SPF (y cualquier otro método de autenticación de correo electrónico).</span><span class="sxs-lookup"><span data-stu-id="20c33-114">GoDaddy, Bluehost, web.com) to ask for help with DNS configuration of SPF (and any other email authentication method).</span></span> <span data-ttu-id="20c33-115">*Además*, si no ha comprado o no usa una dirección URL personalizada (es decir, la dirección URL que su usuario y sus clientes usan para llegar a Office 365 termina en **onmicrosoft.com**), se ha configurado SPF para usted en el servicio de Office 365.</span><span class="sxs-lookup"><span data-stu-id="20c33-115">*Also*, if you haven't bought, or don't use a custom URL (in other words the URL you and your customers browse to reach Office 365 ends in **onmicrosoft.com**), SPF has been set up for you in the Office 365 service.</span></span> <span data-ttu-id="20c33-116">En ese caso, no es necesario realizar ningún paso adicional.</span><span class="sxs-lookup"><span data-stu-id="20c33-116">No further steps are required in that case.</span></span> <span data-ttu-id="20c33-117">Gracias por leer.</span><span class="sxs-lookup"><span data-stu-id="20c33-117">Thanks for reading.</span></span>

<span data-ttu-id="20c33-118">Antes de actualizar el registro TXT en DNS, debe recopilar cierta información necesaria para hacer el registro.</span><span class="sxs-lookup"><span data-stu-id="20c33-118">Before you update the TXT record in DNS, you need to gather some information needed to make the record.</span></span> <span data-ttu-id="20c33-119">Para obtener ejemplos avanzados y explicaciones más detalladas sobre la sintaxis admitida de SPF, consulte [Cómo funciona SPF para evitar la suplantación de identidad y el phishing en Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#HowSPFWorks).</span><span class="sxs-lookup"><span data-stu-id="20c33-119">For advanced examples and a more detailed discussion about supported SPF syntax, see [How SPF works to prevent spoofing and phishing in Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#HowSPFWorks).</span></span>

<span data-ttu-id="20c33-120">Recopile esta información:</span><span class="sxs-lookup"><span data-stu-id="20c33-120">Gather this information:</span></span>

- <span data-ttu-id="20c33-121">El registro TXT de SPF actual para su dominio personalizado, si existe.</span><span class="sxs-lookup"><span data-stu-id="20c33-121">The current SPF TXT record for your custom domain, if one exists.</span></span> <span data-ttu-id="20c33-122">Para obtener instrucciones, consulte [Recopilar la información necesaria para crear registros DNS de Office 365](https://docs.microsoft.com/microsoft-365/admin/get-help-with-domains/information-for-dns-records).</span><span class="sxs-lookup"><span data-stu-id="20c33-122">For instructions, see [Gather the information you need to create Office 365 DNS records](https://docs.microsoft.com/microsoft-365/admin/get-help-with-domains/information-for-dns-records).</span></span>

- <span data-ttu-id="20c33-123">Vaya a los servidores de mensajería y encuentre las direcciones IP externas (necesarias en todos los servidores de mensajería locales).</span><span class="sxs-lookup"><span data-stu-id="20c33-123">Go to your messaging server(s) and find out the External IP addresses (needed from all on-premises messaging servers).</span></span> <span data-ttu-id="20c33-124">Por ejemplo, **131.107.2.200**.</span><span class="sxs-lookup"><span data-stu-id="20c33-124">For example, **131.107.2.200**.</span></span>

- <span data-ttu-id="20c33-p106">Nombres de dominio que se usarán para todos los dominios de terceros que necesita incluir en el registro TXT de SPF. Algunos proveedores de correo masivo tienen configurados subdominios para sus clientes. Por ejemplo, la empresa MailChimp tiene configurado **servers.mcsv.net**.</span><span class="sxs-lookup"><span data-stu-id="20c33-p106">Domain names to use for all third-party domains that you need to include in your SPF TXT record. Some bulk mail providers have set up subdomains to use for their customers. For example, the company MailChimp has set up **servers.mcsv.net**.</span></span>

- <span data-ttu-id="20c33-128">Determine qué regla de cumplimiento quiere usar para el registro TXT de SPF.</span><span class="sxs-lookup"><span data-stu-id="20c33-128">Figure out what enforcement rule you want to use for your SPF TXT record.</span></span> <span data-ttu-id="20c33-129">La regla recomendada es **-todos**.</span><span class="sxs-lookup"><span data-stu-id="20c33-129">The **-all** rule is recommended.</span></span> <span data-ttu-id="20c33-130">Para obtener más información sobre otras opciones de sintaxis, vea [Sintaxis del registro TXT de SPF para Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#SPFSyntaxO365).</span><span class="sxs-lookup"><span data-stu-id="20c33-130">For detailed information about other syntax options, see [SPF TXT record syntax for Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#SPFSyntaxO365).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="20c33-131">Para poder utilizar un dominio personalizado, Office 365 requiere que agregue un registro TXT de marco de directivas de remitente (SPF) en su registro DNS para ayudar a evitar la suplantación de identidad.</span><span class="sxs-lookup"><span data-stu-id="20c33-131">In order to use a custom domain, Office 365 requires that you add a Sender Policy Framework (SPF) TXT record to your DNS record to help prevent spoofing.</span></span>

## <a name="create-or-update-your-spf-txt-record"></a><span data-ttu-id="20c33-132">Crear o actualizar el registro TXT de SPF<a name="CreateUpdateSPFTXT"></a></span><span class="sxs-lookup"><span data-stu-id="20c33-132">Create or update your SPF TXT record <a name="CreateUpdateSPFTXT"></a></span></span>

1. <span data-ttu-id="20c33-133">Asegúrese de que está familiarizado con la sintaxis SFP de la siguiente tabla.</span><span class="sxs-lookup"><span data-stu-id="20c33-133">Ensure that you're familiar with the SPF syntax in the following table.</span></span>

   ****

   |<span data-ttu-id="20c33-134">Elemento</span><span class="sxs-lookup"><span data-stu-id="20c33-134">Element</span></span>|<span data-ttu-id="20c33-135">Si usa...</span><span class="sxs-lookup"><span data-stu-id="20c33-135">If you're using...</span></span>|<span data-ttu-id="20c33-136">¿Es común para los clientes?</span><span class="sxs-lookup"><span data-stu-id="20c33-136">Common for customers?</span></span>|<span data-ttu-id="20c33-137">Agregue esto...</span><span class="sxs-lookup"><span data-stu-id="20c33-137">Add this...</span></span>|
   |---|---|---|---|
   |<span data-ttu-id="20c33-138">1</span><span class="sxs-lookup"><span data-stu-id="20c33-138">1</span></span>|<span data-ttu-id="20c33-139">Cualquier sistema de correo electrónico (obligatorio)</span><span class="sxs-lookup"><span data-stu-id="20c33-139">Any email system (required)</span></span>|<span data-ttu-id="20c33-p108">Común. Todos los registros TXT de SPF comienzan con este valor</span><span class="sxs-lookup"><span data-stu-id="20c33-p108">Common. All SPF TXT records start with this value</span></span>|`v=spf1`|
   |<span data-ttu-id="20c33-142">2</span><span class="sxs-lookup"><span data-stu-id="20c33-142">2</span></span>|<span data-ttu-id="20c33-143">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="20c33-143">Exchange Online</span></span>|<span data-ttu-id="20c33-144">Común</span><span class="sxs-lookup"><span data-stu-id="20c33-144">Common</span></span>|`include:spf.protection.outlook.com`|
   |<span data-ttu-id="20c33-145">3</span><span class="sxs-lookup"><span data-stu-id="20c33-145">3</span></span>|<span data-ttu-id="20c33-146">Solo Exchange Online dedicado</span><span class="sxs-lookup"><span data-stu-id="20c33-146">Exchange Online dedicated only</span></span>|<span data-ttu-id="20c33-147">No es común</span><span class="sxs-lookup"><span data-stu-id="20c33-147">Not common</span></span>|`ip4:23.103.224.0/19` <br> `ip4:206.191.224.0/19` <br> `ip4:40.103.0.0/16` <br> `include:spf.protection.outlook.com`|
   |<span data-ttu-id="20c33-148">4</span><span class="sxs-lookup"><span data-stu-id="20c33-148">4</span></span>|<span data-ttu-id="20c33-149">Solo para Office 365 Alemania y Microsoft Cloud Alemania</span><span class="sxs-lookup"><span data-stu-id="20c33-149">Office 365 Germany, Microsoft Cloud Germany only</span></span>|<span data-ttu-id="20c33-150">No es común</span><span class="sxs-lookup"><span data-stu-id="20c33-150">Not common</span></span>|`include:spf.protection.outlook.de`|
   |<span data-ttu-id="20c33-151">5</span><span class="sxs-lookup"><span data-stu-id="20c33-151">5</span></span>|<span data-ttu-id="20c33-152">Sistema de correo electrónico de terceros</span><span class="sxs-lookup"><span data-stu-id="20c33-152">Third-party email system</span></span>|<span data-ttu-id="20c33-153">No es común</span><span class="sxs-lookup"><span data-stu-id="20c33-153">Not common</span></span>|`include:<domain_name>` <p> <span data-ttu-id="20c33-154">\<domain_name\> es el dominio del sistema de correo electrónico de terceros.</span><span class="sxs-lookup"><span data-stu-id="20c33-154">\<domain_name\> is the domain of the third party email system.</span></span>|
   |<span data-ttu-id="20c33-155">6</span><span class="sxs-lookup"><span data-stu-id="20c33-155">6</span></span>|<span data-ttu-id="20c33-p109">Sistema de correo local. Por ejemplo, Exchange Online Protection y otro sistema de correo electrónico</span><span class="sxs-lookup"><span data-stu-id="20c33-p109">On-premises email system. For example, Exchange Online Protection plus another email system</span></span>|<span data-ttu-id="20c33-158">No es común</span><span class="sxs-lookup"><span data-stu-id="20c33-158">Not common</span></span>|<span data-ttu-id="20c33-159">Use uno de estos para cada sistema de correo adicional:</span><span class="sxs-lookup"><span data-stu-id="20c33-159">Use one of these for each additional mail system:</span></span> <p> `ip4:<IP_address>` <br> `ip6:<IP_address>` <br> `include:<domain_name>` <p> <span data-ttu-id="20c33-160">\<IP_address\> y \<domain_name\> son la dirección IP y el dominio del otro sistema de correo que envía correos en nombre de su dominio.</span><span class="sxs-lookup"><span data-stu-id="20c33-160">\<IP_address\> and \<domain_name\> are the IP address and domain of the other email system that sends mail on behalf of your domain.</span></span>|
   |<span data-ttu-id="20c33-161">7</span><span class="sxs-lookup"><span data-stu-id="20c33-161">7</span></span>|<span data-ttu-id="20c33-162">Cualquier sistema de correo electrónico (obligatorio)</span><span class="sxs-lookup"><span data-stu-id="20c33-162">Any email system (required)</span></span>|<span data-ttu-id="20c33-p110">Común. Todos los registros TXT de SPF acaban con este valor</span><span class="sxs-lookup"><span data-stu-id="20c33-p110">Common. All SPF TXT records end with this value</span></span>|`<enforcement rule>` <p> <span data-ttu-id="20c33-165">Puede ser uno de varios valores.</span><span class="sxs-lookup"><span data-stu-id="20c33-165">This can be one of several values.</span></span> <span data-ttu-id="20c33-166">Recomendamos el valor `-all`.</span><span class="sxs-lookup"><span data-stu-id="20c33-166">We recommend the value `-all`.</span></span>|
   |

2. <span data-ttu-id="20c33-167">Si todavía no lo ha hecho, para formar el registro TXT de SPF, use la sintaxis de la tabla.</span><span class="sxs-lookup"><span data-stu-id="20c33-167">If you haven't already done so, form your SPF TXT record by using the syntax from the table.</span></span>

   <span data-ttu-id="20c33-168">Por ejemplo, si está completamente hospedado en Office 365, es decir, no tiene ningún servidor de correo local, el registro TXT de SPF incluiría las filas 1, 2 y 7 y tendría este aspecto:</span><span class="sxs-lookup"><span data-stu-id="20c33-168">For example, if you are fully-hosted in Office 365, that is, you have no on-premises mail servers, your SPF TXT record would include rows 1, 2, and 7 and would look like this:</span></span>

   ```text
   v=spf1 include:spf.protection.outlook.com -all
   ```

   <span data-ttu-id="20c33-169">Este es el registro TXT de SPF más común.</span><span class="sxs-lookup"><span data-stu-id="20c33-169">This is the most common SPF TXT record.</span></span> <span data-ttu-id="20c33-170">Este registro funciona para casi todos los usuarios, independientemente de si su centro de datos de Microsoft se encuentra en los Estados Unidos, en Europa (incluyendo Alemania) o en otra ubicación.</span><span class="sxs-lookup"><span data-stu-id="20c33-170">This record works for just about everyone, regardless of whether your Microsoft datacenter is located in the United States, or in Europe (including Germany), or in another location.</span></span>

   <span data-ttu-id="20c33-171">Sin embargo, si ha adquirido Office 365 Alemania, parte de la nube de Microsoft Alemania, debe utilizar la instrucción include de la línea 4 en lugar de la línea 2.</span><span class="sxs-lookup"><span data-stu-id="20c33-171">However, if you have purchased Office 365 Germany, part of Microsoft Cloud Germany, you should use the include statement from line 4 instead of line 2.</span></span> <span data-ttu-id="20c33-172">Por ejemplo, si está completamente hospedado en Office 365 Alemania, es decir, no tiene ningún servidor de correo local, el registro TXT de SPF incluiría las filas 1, 4 y 7 y tendría este aspecto:</span><span class="sxs-lookup"><span data-stu-id="20c33-172">For example, if you are fully-hosted in Office 365 Germany, that is, you have no on-premises mail servers, your SPF TXT record would include rows 1, 4, and 7 and would look like this:</span></span>

   ```text
   v=spf1 include:spf.protection.outlook.de -all
   ```

   <span data-ttu-id="20c33-173">Si ya ha implementado Office 365 y ha configurado sus registros SPF TXT para su dominio personalizado y va a migrar a Office 365 Alemania, debe actualizar el registro SPF TXT.</span><span class="sxs-lookup"><span data-stu-id="20c33-173">If you're already deployed in Office 365 and have set up your SPF TXT records for your custom domain, and you're migrating to Office 365 Germany, you need to update your SPF TXT record.</span></span> <span data-ttu-id="20c33-174">Para hacerlo, cambie `include:spf.protection.outlook.com` a `include:spf.protection.outlook.de`.</span><span class="sxs-lookup"><span data-stu-id="20c33-174">To do this, change `include:spf.protection.outlook.com` to `include:spf.protection.outlook.de`.</span></span>

3. <span data-ttu-id="20c33-175">Una vez que ha formado el registro TXT de SPF, debe actualizar el registro en DNS.</span><span class="sxs-lookup"><span data-stu-id="20c33-175">Once you have formed your SPF TXT record, you need to update the record in DNS.</span></span> <span data-ttu-id="20c33-176">Solo puede tener un registro TXT de SPF para un dominio.</span><span class="sxs-lookup"><span data-stu-id="20c33-176">You can only have one SPF TXT record for a domain.</span></span> <span data-ttu-id="20c33-177">Si existe un registro TXT de SPF, en vez de agregar un registro nuevo, debe actualizar el registro existente.</span><span class="sxs-lookup"><span data-stu-id="20c33-177">If an SPF TXT record exists, instead of adding a new record, you need to update the existing record.</span></span> <span data-ttu-id="20c33-178">Vaya a [Crear registros DNS para Office 365 al administrar los registros DNS](https://docs.microsoft.com/microsoft-365/admin/get-help-with-domains/create-dns-records-at-any-dns-hosting-provider) y haga clic en el vínculo para su host DNS.</span><span class="sxs-lookup"><span data-stu-id="20c33-178">Go to [Create DNS records for Office 365](https://docs.microsoft.com/microsoft-365/admin/get-help-with-domains/create-dns-records-at-any-dns-hosting-provider), and then click the link for your DNS host.</span></span>

4. <span data-ttu-id="20c33-179">Pruebe el registro TXT de SPF</span><span class="sxs-lookup"><span data-stu-id="20c33-179">Test your SPF TXT record.</span></span>

## <a name="how-to-handle-subdomains"></a><span data-ttu-id="20c33-180">¿Cómo se tratan los subdominios?</span><span class="sxs-lookup"><span data-stu-id="20c33-180">How to handle subdomains?</span></span> <a name="SPFandSubdomains"></a>

<span data-ttu-id="20c33-181">Es importante tener en cuenta que *necesita crear un registro independiente para cada subdominio, ya que los subdominios no heredan el registro SPF de su dominio de nivel superior*.</span><span class="sxs-lookup"><span data-stu-id="20c33-181">It is important to note that *you need to create a separate record for each subdomain as subdomains don't inherit the SPF record of their top level domain*.</span></span>

<span data-ttu-id="20c33-182">Se necesita un registro de SPF (`*.`) comodín adicional para todos los dominios y subdominios para evitar que los atacantes envíen mensajes de correo electrónico desde subdominios inexistentes.</span><span class="sxs-lookup"><span data-stu-id="20c33-182">An additional wildcard SPF record (`*.`) is required for every domain and subdomain to prevent attackers from sending email claiming to be from non-existent subdomains.</span></span> <span data-ttu-id="20c33-183">Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="20c33-183">For example:</span></span>

```text
*.subdomain.contoso.com. IN TXT "v=spf1 -all"
```

## <a name="next-steps"></a><span data-ttu-id="20c33-184">Siguientes pasos <a name="TshootingSPF"></a></span><span class="sxs-lookup"><span data-stu-id="20c33-184">Next steps <a name="TshootingSPF"></a></span></span>

<span data-ttu-id="20c33-185">¿Tiene problemas con el registro TXT de SPF?</span><span class="sxs-lookup"><span data-stu-id="20c33-185">Having trouble with your SPF TXT record?</span></span> <span data-ttu-id="20c33-186">Lea [Solución de problemas: Procedimientos recomendados para SPF en Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#SPFTroubleshoot).</span><span class="sxs-lookup"><span data-stu-id="20c33-186">Read [Troubleshooting: Best practices for SPF in Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#SPFTroubleshoot).</span></span>


## <a name="what-does-spf-email-authentication-actually-do"></a><span data-ttu-id="20c33-187">¿Qué hace realmente la autenticación de correo electrónico SPF?</span><span class="sxs-lookup"><span data-stu-id="20c33-187">What does SPF email authentication actually do?</span></span>

<span data-ttu-id="20c33-188">SPF identifica qué servidores de correo pueden enviar correo en su nombre.</span><span class="sxs-lookup"><span data-stu-id="20c33-188">SPF identifies which mail servers are allowed to send mail on your behalf.</span></span> <span data-ttu-id="20c33-189">Básicamente, puede evitar la suplantación de identidad con la ayuda de SPF, junto con DKIM, DMARC y otras tecnologías compatibles con Office 365.</span><span class="sxs-lookup"><span data-stu-id="20c33-189">Basically, SPF, along with DKIM, DMARC, and other technologies supported by Office 365, help prevent spoofing and phishing.</span></span> <span data-ttu-id="20c33-190">SPF se agrega como un registro TXT que DNS usa para identificar qué servidores de correo pueden enviar correo en nombre de su dominio personalizado.</span><span class="sxs-lookup"><span data-stu-id="20c33-190">SPF is added as a TXT record that is used by DNS to identify which mail servers can send mail on behalf of your custom domain.</span></span> <span data-ttu-id="20c33-191">Los destinatarios pueden consultar el registro TXT de SPF para determinar si un mensaje de su dominio personalizado procede de un servidor de mensajería autorizado.</span><span class="sxs-lookup"><span data-stu-id="20c33-191">Recipient mail systems refer to the SPF TXT record to determine whether a message from your custom domain comes from an authorized messaging server.</span></span>

<span data-ttu-id="20c33-p120">Por ejemplo, supongamos que el dominio personalizado contoso.com usa Office 365. Le agrega un registro TXT de SPF que incluye los servidores de mensajería de Office 365 como servidores de correo legítimos para su dominio. Cuando el servidor de mensajería receptor obtiene un mensaje de joe@contoso.com, el servidor busca el registro TXT de SPF para contoso.com y averigua si el mensaje es válido. Si el servidor receptor descubre que el mensaje proviene de un servidor que no es ninguno de los servidores de mensajería de Office 365 indicados en el registro SPF, el servidor de correo receptor puede rechazar el mensaje como correo no deseado.</span><span class="sxs-lookup"><span data-stu-id="20c33-p120">For example, let's say that your custom domain contoso.com uses Office 365. You add an SPF TXT record that lists the Office 365 messaging servers as legitimate mail servers for your domain. When the receiving messaging server gets a message from joe@contoso.com, the server looks up the SPF TXT record for contoso.com and finds out whether the message is valid. If the receiving server finds out that the message comes from a server other than the Office 365 messaging servers listed in the SPF record, the receiving mail server can choose to reject the message as spam.</span></span>

<span data-ttu-id="20c33-p121">Además, si el dominio personalizado no tiene un registro TXT de SPF, algunos servidores de recepción pueden rechazar directamente el mensaje. Esto se debe a que el servidor de recepción no puede validar que los mensajes procedan de un servidor de mensajería autorizado.</span><span class="sxs-lookup"><span data-stu-id="20c33-p121">Also, if your custom domain does not have an SPF TXT record, some receiving servers may reject the message outright. This is because the receiving server cannot validate that the message comes from an authorized messaging server.</span></span>

<span data-ttu-id="20c33-p122">Si ya ha configurado el correo para Office 365, ya ha incluido servidores de mensajería de Microsoft en DNS como un registro TXT de SPF. Sin embargo, en algunos casos puede que sea necesario actualizar el registro TXT de SPF en DNS. Por ejemplo:</span><span class="sxs-lookup"><span data-stu-id="20c33-p122">If you've already set up mail for Office 365, then you have already included Microsoft's messaging servers in DNS as an SPF TXT record. However, there are some cases where you may need to update your SPF TXT record in DNS. For example:</span></span>

- <span data-ttu-id="20c33-p123">Antes, debía agregar un registro TXT de SPF diferente a su dominio personalizado si utilizaba SharePoint Online. Esto ya no es necesario. Este cambio debería reducir el riesgo de que los mensajes de notificación de SharePoint Online acaben en la carpeta de Correo no deseado. Actualice su registro SPF TXT si ha alcanzado el límite de 10 búsquedas y recibe errores como "Límite de búsqueda superado" y "Demasiados saltos".</span><span class="sxs-lookup"><span data-stu-id="20c33-p123">Previously, you had to add a different SPF TXT record to your custom domain if you were using SharePoint Online. This is no longer required. This change should reduce the risk of SharePoint Online notification messages ending up in the Junk Email folder. Update your SPF TXT record if you are hitting the 10 lookup limit and receiving errors that say things like, "exceeded the lookup limit" and "too many hops".</span></span>

- <span data-ttu-id="20c33-205">Tiene un entorno híbrido con Office 365 y Exchange local.</span><span class="sxs-lookup"><span data-stu-id="20c33-205">If you have a hybrid environment with Office 365 and Exchange on-premises.</span></span>

- <span data-ttu-id="20c33-206">Quiere configurar DKIM y DMARC (recomendado).</span><span class="sxs-lookup"><span data-stu-id="20c33-206">You intend to set up DKIM and DMARC (recommended).</span></span>

## <a name="more-information-about-spf"></a><span data-ttu-id="20c33-207">Más información sobre SPF<a name="AdvancedSPFexs"></a></span><span class="sxs-lookup"><span data-stu-id="20c33-207">More information about SPF <a name="AdvancedSPFexs"></a></span></span>

<span data-ttu-id="20c33-208">Para obtener ejemplos avanzados y explicaciones más detalladas sobre la sintaxis admitida de SPF, la suplantación de identidad, la solución de problemas y la manera en que Office 365 admite SPF, vea [Cómo funciona SPF para evitar la suplantación de identidad en Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#HowSPFWorks).</span><span class="sxs-lookup"><span data-stu-id="20c33-208">For advanced examples, a more detailed discussion about supported SPF syntax, spoofing, troubleshooting, and how Office 365 supports SPF, see [How SPF works to prevent spoofing and phishing in Office 365](how-office-365-uses-spf-to-prevent-spoofing.md#HowSPFWorks).</span></span>

## <a name="links-to-configure-dkim-and-dmarc"></a><span data-ttu-id="20c33-209">Vínculos para configurar DKIM y DMARC</span><span class="sxs-lookup"><span data-stu-id="20c33-209">Links to configure DKIM and DMARC</span></span>

 <span data-ttu-id="20c33-210">SPF está diseñado para ayudar a evitar la suplantación de identidad, pero existen técnicas de suplantación de identidad contra las que SPF no puede protegerlo.</span><span class="sxs-lookup"><span data-stu-id="20c33-210">SPF is designed to help prevent spoofing, but there are spoofing techniques that SPF can't protect against.</span></span> <span data-ttu-id="20c33-211">Para defenderse de estos, una vez que haya configurado SPF, debe configurar DKIM y DMARC para Office 365.</span><span class="sxs-lookup"><span data-stu-id="20c33-211">To defend against these, once you've set up SPF, you should configure DKIM and DMARC for Office 365.</span></span>

<span data-ttu-id="20c33-212">El objetivo de la autenticación de correo electrónico [DKIM](https://docs.microsoft.com/microsoft-365/security/office-365-security/use-dkim-to-validate-outbound-email?view=o365-worldwide) es demostrar que el contenido del correo no ha sido manipulado.</span><span class="sxs-lookup"><span data-stu-id="20c33-212">[DKIM](https://docs.microsoft.com/microsoft-365/security/office-365-security/use-dkim-to-validate-outbound-email?view=o365-worldwide) email authentication's goal is to prove the contents of the mail haven't been tampered with.</span></span>

<span data-ttu-id="20c33-213">El objetivo de la autenticación de correo electrónico [DMARC](https://docs.microsoft.com/microsoft-365/security/office-365-security/use-dmarc-to-validate-email?view=o365-worldwide) es asegurarse de que la información de SPF y DKIM coincida con la dirección De.</span><span class="sxs-lookup"><span data-stu-id="20c33-213">[DMARC](https://docs.microsoft.com/microsoft-365/security/office-365-security/use-dmarc-to-validate-email?view=o365-worldwide) email authentication's goal is to make sure that SPF and DKIM information matches the From address.</span></span>