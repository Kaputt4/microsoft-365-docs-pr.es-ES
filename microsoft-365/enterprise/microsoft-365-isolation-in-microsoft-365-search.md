---
title: Aislamiento de inquilino en Búsqueda de Microsoft 365
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
f1.keywords:
- NOCSH
description: En este artículo, busque una explicación de cómo funciona el aislamiento de inquilinos para separar los datos del espacio empresarial en Microsoft 365 Search.
ms.custom: seo-marvel-apr2020
ms.openlocfilehash: 3416afdeceaa7000b516ec89b4a2a1e59d8708d0
ms.sourcegitcommit: c029834c8a914b4e072de847fc4c3a3dde7790c5
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/02/2020
ms.locfileid: "47332405"
---
# <a name="tenant-isolation-in-microsoft-365-search"></a><span data-ttu-id="f829b-103">Aislamiento de inquilino en Búsqueda de Microsoft 365</span><span class="sxs-lookup"><span data-stu-id="f829b-103">Tenant Isolation in Microsoft 365 Search</span></span>

<span data-ttu-id="f829b-104">La búsqueda de SharePoint Online usa un modelo de separación de inquilinos que equilibra la eficacia de las estructuras de datos compartidas con la protección contra la pérdida de información entre inquilinos.</span><span class="sxs-lookup"><span data-stu-id="f829b-104">SharePoint Online search uses a tenant separation model that balances the efficiency of shared data structures with protection against information leaking between tenants.</span></span> <span data-ttu-id="f829b-105">Con este modelo, evitamos que las características de búsqueda:</span><span class="sxs-lookup"><span data-stu-id="f829b-105">With this model, we prevent the Search features from:</span></span>

- <span data-ttu-id="f829b-106">Devolver resultados de consulta que contienen documentos de otros inquilinos</span><span class="sxs-lookup"><span data-stu-id="f829b-106">Returning query results that contain documents from other tenants</span></span>
- <span data-ttu-id="f829b-107">Exposición de información suficiente en los resultados de consulta que un usuario cualificado podría inferir información sobre otros inquilinos</span><span class="sxs-lookup"><span data-stu-id="f829b-107">Exposing sufficient information in query results that a skilled user could infer information about other tenants</span></span>
- <span data-ttu-id="f829b-108">Mostrar el esquema o la configuración de otro inquilino</span><span class="sxs-lookup"><span data-stu-id="f829b-108">Showing schema or settings from another tenant</span></span>
- <span data-ttu-id="f829b-109">Mezcla de información de procesamiento de análisis entre inquilinos o resultados de almacén en el inquilino incorrecto</span><span class="sxs-lookup"><span data-stu-id="f829b-109">Mixing analytics processing information between tenants or store results in the wrong tenant</span></span>
- <span data-ttu-id="f829b-110">Uso de entradas de diccionario de otro inquilino</span><span class="sxs-lookup"><span data-stu-id="f829b-110">Using dictionary entries from another tenant</span></span>

<span data-ttu-id="f829b-111">Para cada tipo de datos de inquilino, usamos una o más capas de protección en el código para evitar la pérdida accidental de información.</span><span class="sxs-lookup"><span data-stu-id="f829b-111">For each type of tenant data, we use one or more layers of protection in the code to prevent accidental leaking of information.</span></span> <span data-ttu-id="f829b-112">Los datos más críticos tienen la mayor parte de las capas de protección para asegurarse de que un único defecto no da como resultado una fuga de información real o percibida.</span><span class="sxs-lookup"><span data-stu-id="f829b-112">The most critical data has the most layers of protection to make sure that a single defect doesn't result in actual or perceived information leakage.</span></span>

## <a name="tenant-separation-for-the-search-index"></a><span data-ttu-id="f829b-113">Separación de inquilinos para el índice de búsqueda</span><span class="sxs-lookup"><span data-stu-id="f829b-113">Tenant Separation for the Search Index</span></span>

<span data-ttu-id="f829b-114">El índice de búsqueda se almacena en el disco en los servidores que hospedan los componentes de índice y los inquilinos comparten los archivos de índice.</span><span class="sxs-lookup"><span data-stu-id="f829b-114">The search index is stored on disk in the servers hosting the index components and the tenants share the index files.</span></span> <span data-ttu-id="f829b-115">Los documentos indizados de un inquilino solo son visibles para las consultas de ese inquilino.</span><span class="sxs-lookup"><span data-stu-id="f829b-115">A tenant's indexed documents are visible only for queries for that tenant.</span></span> <span data-ttu-id="f829b-116">Tres mecanismos independientes evitan la fuga de información:</span><span class="sxs-lookup"><span data-stu-id="f829b-116">Three independent mechanisms prevent information leakage:</span></span>

- <span data-ttu-id="f829b-117">Filtrado de id. de inquilino</span><span class="sxs-lookup"><span data-stu-id="f829b-117">Tenant ID filtering</span></span>
- <span data-ttu-id="f829b-118">Prefijo de término de id. de inquilino</span><span class="sxs-lookup"><span data-stu-id="f829b-118">Tenant ID term prefixing</span></span>
- <span data-ttu-id="f829b-119">Comprobaciones de ACL</span><span class="sxs-lookup"><span data-stu-id="f829b-119">ACL checks</span></span>

<span data-ttu-id="f829b-120">Los tres mecanismos tendrían que fallar para que la búsqueda devuelva documentos al inquilino incorrecto.</span><span class="sxs-lookup"><span data-stu-id="f829b-120">All three mechanisms would have to fail for Search to return documents to the wrong tenant.</span></span>

## <a name="tenant-id-filtering-and-tenant-id-term-prefixing"></a><span data-ttu-id="f829b-121">Filtrado de id. de espacio empresarial y prefijo de términos de id. de inquilino</span><span class="sxs-lookup"><span data-stu-id="f829b-121">Tenant ID Filtering and Tenant ID Term Prefixing</span></span>

<span data-ttu-id="f829b-122">La búsqueda prefida todos los términos indizados en el índice de texto completo con el identificador de inquilino.</span><span class="sxs-lookup"><span data-stu-id="f829b-122">Search prefixes every term that is indexed in the full-text index with the tenant ID.</span></span> <span data-ttu-id="f829b-123">Por ejemplo, cuando el término "*foo*" se indiza para un inquilino con un identificador de "*123*", la entrada en el índice de texto completo es "*123foo".*</span><span class="sxs-lookup"><span data-stu-id="f829b-123">For example, when the term "*foo*" is indexed for a tenant with an ID of "*123*", the entry in the full-text index is "*123foo.*"</span></span>

<span data-ttu-id="f829b-124">Cada consulta se convierte para incluir el identificador de inquilino mediante un proceso denominado filtrado de id. de inquilino.</span><span class="sxs-lookup"><span data-stu-id="f829b-124">Every query is converted to include the tenant ID using a process called tenant ID filtering.</span></span> <span data-ttu-id="f829b-125">Por ejemplo, la consulta "*foo*" se convierte en "<*guid*>. *foo* AND *tenantID*:<*guid*>", donde <*guid*> representa al inquilino que realiza la consulta.</span><span class="sxs-lookup"><span data-stu-id="f829b-125">For example, the query "*foo*" is converted to "<*guid*>.*foo* AND *tenantID*:<*guid*>", where <*guid*> represents the tenant performing the query.</span></span> <span data-ttu-id="f829b-126">Esta conversión de consulta se produce dentro de cada nodo de índice y ni la consulta ni el procesamiento de contenido pueden influir en él.</span><span class="sxs-lookup"><span data-stu-id="f829b-126">This query conversion occurs within each index node and neither query nor content processing can influence it.</span></span> <span data-ttu-id="f829b-127">Dado que el identificador de inquilino se agrega a cada consulta, la frecuencia de un término en otros inquilinos no se puede deducir si se busca la mejor clasificación de coincidencia en un inquilino.</span><span class="sxs-lookup"><span data-stu-id="f829b-127">Because the tenant ID is added to every query, the frequency of a term in other tenants can't be inferred by looking at best match ranking in one tenant.</span></span>

<span data-ttu-id="f829b-128">El prefijo del término id. de inquilino solo se produce en el índice de texto completo.</span><span class="sxs-lookup"><span data-stu-id="f829b-128">Tenant ID term prefixing occurs only in the full-text index.</span></span> <span data-ttu-id="f829b-129">Las búsquedas en campo, como "*title:foo",* van a un índice de búsqueda sintética donde los términos no tienen el prefijo id. de inquilino.</span><span class="sxs-lookup"><span data-stu-id="f829b-129">Fielded searches, such as "*title:foo*", go to a synthetic search index where terms aren't prefixed by tenant ID.</span></span> <span data-ttu-id="f829b-130">En su lugar, las búsquedas con campos llevan el prefijo del nombre del campo.</span><span class="sxs-lookup"><span data-stu-id="f829b-130">Instead, fielded searches are prefixed with the field name.</span></span> <span data-ttu-id="f829b-131">Por ejemplo, la consulta "*title:foo*" se convierte en "*fields.title:foo AND fields.tenantID*:<*guid*>".</span><span class="sxs-lookup"><span data-stu-id="f829b-131">For example, the query "*title:foo*" is converted to "*fields.title:foo AND fields.tenantID*:<*guid*>."</span></span> <span data-ttu-id="f829b-132">Dado que la frecuencia de un término no influye en la clasificación de aciertos en el índice de búsqueda sintética, no es necesario separar el espacio empresarial por prefijos de términos.</span><span class="sxs-lookup"><span data-stu-id="f829b-132">Because the frequency of a term doesn't influence ranking of hits in the synthetic search index, there's no need for tenant separation by term prefixing.</span></span> <span data-ttu-id="f829b-133">Para una búsqueda de campo como "*title:foo",* la separación del contenido del espacio empresarial depende del filtrado de id. de inquilino por conversión de consulta.</span><span class="sxs-lookup"><span data-stu-id="f829b-133">For a fielded search like "*title:foo*", tenant content separation depends on tenant ID filtering by query conversion.</span></span>

## <a name="document-access-control-list-checks"></a><span data-ttu-id="f829b-134">Comprobaciones de la lista de control de acceso de documentos</span><span class="sxs-lookup"><span data-stu-id="f829b-134">Document Access Control List Checks</span></span>

<span data-ttu-id="f829b-135">La búsqueda controla el acceso a los documentos a través de acl que se guardan en el índice de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="f829b-135">Search controls access to documents through ACLs that are saved in the search index.</span></span> <span data-ttu-id="f829b-136">Cada elemento se indiza con un conjunto de términos en un campo de ACL especial.</span><span class="sxs-lookup"><span data-stu-id="f829b-136">Every item is indexed with a set of terms in a special ACL field.</span></span> <span data-ttu-id="f829b-137">El campo ACL contiene un término por grupo o usuario que puede ver el documento.</span><span class="sxs-lookup"><span data-stu-id="f829b-137">The ACL field contains one term per group or user that can view the document.</span></span> <span data-ttu-id="f829b-138">Cada consulta se aumenta con una lista de términos de entrada de control de acceso (ACE), uno para cada grupo al que pertenece el usuario autenticado.</span><span class="sxs-lookup"><span data-stu-id="f829b-138">Every query is augmented with a list of access control entry (ACE) terms, one for each group to which the authenticated user belongs.</span></span>

<span data-ttu-id="f829b-139">Por ejemplo, una consulta como "<*guid>.* *foo AND tenantID*:<*guid*>" se convierte en: "<*guid*>. *foo AND tenantID*:<*guid* >  *AND* (*docACL:* < *ace1* >  *OR docACL*:<*ace2* >  *OR docACL*:<*ace3* >  *...*)"</span><span class="sxs-lookup"><span data-stu-id="f829b-139">For example, a query like "<*guid*>.*foo AND tenantID*:<*guid*>" becomes: "<*guid*>.*foo AND tenantID*:<*guid*> *AND* (*docACL:*<*ace1*> *OR docACL*:<*ace2*> *OR docACL*:<*ace3*> *...*)"</span></span>

<span data-ttu-id="f829b-140">Dado que los identificadores de usuario y grupo y, por lo tanto, las ACE son únicos, esto proporciona un nivel adicional de seguridad entre los inquilinos para los documentos que solo son visibles para algunos usuarios.</span><span class="sxs-lookup"><span data-stu-id="f829b-140">Because user and group identifiers and hence ACEs are unique, this provides an extra level of security between tenants for documents that are only visible to some users.</span></span> <span data-ttu-id="f829b-141">Lo mismo ocurre con la ACE especial "Todos excepto los usuarios externos" que concede acceso a los usuarios normales del espacio empresarial.</span><span class="sxs-lookup"><span data-stu-id="f829b-141">The same is the case for the special "Everyone except external users" ACE that grants access to regular users in the tenant.</span></span> <span data-ttu-id="f829b-142">Pero como las ACE para "Todos" son las mismas para todos los inquilinos, la separación de inquilinos para documentos públicos depende del filtrado de identificadores de inquilino.</span><span class="sxs-lookup"><span data-stu-id="f829b-142">But since ACEs for "Everyone" are the same for all tenants, tenant separation for public documents depends on tenant ID filtering.</span></span> <span data-ttu-id="f829b-143">También se admiten ACE de denegación.</span><span class="sxs-lookup"><span data-stu-id="f829b-143">Deny ACEs are also supported.</span></span> <span data-ttu-id="f829b-144">El aumento de consulta agrega una cláusula que quita un documento del resultado cuando hay una coincidencia con una ACE de denegación.</span><span class="sxs-lookup"><span data-stu-id="f829b-144">The query augmentation adds a clause that removes a document from the result when there is a match with a deny ACE.</span></span>

<span data-ttu-id="f829b-145">En la búsqueda de Exchange Online, el índice se particiona en el identificador de buzón de correo de los buzones de usuario individuales en lugar del identificador de inquilino (id. de suscripción) como en SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="f829b-145">In Exchange Online search, the index is partitioned on mailbox ID for individual user's mailboxes instead of tenant ID (subscription ID) as in SharePoint Online.</span></span> <span data-ttu-id="f829b-146">El mecanismo de creación de particiones es el mismo que SharePoint Online, pero no hay ningún filtrado de ACL.</span><span class="sxs-lookup"><span data-stu-id="f829b-146">The partitioning mechanism is the same as SharePoint Online, but there is no ACL filtering.</span></span>
